

<!doctype html>

<html xmlns="http://www.w3.org/1999/xhtml">
<head id="Head1"><link rel="yandex-tableau-widget" href="/rssReader/ya_tableau.aspx" />   
    <script type="text/javascript">
        sas_tmstp = Math.round(Math.random() * 10000000000); sas_masterflag = 1;
        function SmartAdServer(sas_pageid, sas_formatid, sas_target) {
            if (sas_masterflag == 1) { sas_masterflag = 0; sas_master = 'M'; } else { sas_master = 'S'; };
            document.write('<scr' + 'ipt src="http://www4.smartadserver.com/call/pubj/' + sas_pageid + '/' + sas_formatid + '/' + sas_master + '/' + sas_tmstp + '/' + escape(sas_target) + '?"></scr' + 'ipt>');
        }
    </script>
<!-- Likes -->
<!-- vk like-->
<script type="text/javascript" src="http://vkontakte.ru/js/api/share.js?9" charset="windows-1251"></script>
<!-- end vk like-->
<!-- End Likes -->

<meta name="description" content="Первый онлайн-переводчик Рунета. Бесплатный перевод текстов и поиск по словарям. Грамматика, произношение, транскрипция и правила чтения. Перевод сайтов. Мобильная версия и приложения для смартфонов (iPhone, iPad, Android и Windows Mobile). Английский, русский, немецкий, французский, испанский, португальский, итальянский, арабский, турецкий, финский, японский, греческий, казахский и каталанский языки. Технологии машинного перевода PROMT. Качественный тематический перевод: бизнес, образование, путешествия, технический перевод." /><meta name="keywords" content="promt, промт, перевод, текст, переводчик, технический перевод, переводы, переводной, переводить, перевод web-страниц, веб-страница, качественный перевод e-mail, e-mails, онлайн перевод, он-лайн переводчик, онлайновый, оперативный перевод, электронная почта, почта, письма, письмо, Россия, английский, русский, немецкий, французский, испанский, итальянский, португальский, арабский, турецкий, финский, японский, греческий, казахский, каталанский, бесплатно, проект мт, проект, мт, система, машинный, лингвистика, touchphone, смартфон, мобильный, iPhone, Android" /><link href="/App_Themes/Default/promt.css?0.38" rel="stylesheet" type="text/css" /><link href="/App_Themes/Default/print.css?0.38" rel="stylesheet" type="text/css" media="print" /><link href="/App_Themes/Default/jquery-ui-1.8.14.custom.css?0.38" rel="stylesheet" type="text/css" /><link href="/App_Themes/Default/scroll/jquery.jscrollpane.css?0.38" rel="stylesheet" type="text/css" /><link href="http://m.translate.ru/touch/" rel="alternate" media="only screen and (max-width: 640px)" /><script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script><script type="text/javascript" src="/App_Themes/Default/jquery-ui-1.8.14.custom.min.js"></script><script type="text/javascript" src="/App_Themes/Default/vk.js?0.38"></script><script type="text/javascript" src="/App_Themes/Default/scripts4.js?0.38"></script><script type="text/javascript" src="/App_Themes/Default/scroll/jquery.mousewheel.js"></script><script type="text/javascript" src="/App_Themes/Default/scroll/jquery.jscrollpane.min.js"></script><script type="text/javascript" src="/App_Themes/Default/adv/adriver.core.2.js?0.38"></script><script type="text/javascript" src="http://partner.googleadservices.com/gampad/google_service.js"></script><script type="text/javascript">GS_googleAddAdSenseService("ca-pub-4436789801655560");GS_googleEnableAllServices();</script><script type="text/javascript">GA_googleAddAttr("direction", '');</script><script type="text/javascript">GA_googleAddAttr("template", '');</script><script type="text/javascript">GA_googleAddAttr("prmtlang", 'ru');</script><script type="text/javascript">GA_googleAddSlot("ca-pub-4436789801655560", "Translate.Ru_topLine");</script><script type="text/javascript">GA_googleAddSlot("ca-pub-4436789801655560", "Translate.Ru_bottom");</script><script type="text/javascript">GA_googleAddSlot("ca-pub-4436789801655560", "Tranlate.Ru_Fly");</script><script type="text/javascript">GA_googleAddSlot("ca-pub-4436789801655560", "Translate.Ru_bottom_line");</script><script type="text/javascript">GA_googleFetchAds();</script><script type="text/javascript">var N = 2; var ar_duo1 = Math.floor(Math.random()*N+1);</script><script type="text/javascript">var crtg_nid = '4021'; var crtg_cookiename = 'crtg_rta'; var crtg_varname = 'crtg_content'; function crtg_getCookie(c_name){ var i,x,y,ARRCookies=document.cookie.split(';');for(i=0;i<ARRCookies.length;i++){x=ARRCookies[i].substr(0,ARRCookies[i].indexOf('='));y=ARRCookies[i].substr(ARRCookies[i].indexOf('=')+1);x=x.replace(/^\s+|\s+$/g,'');if(x==c_name){return unescape(y);} }return'';} var crtg_content = crtg_getCookie(crtg_cookiename); var crtg_rnd=Math.floor(Math.random()*99999999999); (function(){ var crtg_url=location.protocol+'//rtax.criteo.com/delivery/rta/rta.js?netId='+escape(crtg_nid); crtg_url +='&cookieName='+escape(crtg_cookiename); crtg_url +='&rnd='+crtg_rnd; crtg_url +='&varName=' + escape(crtg_varname); var crtg_script=document.createElement('script');crtg_script.type='text/javascript';crtg_script.src=crtg_url;crtg_script.async=true; if(document.getElementsByTagName('head').length>0)document.getElementsByTagName('head')[0].appendChild(crtg_script); else if(document.getElementsByTagName('body').length>0)document.getElementsByTagName('body')[0].appendChild(crtg_script); })();</script><title>
	Переводчик онлайн и словарь от PROMT: английский, русский, немецкий, французский, испанский, итальянский,  португальский, арабский, турецкий, финский, японский, греческий, казахский и каталанский языки.
</title></head>
<body>
<!--[if lt IE 9]>
 <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
<![endif]--> 

<!-- Start Google Analitics tag -->
<script type="text/javascript">var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'UA-152258-10']);
_gaq.push(['_setDomainName', '.translate.ru']);
_gaq.push(['_trackPageview']);
(function() {
var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})(); 
_gaq.push(['require', 'linkid']);
</script> 
<!-- End Google Analitics tag --> 

 
<style>
#AdvInResult{display:none; border:1px solid #7f9db9;  box-shadow:5px 5px 4px #BBBBBB; position:absolute;z-index:100000;border-radius:8px;-moz-border-radius:8px;-webkit-border-radius:8px; background-color:White!important; padding:10px;}
#mfi_translate #shortRLink {display:none;}
  #btt, #ttSourceText{display:none;}
/*#logotext{width:390px;}*/
</style>

<script language="javascript" type="text/javascript">
    function GetAjaxResult(res) {
        if (res.hasOwnProperty("d")) { return res.d; }
        else { return res; }
    }

    var maxlen = "3000";
    var msg = "Вы можете перевести только 3000 символов единовременно. Текст, превышающий лимит, будет удален.";
    var eFB = "Мой текст не переводится!";
    var referStr = "";
    var msgPaste = 'Ваш браузер не разрешает доступ к буферу обмена.\nДля добавления текста используйте комбинацию клавиш Ctrl+V.';
    var msgCopy = 'Ваш браузер не разрешает доступ к буферу обмена.\nВыделите нужный текст и нажмите комбинацию клавиш Ctrl+C.';

    var txtForEditor = "";
    var reserveSrcLang = "";
    var reserveTrgLang = "";
    var setLang = false;
    var startEdit = false;
    var trFdLnk = "";
    var isPrep = 0;
    var curPtsDirCode = "en-ru";
    var adriverBan = 0;
    var ban, ban_top;
    var needReloadAdv = true;
    var prmtlang = "ru";
    var thisDict = false;
    var lastTranslationWrd = '';
    var maxSourceWin=90;
    

    if (getCookie('LoggedUserParams')) {
        var LoggedUser = getCookie('LoggedUserParams');
        if (LoggedUser.substring(9, 13) == 'true') maxlen = 10000
        else maxlen = 3000;
        //console.log(maxlen);
    }
</script>
<script type="text/javascript">    function cancel_bubbling(e) { e = e || event; e.cancelBubble = true; if (e.stopPropagation) { e.stopPropagation(); } }</script>


<script language="javascript" type="text/javascript">
 var tt_count = (getCookie('tooltip'))?setCookie('tooltip',getCookie('tooltip')*1+1):setCookie('tooltip','1');
 tt_count = getCookie('tooltip');
 //alert(getCookie('tooltip')); 

// получение направлений перевода 
function GetDir(){
 var selct1=document.getElementById("SiteContent_dirs_sLang");
 var selct2=document.getElementById("SiteContent_dirs_rLang");
 //return selct1.options[selct1.selectedIndex].value+selct2.options[selct2.selectedIndex].value;        
 return [selct1.options[selct1.selectedIndex].value,selct2.options[selct2.selectedIndex].value];
}//GetDir

// получение направлений  только для рекламы c учетом возможной незагрузки компонентов выборя языка
function GetDirAdv(){
 var dir4Adv = "au-ru";
 if ((document.getElementById("SiteContent_dirs_sLang"))&&(document.getElementById("SiteContent_dirs_rLang")))
    {
    var selct1=document.getElementById("SiteContent_dirs_sLang");
    var selct2=document.getElementById("SiteContent_dirs_rLang");
    dir4Adv = selct1.options[selct1.selectedIndex].value+"-"+selct2.options[selct2.selectedIndex].value;  
    }
 else{
    var cString=getCookie('selDirText');
    if (cString){
    dir4Adv = cString.substring(12,14);}
    }  
 return  dir4Adv; 
}//getDirAdv


function GetTranslationCBK(chST){    
 $("#editResultWin_test").hide();
 $("#PhrasesBlock").hide();
 $("#SamplesBlock").hide();
 $("#explanatoryBLock").hide();
 $('#adviseIconDiv').hide();
 hideEditTranslationWin(0);
 $("#editResult_test").val('');
 $("#editResult_test").css('height','');
$("#SiteContent_sourceText").css('height','');
 //jQuery("textarea[class*=expand]").TextAreaExpander();
 
 $("#blurResult").show();
if (chST==1) {savedUID = "";}
if (rtrim($("#SiteContent_sourceText").val())=="") {$("#blurResult").hide();$("#SiteContent_sourceText").val('');$("#ttSourceText").slideDown(300);$("#btt").slideDown(300);$('#ttSourceText').css('color','#FC575E'); setTimeout("$('#ttSourceText').css('color','#45697E');",2000);return false;}
if ((document.getElementById("SiteContent_sourceTextDict"))&&(rtrim(document.getElementById("SiteContent_sourceTextDict").val==''))){return;}
var dir=GetDir();
 TranslType = "text";
 ReceiveServerData("");
}//getTrCBK
    
function ReceiveServerData(rValue){
 if (TranslType=="text") {GetTranslation(rValue);} 
 if (TranslType=="advise") {MakeAnotherTranslate(rValue, tmpDirCode);}
 if (TranslType=="wordER") {ShowFullWRefERRE(rValue, tmpDirCode, tmpPos,0);}
 if (TranslType=="word") {ShowFullWRef(rValue, tmpDirCode, tmpPos);}
 if (TranslType=="dictWordER") {getFullWRef=false;ShowFullWRefERRE(rValue, tmpDirCode, tmpPos,1);}
 if (TranslType=="dictWord") {getFullWRef=false;ShowFullWRefERRE(rValue, tmpDirCode, tmpPos,2);}

}//recvServData

function reload_ban(){
    // for criteo 12.2014
    var crtg_content = crtg_getCookie(crtg_cookiename);
    var crtg_rnd=Math.floor(Math.random()*99999999999);
    (function(){
	    var crtg_url=location.protocol+'//rtax.criteo.com/delivery/rta/rta.js?netId='+escape(crtg_nid);
	    crtg_url +='&cookieName='+escape(crtg_cookiename);
	    crtg_url +='&rnd='+crtg_rnd;
	    crtg_url +='&varName=' + escape(crtg_varname);
	    var crtg_script=document.createElement('script');
	    crtg_script.type='text/javascript';
	    crtg_script.src=crtg_url;
	    crtg_script.async=true;
		    if(document.getElementsByTagName('head').length>0)document.getElementsByTagName('head')[0].appendChild(crtg_script);
		    else if(document.getElementsByTagName('body').length>0)document.getElementsByTagName('body')[0].appendChild(crtg_script);
	    })();
   // end  criteo 12.2014
	if (adriverBan==0){
           ban = new adriver("adriver_banner_399488126", {sid:196839, bt:52, bn:2, pz:ar_duo1, keyword: encodeURIComponent(typeof crtg_content !== 'undefined' && crtg_content ? crtg_content : '')});
           ban_top = new adriver("adriver_banner_312813489", {sid:196839, bt:52, bn:1, pz:ar_duo1, keyword: encodeURIComponent(typeof crtg_content !== 'undefined' && crtg_content ? crtg_content : '')});
           //alert($("#adriver_banner_312813489").height());
           //if ($("#adriver_banner_312813489").height()==200) {$("#adriver_banner_312813489").css('height', '200px');}
   
           //var bg_ban = new adriver("adriver_banner_brandirovanie", {sid:196839, bt:52, bn:3, pz:ar_duo1, keyword: encodeURIComponent(typeof crtg_content !== 'undefined' && crtg_content ? crtg_content : '')});
           //var bg_midl = new adriver("adriver_banner_728x200", {sid:196839, bt:52, bn:6, pz:ar_duo1, keyword: encodeURIComponent(typeof crtg_content !== 'undefined' && crtg_content ? crtg_content : '')});
    
            // for branding 10.2014  *1*
            //var bannerID;
            //var bannerAlt;
            //ban_top.onLoadComplete(function(){
	        //    bannerID = this.reply.bid;
	        //    bannerAlt = this.reply.alt;
            //});
            // end for branding 10.2014  *1*
    
    //document.getElementById('yandex_ad_R-127030-1').innerHTML='';
    //document.getElementById('yandex_ad_R-127030-3').innerHTML='';
    adriverBan=1;
    }
    ban.p.innerHTML = '';
    ban_top.p.innerHTML = '';
    
    //for branding 10.2014  *2*
    //    if ($("#adriver_banner_312813489").children('iframe')) {$("#adriver_banner_312813489").css('height', '90px');$('body').css('background','url("/images/common/bg.png") repeat-x scroll center top #d7d7d7');}
    //    if (bannerAlt=="AdRiver"){document.getElementsByTagName('body')[0].style ='';}
    //    
    //    if(document.getElementById('ar_a'+bannerID)){
    //	document.getElementById('ar_a'+bannerID).parentNode.removeChild(document.getElementById('ar_a'+bannerID));
    //	document.getElementById('ar_b'+bannerID).parentNode.removeChild(document.getElementById('ar_b'+bannerID));
    //	document.getElementById('ar_t'+bannerID).parentNode.removeChild(document.getElementById('ar_t'+bannerID));}
	
	// end for branding 10.2014  *2*
	
	
    //bg_midl.p.innerHTML = '';
	if (ban.isLoading ==2){
		ban.reload();
	}
	if (ban_top.isLoading ==2){
		ban_top.reload();
	}
    //if (bg_ban.isLoading ==2){
    // bg_ban.reload();
    //}
	//if (bg_midl.isLoading ==2){
	//	bg_midl.reload();
	//}
}// reload Adriver banners add 04.2014

function reload_ban_de(){
    if (needReloadAdv){
        ADTECH.loadAd(4861340);
        ADTECH.loadAd(4861341);
        ADTECH.loadAd(4861339);
        ADTECH.loadAd(4861338);
       }
       needReloadAdv = true;
}// reload adtech.de add 08.2014



function GetTranslation(key){ 

 uTrType = "";  
 isPrep = 0;
 $("#blurResult").show();
 $("#autoInfo").html('');
 $("#socialServices").hide();
 $("#AdvInResult").hide();
 $("#AdvInResult").removeAttr('style');
 $("#linkAT").show(); $("#linkATPic").show();
 $("#ttSourceText").hide();
 $("#btt").hide();
 visitLink=false; 
 $("#addTranslationText").unbind('keypress');
 closewAddTranslation();
 closeTranslationLinks();
 $("#divFullWordResult").hide();
 if (rtrim($("#SiteContent_sourceText").val())=="") {$("#SiteContent_sourceText").val('');$("#SiteContent_sourceText").focus();return false;}    
 var arr = GetDir();
 var dir=arr[0]+'-'+arr[1];
 //var dir=GetDir();
 var text=rtrim($("#SiteContent_sourceText").val());
 text = encodeURIComponent(text).split("'").join("\\'");
 var templ=$("#template").val();
 
 $.ajax({
    type: "POST",
    contentType: "application/json; charset=utf-8",
    url: "/services/TranslationService.asmx/GetTranslateNew",
    data: "{ dirCode:'"+dir+"', template:'"+templ+"', text:'"+text+"', lang:'ru', limit:"+maxlen+",useAutoDetect:true, key:'"+key+"', ts:'"+TS+"',tid:'',IsMobile:false}", 
    dataType: "json",
    success: function(result){    
      var res=GetAjaxResult(result);
      SetValsAfterTr(res);      
      trFdLnk = res.fdLink;
      curPtsDirCode = res.ptsDirCode;
      var curPtsDirCodeArr=curPtsDirCode.split('-')
      if (res.isWord && rtrim($('#SiteContent_sourceText').val())!='') {lastTranslationWrd=decodeURIComponent(text);GetTopPhrases(); GetTopSamples(); createDefLinks();}
      /*else if(!res.isURL)
      {
            if (res.provider == 'bing' && maxlen < text.length*2)
                alert(res.provider);
      }*/
//      $("#SiteContent_sourceText").css('min-height','');
//     $("#editResult_test").css('min-height','');
      //if (((GetDir()[0]== res.ptsDirCode[1])||(GetDir()[0]== 'a'))&&(GetDir()[1]== res.ptsDirCode[0])){
      if (((arr[0]== curPtsDirCodeArr[1])||(arr[0]== 'au'))&&(arr[1]== curPtsDirCodeArr[0])){
      //alert('автоматическая смена направления перевода');
      gaCustomVarsSet(res.ptsDirCode.split('-'));
      _gaq.push(['_trackEvent', 'Linguistic', 'Language', 'Auto']);}
      
      if (curVMode == 'vert'){$("#SiteContent_sourceText").attr('class','expand101-2400');
    jQuery("textarea[class*=expand]").TextAreaExpander();}
//       RefreshAdv();
       RefreshAdv_inRes();
//       RefreshAdvTop();

       reload_ban();
      
       customEvents.fire("onTranslate", '');
 
    },
    error: function (XMLHttpRequest, textStatus, errorThrown) { 
      GetErrMsg("К сожалению, сервис временно недоступен. Попробуйте повторить запрос позже."); trDirCode = "";
    }      
 });
}//GetTr

function gaCustomVarsSet(trDir){
    _gaq.push(['_setCustomVar',1,'Template',$("#template").val(),3]);
    _gaq.push(['_setCustomVar',2,'SrcLang',langConvertor(trDir[0]),3]);
    _gaq.push(['_setCustomVar',3,'TgtLang',langConvertor(trDir[1]),3]);  
    _gaq.push(['_setCustomVar',4,'UserLang',langConvertor(GetDir()[0])+"-"+langConvertor(GetDir()[1]),3]);
//    _gaq.push(['_setCustomVar',2,'SrcLang',trDir[0],3]);
//    _gaq.push(['_setCustomVar',3,'TgtLang',trDir[1],3]);  
//    _gaq.push(['_setCustomVar',4,'UserLang',GetDir().join('-'),3]); 
}

var ptsResult = "", trKey="";



function SetValsAfterTr(res)
{
 $('#adviseIconDiv').hide().removeClass('warning');$('#adviseText').html('');
 TS = "MainSite";
 if (blogPos != "right" ){$("#blogRSSRight").html($("#blogRSS").html());$("#blogRSS").html('');blogPos="right"; $("#moreBlog a img").width(20).height(20);$("#moreBlog a").css('margin-left','14px');$("#moreBlog a:first").before('<br>'); $("#moreBlog").css('float','left');}
 $("#autoInfo").hide();
 $("#translationResult").hide();
 trDirCode = res.ptsDirCode;
 trUID = res.trId;
 ptsResult = res.result;
 trKey = res.key4saveEdits;
 ;/*savedUID = "";*/saveTranslation = false;
 if (res.errCode=='0'){  
        
        
  if (res.isWord) {uTrType = "word"; 
         gaCustomVarsSet(res.ptsDirCode.split('-'));
        _gaq.push(['_trackEvent', 'Translate', 'Word', $("#SiteContent_sourceText").val(), $("#SiteContent_sourceText").val().length]);
        $("#dictLink").attr('href', res.fdLink);
   }                                  
    if (!res.isURL){
     //alert("0: "+ res.result);
     //alert("0_1: "+ decodeURIComponent(res.result)); 
     //alert(res.result.replace('<script>','').replace('<\/script>', ''));
     if (!res.isWord) {var resResult  = res.result.replace('<script>','<scriрt>').replace('<\/script>', '<\/scriрt>')}
     else resResult = res.result;
     //
     $("#translationResult").html(resResult);
      
         if(!res.isWord){   
             gaCustomVarsSet(res.ptsDirCode.split('-'));
            _gaq.push(['_trackEvent', 'Translate', 'Text', '', $("#SiteContent_sourceText").val().length]);
            $("#dictLink").attr('href', '/dictionary/');
            }
    }
    else {
     //uTrType = "site";
     //$("#translationResult").html("ссылка на переведенный сайт <br/><a href='"+res.result+"' target='_blank'>"+res.result+"</a>");     
     //if (res.ptsDirCode!="") {setTimeout('var trSiteWin=window.open("'+res.result+'","trSiteWindow","location=no,menubar=no,status=no,toolbar=no,resizable=yes,scrollbars=yes");trSiteWin.focus();',1000);}
     gaCustomVarsSet(res.ptsDirCode.split('-'));
     _gaq.push(['_trackEvent', 'Translate', 'Site',$("#SiteContent_sourceText").val()]);
     if (res.result!="") {
    //alert('Site '+res.result);
     location.href=res.result;
     }
    }  
    
    if (uTrType == "") {uTrType = "text"}
     if (uTrType == "text"){
           // $("#translationResult").click(function(event){showEditTranslationWin();});
           //$("#editResult_test").width($("#translationResult").width()+2);
           $("#translationResult").css('color','transparent'); 
           $("#translationResult").css('display','none');
//            if (curVMode == 'vert'){
//                if ($("#translationResult").height()>$("#SiteContent_sourceText").height()){$("#SiteContent_sourceText").css('min-height',$("#translationResult").height()+'px')}
//                else {$("#translationResult").css('min-height',$("#SiteContent_sourceText").height()+'px'); $("#editResult_test").css('min-height',$("#SiteContent_sourceText").height()+2+'px');}
//            }

           setEqualHeights();
           showEditTranslationWin(0);
           if ($("#SiteContent_sourceText").val().length > $("#editResult_test").val().length){
            $("#SiteContent_sourceText").val($("#SiteContent_sourceText").val()+"  ");
           }
           setEqualHeights();
          
           $("#editResult_test").click(function(event){
                //$("#keepClickEditor").show();
                $("#editResult_test").css('background','white').css('color','green');
                //$("#editResult_test").width($("#translationResult").width()+8);
                $("#editResult_test").css('min-height',$("#SiteContent_sourceText").height()+'px');
                $("#spellBttms_test").show();
                $("#editResultWin_test").css('background','white').css('border','1px solid #6f8ea9').css({'box-shadow':'5px 5px 4px #bbb','-moz-box-shadow':'5px 5px 4px #bbb','-webkit-box-shadow':'5px 5px 4px #bbb'});
           });
           
           
           
            //$("#translationResult").css('border', '1px solid #7F9DB9');
            $("#translationResult").css('border', '1px solid transparent');
            $("#clearResBtt").show();$("#editResBtt").show();
            if (curVMode != 'vert'){jQuery("#SiteContent_sourceText").TextAreaExpander();jQuery("#editResult_test").TextAreaExpander();}
            }
     else { $("#translationResult").css('border', '0');$("#clearResBtt").hide();$("#editResBtt").hide();$("#translationResult").unbind('click'); $("#translationResult").css('color','#525252'); $("#translationResult").css('display','block');}
    $("#autoInfo").html(res.dirNames); 
    if ($("#autoInfo").children('a').length != 0) {var curProvLink=$("#autoInfo a").attr('href'); $("#autoInfo").wrapInner("<a target='_blank' href="+curProvLink+"></a>");}
    $("#autoInfo").show();
    getFullWRef=false;
    //$("#translationResult").show();
    if (uTrType == "site"){$("#linkAT").hide(); $("#linkATPic").hide();}
    if ($.browser.msie){$("#linkGL_img").attr('src','/images/common/ss_icns_bt_ie.png')}
    $("#socialServices").show();
    $("#blogRSSRight").show(); 
    resetVote();         
    if (res.advise!=""){     
     if (res.adviseParams.showIntime) {$("#translationResult").html("<div class='warning warningMsg'>"+res.adviseParams.adviseText+"</div>"); $("#translationResult").show();$("#socialServices").hide(); }
     else {InsertAdvise(res.adviseParams.adviseText);}     
    }

    if (res.provider=="bing"){ 
     if ($("#SiteContent_sourceText").val().length>(maxlen/2)) {
     if (res.advise!="") {AddAdvise("К сожалению, в настоящее время для данного направления возможно перевести только  1500 символов единовременно. Текст, превышающий лимит, был удален.");}
     else {InsertAdvise("К сожалению, в настоящее время для данного направления возможно перевести только  1500 символов единовременно. Текст, превышающий лимит, был удален.");}
     }
    }

    wasErr = false;
 }
 else{ GetErrMsg(res.errMessage);
//    $("#translationResult").html("<span class='error errMsg'>"+res.errMessage+"</span>");
//    $("#translationResult").show();
//    wasErr = true;
 }  
    //if (curVMode == 'vert'){$("#SiteContent_sourceText").attr('class','expand101-2400');
    //jQuery("textarea[class*=expand]").TextAreaExpander();}       
 $("#blurResult").hide();    
}//end SetValsAfterTr
  
function GetErrMsg(lmsg){
 wasErr = true;$("#translationResult").html("<span class='error errMsg'>"+lmsg+"</span>");
 $("#translationResult").show();$("#autoInfo").hide();$("#blurResult").hide();$("#socialServices").hide(); $('#adviseIconDiv').hide();  
 if (blogPos != "right" ){$("#blogRSSRight").html($("#blogRSS").html());$("#blogRSS").html('');blogPos="right"; $("#moreBlog a img").width(20).height(20);$("#moreBlog a").css('margin-left','14px');$("#moreBlog a:first").before('<br>'); $("#moreBlog").css('float','left');$("#blogRSSRight").show(); }   
}

 
function detectIE6(){
// var browser = navigator.appName;
// if (browser == "Microsoft Internet Explorer"){
//   var b_version = navigator.appVersion;
//   var re = /\MSIE\s+(\d\.\d\b)/;var res = b_version.match(re);if (res[1] <= 6){return true;}
// }
// return false;
if ($.browser.msie){
    if($.browser.version.slice(0,1)<=6){return true;}
    else return false;
    }
}

var sve6=detectIE6();
    
function dynamicSelect(id1,id2){
 var tmp='';
 revDirNow=true;
 if(document.getElementById&&document.getElementsByTagName){
    var sel1=document.getElementById(tmp+id1);
    var sel2=document.getElementById(tmp+id2);
    var saveCurent=false;
    var clone=sel2.cloneNode(true);
    clonedOptions=clone.getElementsByTagName("option");

    refreshDynamicSelectOptions(sel1,sel2,clonedOptions,1);
    sel1.onchange=function(){
      clonedOptions=clone.getElementsByTagName("option");
      refreshDynamicSelectOptions(sel1,sel2,clonedOptions,0);
      //if ((sel1.options[sel1.selectedIndex].value=="i")&&(sel2.options[sel2.selectedIndex].value=="r")){revDir=false;document.getElementById('ch_bttn').src="/images/common/ch_ico_16_d.gif";$('#chBtt_a').hover(function(){rollover_img('ch_bttn','/images/common/ch_ico_16_d.gif');},function(){rollover_img('ch_bttn','/images/common/ch_ico_16_d.gif');});};
      if ((sel1.options[sel1.selectedIndex].value=="i")&&(sel2.options[sel2.selectedIndex].value=="e")){revDir=true;document.getElementById('ch_bttn').src="/images/common/ch_ico_16.gif";$('#chBtt_a').hover(function(){rollover_img('ch_bttn','/images/common/ch_ico_16_h.gif');},function(){rollover_img('ch_bttn','/images/common/ch_ico_16.gif');});};
      //setHash();
      if (sel1.options[sel1.selectedIndex].value=="ar"){$("#SiteContent_sourceText").css('direction','rtl');}
      else{$("#SiteContent_sourceText").css('direction','ltr');}
      if(Show_vkb){set_kbLang();changeVKL(kbLang);for(var i=0;i<document.getElementById("langKeyboard").options.length;i++){if(document.getElementById("langKeyboard").options[i].value==kbLang){document.getElementById("langKeyboard").selectedIndex=i;}}}};var pattern2=new RegExp("( |^)("+sel1.options[sel1.selectedIndex].value+")( |$)");}
      revDirNow=false;
      //setHash();
    }

    function RevertDir(id1,id2){
      var tmp='';
      var sel1=document.getElementById(id1);
      var sel2=document.getElementById(id2);
      var lang1=cur_sLang=sel1.options[sel1.selectedIndex].value;
      var lang2=cur_rLang=sel2.options[sel2.selectedIndex].value;
      revDirNow=true;
      if(!revDir){ return;}
      else{
	  for(var i=0;i<sel1.options.length;i++){if(sel1.options[i].value==lang2){sel1.selectedIndex=i;}
      }
    refreshDynamicSelectOptions(sel1,sel2,clonedOptions,0);
    
    if(sve6){setTimeout("for (var i = 0; i < document.getElementById('SiteContent_dirs_rLang').options.length; i++){ if (document.getElementById('SiteContent_dirs_rLang').options[i].value == cur_sLang) {document.getElementById('SiteContent_dirs_rLang').selectedIndex=i;}}",1);}
    else{
      for(var i=0;i<sel2.options.length;i++){if(sel2.options[i].value==lang1){sel2.selectedIndex=i;}
      }
    
    }
      

  }
  //setHash();
}//dynamicSelect

function dynamicSelect1(id1,id2){
 var tmp='';
 revDirNow=true;
 
 if(document.getElementById&&document.getElementsByTagName){
    var sel1=document.getElementById(tmp+id1);
    var sel2=document.getElementById(tmp+id2);
    var saveCurent=false;
    var clone=sel2.cloneNode(true);
    clonedOptions=clone.getElementsByTagName("option");

    refreshDynamicSelectOptions(sel1,sel2,clonedOptions,1);
    sel1.onchange=function(){
    //CheckLang();
    //alert("смена языка");
      _gaq.push(['_setCustomVar',1,'Template',$("#template").val(),3]);
      _gaq.push(['_setCustomVar',2,'SrcLang',langConvertor(sel2.options[sel2.selectedIndex].value),3]);
      _gaq.push(['_setCustomVar',3,'TgtLang',langConvertor(sel1.options[sel1.selectedIndex].value),3]);  
      _gaq.push(['_setCustomVar',4,'UserLang',langConvertor(reserveSrcLang)+"-"+langConvertor(reserveTrgLang),3]);
	  _gaq.push(['_trackEvent', 'Linguistic', 'Language', 'SrcChange']);
    
      clonedOptions=clone.getElementsByTagName("option");
      refreshDynamicSelectOptions(sel1,sel2,clonedOptions,0);
      //if ((sel1.options[sel1.selectedIndex].value=="i")&&(sel2.options[sel2.selectedIndex].value=="r")){revDir=false;document.getElementById('ch_bttn').src="/images/common/ch_ico_16_d.gif";$('#chBtt_a').hover(function(){rollover_img('ch_bttn','/images/common/ch_ico_16_d.gif');},function(){rollover_img('ch_bttn','/images/common/ch_ico_16_d.gif');});};
      if ((sel1.options[sel1.selectedIndex].value=="i")&&(sel2.options[sel2.selectedIndex].value=="e")){revDir=true;document.getElementById('ch_bttn').src="/images/common/ch_ico_16.gif";$('#chBtt_a').hover(function(){rollover_img('ch_bttn','/images/common/ch_ico_16_h.gif');},function(){rollover_img('ch_bttn','/images/common/ch_ico_16.gif');});};
      //if (location.hash=='') setHash();
      if (sel1.options[sel1.selectedIndex].value=="ar"){$("#SiteContent_sourceText").css('direction','rtl');}
      else{$("#SiteContent_sourceText").css('direction','ltr');}
      if(Show_vkb){set_kbLang();changeVKL(kbLang);for(var i=0;i<document.getElementById("langKeyboard").options.length;i++){if(document.getElementById("langKeyboard").options[i].value==kbLang){document.getElementById("langKeyboard").selectedIndex=i;}}}};var pattern2=new RegExp("( |^)("+sel1.options[sel1.selectedIndex].value+")( |$)");}
      revDirNow=false;
      //setHash();
    }

    function RevertDir(id1,id2){
      var tmp='';
      var sel1=document.getElementById(id1);
      var sel2=document.getElementById(id2);
      var lang1=cur_sLang=sel1.options[sel1.selectedIndex].value;
      var lang2=cur_rLang=sel2.options[sel2.selectedIndex].value;
      revDirNow=true;
      if(!revDir){return;}
      else{_gaq.push(['_setCustomVar',1,'Template',$("#template").val(),3]);
      _gaq.push(['_setCustomVar',2,'SrcLang',langConvertor(lang2),3]);
      _gaq.push(['_setCustomVar',3,'TgtLang',langConvertor(lang1),3]);  
      _gaq.push(['_setCustomVar',4,'UserLang',langConvertor(lang1)+"-"+langConvertor(lang2),3]);
	  _gaq.push(['_trackEvent', 'Linguistic', 'Language', 'Revert']);
      for(var i=0;i<sel1.options.length;i++){if(sel1.options[i].value==lang2){sel1.selectedIndex=i;}
    }

    refreshDynamicSelectOptions(sel1,sel2,clonedOptions,0);
    if(sve6){setTimeout("for (var i = 0; i < document.getElementById('SiteContent_dirs_rLang').options.length; i++){ if (document.getElementById('SiteContent_dirs_rLang').options[i].value == cur_sLang) {document.getElementById('SiteContent_dirs_rLang').selectedIndex=i;}}",1);}
    else{
      for(var i=0;i<sel2.options.length;i++){if(sel2.options[i].value==lang1){sel2.selectedIndex=i;}}}
    
    if (sel1.options[sel1.selectedIndex].value=="ar"){$("#SiteContent_sourceText").css('direction','rtl');$("#editResult_test").css('direction','ltr');$("#translationResult").css('direction','ltr');}
    else{$("#SiteContent_sourceText").css('direction','ltr');}
    if (sel2.options[sel2.selectedIndex].value=="ar"){$("#editResult_test").css('direction','rtl');$("#translationResult").css('direction','rtl');}
    else{$("#editResult_test").css('direction','ltr');$("#translationResult").css('direction','ltr');}
    
  }
  //setHash();
}//dynamicSelect




function refreshDynamicSelectOptions(sel1,sel2,clonedOptionsL,tmp){
 if(tmp!=1){document.getElementById('chLangs').value="true";}
 saveCurent=false;currentSelection=sel2.options[sel2.selectedIndex].value;while(sel2.options.length){sel2.remove(0);}
 var pattern2=new RegExp("( |^)("+sel1.options[sel1.selectedIndex].value+")( |$)");for(var i=0;i<clonedOptionsL.length;i++){if(clonedOptionsL[i].className.match(pattern2)){sel2.appendChild(clonedOptionsL[i].cloneNode(true));}}
 if(sve6){setTimeout("for (var i = 0; i < document.getElementById('SiteContent_dirs_rLang').options.length; i++){if (document.getElementById('SiteContent_dirs_rLang').options[i].value == currentSelection) {document.getElementById('SiteContent_dirs_rLang').selectedIndex=i;saveCurent=true;}} if (!saveCurent) {for (var i = 0; i < document.getElementById('SiteContent_dirs_rLang').options.length; i++) {if (document.getElementById('SiteContent_dirs_rLang').options[i].value == document.getElementById('sLang').options[document.getElementById('sLang').selectedIndex].className) {document.getElementById('SiteContent_dirs_rLang').selectedIndex=i; saveCurent=true; if (!revDirNow){document.getElementById('SiteContent_dirs_rLang').style.borderColor='#febf3d';setTimeout(\"document.getElementById('SiteContent_dirs_rLang').style.borderColor='#f7f3f7';\", 500)}}}} saveCurent = false;revDirNow=false;",1)}
 else{
  for(var i=0;i<sel2.options.length;i++){if(sel2.options[i].value==currentSelection){sel2.selectedIndex=i;saveCurent=true;}
 }
 if(!saveCurent){for(var i=0;i<sel2.options.length;i++){if(sel2.options[i].value==sel1.options[sel1.selectedIndex].className){sel2.selectedIndex=i;saveCurent=true;if(!revDirNow){document.getElementById("SiteContent_dirs_rLang").style.borderColor='#febf3d';setTimeout("document.getElementById('SiteContent_dirs_rLang').style.borderColor='#f7f3f7';",500)}}}}
 saveCurent=false;revDirNow=false;}
 if((sel1.options[sel1.selectedIndex].value=="a")){revDir=false;document.getElementById('ch_bttn').src="/images/common/ch_ico_16_d.gif";$('#chBtt_a').hover(function(){rollover_img('ch_bttn','/images/common/ch_ico_16_d.gif');},function(){rollover_img('ch_bttn','/images/common/ch_ico_16_d.gif');});}
 else{
  revDir=true;document.getElementById('ch_bttn').src="/images/common/ch_ico_16.gif";
  $('#chBtt_a').hover(function(){rollover_img('ch_bttn','/images/common/ch_ico_16_h.gif');},function(){rollover_img('ch_bttn','/images/common/ch_ico_16.gif');});
 }
  if ('webkitSpeechRecognition' in window){CheckLang();}
}//refreshDynSelOpts

function ChangedLang(){
var langC = GetDir();
 if (setLang){
  _gaq.push(['_setCustomVar',1,'Template',$("#template").val(),3]);
//  _gaq.push(['_setCustomVar',2,'SrcLang',langConvertor(GetDir()[0]),3]);
//  _gaq.push(['_setCustomVar',3,'TgtLang',langConvertor(GetDir()[1]),3]);  
//  _gaq.push(['_setCustomVar',4,'UserLang',langConvertor(reserveSrcLang)+"-"+langConvertor(reserveTrgLang),3]);
   _gaq.push(['_setCustomVar',2,'SrcLang',langC[0],3]);
   _gaq.push(['_setCustomVar',3,'TgtLang',langC[1],3]);  
   _gaq.push(['_setCustomVar',4,'UserLang',langConvertor(reserveSrcLang)+"-"+langConvertor(reserveTrgLang),3]);
  _gaq.push(['_trackEvent', 'Linguistic', 'Language', 'TgtChange']);
 }
 setLang = true;
 document.getElementById('chLangs').value="true";
 var selct1=document.getElementById("SiteContent_dirs_sLang");
 var selct2=document.getElementById("SiteContent_dirs_rLang");
 if (selct2.options[selct2.selectedIndex].value=="ar"){$("#editResult_test").css('direction','rtl');$("#translationResult").css('direction','rtl');}
 else{$("#editResult_test").css('direction','ltr');$("#translationResult").css('direction','ltr');}
 if (selct1.options[selct1.selectedIndex].value=="ar"){$("#SiteContent_sourceText").css('direction','rtl');}
 else{$("#SiteContent_sourceText").css('direction','ltr');}
 //if((selct2.options[selct2.selectedIndex].value=="r")&&(selct1.options[selct1.selectedIndex].value=="i")){revDir=false; document.getElementById('ch_bttn').src="/images/common/ch_ico_16_d.gif";
 //$('#chBtt_a').hover(function(){rollover_img('ch_bttn','/images/common/ch_ico_16_d.gif');},function(){rollover_img('ch_bttn','/images/common/ch_ico_16_d.gif');}); };
 if ((selct1.options[selct1.selectedIndex].value=="i")&&(selct2.options[selct2.selectedIndex].value=="e")){
 revDir=true;document.getElementById('ch_bttn').src="/images/common/ch_ico_16.gif";
 $('#chBtt_a').hover(function(){rollover_img('ch_bttn','/images/common/ch_ico_16_h.gif');},function(){rollover_img('ch_bttn','/images/common/ch_ico_16.gif');});};
}//ChngLang

function rollover_img(oname,imgsrc){document.getElementById(oname).src=imgsrc;return true};

function checkForEnter (event) {
 if (event.keyCode == 13) {
   if (rtrim($("#SiteContent_sourceText").val())!="") {GetTranslationCBK(1);}
   else $("#SiteContent_sourceText").val('');
 } 
}
 
function textLimit(){hideToolTip();
 if(document.getElementById('SiteContent_sourceText').value.length>maxlen)
    {document.getElementById('SiteContent_sourceText').value=document.getElementById('SiteContent_sourceText').value.substring(0,maxlen);
    alert(msg)
 }
}

//edit bttns

function Paste1(){
var obj2 = document.getElementById('SiteContent_sourceText');
if(obj2.createTextRange&&document.all){ 
obj2.createTextRange().execCommand("Paste");
if($('#SiteContent_sourceText').val.length>maxlen)
{$('#SiteContent_sourceText').val=$('#SiteContent_sourceText').val.substring(0,maxlen);alert(msg)}
obj2.focus()}
else{alert(msgPaste)}}


function Copy1(){
var obj1 = document.getElementById('SiteContent_sourceText');
if(obj1.createTextRange&&document.all){ 
obj1.createTextRange().execCommand("Copy");
obj1.focus()}
else{alert(msgCopy)}
}

function Delete1(){
$('#SiteContent_sourceText').val('');
$('#SiteContent_sourceText').focus();
}
function Copy2(){
var obj1 = document.getElementById('SiteContent_sourceText');
if(obj1.createTextRange&&document.all){ 
document.getElementById("translationResult").createTextRange().execCommand("Copy");
}
else{alert(msgCopy)}
}

function Delete2(){
$('#translationResult').html('');
$('#editResult_test').val('');
$('#socialServices').hide();
$('#autoInfo').hide();
$('#adviseIconDiv').hide();
    $("#spellBttms_test").hide();
    $("#editResultWin_test").css('background','transparent').css('border','1px solid transparent').css({'box-shadow':'0px 0px 0px #bbb','-moz-box-shadow':'0px 0px 0px #bbb','-webkit-box-shadow':'0px 0px 0px #bbb'});
    $('#editResult_test').css('min-height','').css('color','#525252');
$('#SiteContent_sourceText').focus();
}

function getSpellVariants(arrVars){
//alert('количество вариантов = '+ arrVars.length);
if (arrVars.length==0){ varsDiv = '<div class="suggs">Вариантов замены не найдено </div>';}
else{
    var varsDiv ='<div class="suggs">Варианты замены';
    for (var j=0; j<arrVars.length; j++){varsDiv += '<div class="suggWord">'+arrVars[j]+'</div>'}
    varsDiv = varsDiv + '</div>'
    }
return varsDiv;

}

function resultEdit(){
if (!startEdit){
startEdit=true;
var dir=GetDir();
var text=rtrim($("#editResult_test").val());
gaCustomVarsSet(dir);
_gaq.push(['_trackEvent', 'Services', 'EditStart',text,text.length ]);}
}

function Spelling(){

    var dir=GetDir();
    var text=rtrim($("#SiteContent_sourceText").val());
    text = encodeURIComponent(text).split("'").join("\\'");
    
    //если нет текста 
    if (text=="") {$("#SiteContent_sourceText").val('');$("#blurResult").hide();$("#ttSourceText").slideDown(300);$("#btt").slideDown(300);$('#ttSourceText').css('color','#FC575E'); setTimeout("$('#ttSourceText').css('color','#45697E');$('#SiteContent_sourceText').focus(); ",2000);return;}   
   
 
    // если автоопределение языка
    if (dir[0]=='au'){alert('Выберите язык входного текста');$("#SiteContent_dirs_sLang").focus();return;}
    
    
    gaCustomVarsSet(dir);
    _gaq.push(['_trackEvent', 'Services', 'Spelling', '']);
    
    $("#spellInfo").dialog('open');
    
    $.ajax({
    type: "POST",
    contentType: "application/json; charset=utf-8",
    url: "/services/UtilsService.asmx/SpellCheck",
    data: "{ dirCode:'"+dir+"', text:'"+text+"'}", 
    dataType: "json",
    success: function(resulr){ 
        var res=GetAjaxResult(resulr);      
        if (res.errCode!=0) {alert('Произошла ошибка. Сервис временно недоступен');$("#spellInfo").dialog('close');}
        else{
            if (res.eCode == 0){
                    $("#spellLoadDiv").hide();
                    $("#okSpellDescr").show();
                    $("#spellEditor").html(rtrim($("#SiteContent_sourceText").val()));
            }
            else{ 
                //alert("В тетксте найдено "+res.eDesc.length+" ошибок");
                // разбор ошибок
                var txtSplit= new Array;
                var spellBlock = '';
                var errArr = res.eDesc;
                var strSplit = rtrim($("#SiteContent_sourceText").val());
                if (res.eDesc[0].ePos == 0) {txtSplit[0] =''; }
                else{ txtSplit[0] = strSplit.substring(0,res.eDesc[0].ePos);}
                for(var i=0; i<errArr.length;i++) {
                    if (i!=errArr.length-1){
                        txtSplit[i+1] = strSplit.substring(res.eDesc[i].ePos,res.eDesc[i+1].ePos);
                        }
                    else{
                        txtSplit[i+1] = strSplit.substring(res.eDesc[i].ePos);  
                        }
                   
                    txtSplit[i+1] = '<span id="ew'+(i+1)+'" class="errWordSpan">'+ getSpellVariants(res.eDesc[i].eSugg)+'<span class="errWord" >'+txtSplit[i+1].substring(0,res.eDesc[i].eLen)+'</span>'+'</span>'+txtSplit[i+1].substring(res.eDesc[i].eLen);
                    
                    
                    spellBlock+=txtSplit[i+1];
                } 
                spellBlock=txtSplit[0]+ spellBlock;
                $("#spellLoadDiv").hide();
                $("#errSpellDescr").show();
                $("#spellEditor").html(spellBlock);
               // $("#spellEditor").show();
                //$("#spellBttms").show();
                $(".suggWord").click(function(event){
                                    
                                    //$(this).parents().parents().text($(this).text());$(this).parents().parents().attr('class','replaceWord');
                                    $(this).parent().parent().attr('class','replWord');
                                    $(this).parent().next().text($(this).text());
                                    //$(this).parent().hide();
                                    });
                //alert('!'+spellBlock+'!');
                             
            }
        } 
       //$("#spellInfo").dialog('open');
    },
    error: function (XMLHttpRequest, textStatus, errorThrown) { 
      GetErrMsg("К сожалению, сервис временно недоступен. Попробуйте повторить запрос позже."); trDirCode = "";
    }      
 });

}

function showRefers(){
captureRefers();
    var dictDirCode = (trDirCode == '') ? GetDir():trDirCode.split('-');
    if(rtrim(referStr)==""){alert('Выделите слово или словосочетание в окне с исходным текстом.')}
    else{
        if (blogPos != "right" ){alert('Эта опция будет доступна только после перевода.')}
        else{
            
            //if (dictDirCode.charAt(0)=='a'){alert('Выберите язык входного текста.')}
            if (dictDirCode[0]=='au'){alert('Выберите язык входного текста.')}
            else{
                //if (((dictDirCode.charAt(0)=='p')&&(dictDirCode.charAt(1)=='r'))||((dictDirCode.charAt(0)=='r')&&(dictDirCode.charAt(1)=='p'))||((dictDirCode.charAt(0)=='r')&&(dictDirCode.charAt(1)=='i'))||((dictDirCode.charAt(0)=='g')&&(dictDirCode.charAt(1)=='i'))||((dictDirCode.charAt(0)=='g')&&(dictDirCode.charAt(1)=='p'))||((dictDirCode.charAt(0)=='i')&&(dictDirCode.charAt(1)=='g'))||((dictDirCode.charAt(0)=='p')&&(dictDirCode.charAt(1)=='g'))||((dictDirCode.charAt(0)=='j')&&(dictDirCode.charAt(1)=='r'))||((dictDirCode.charAt(0)=='j')&&(dictDirCode.charAt(1)=='e'))||((dictDirCode.charAt(0)=='e')&&(dictDirCode.charAt(1)=='j'))||((dictDirCode.charAt(0)=='r')&&(dictDirCode.charAt(1)=='j'))||((dictDirCode.charAt(0)=='o')&&(dictDirCode.charAt(1)=='r'))||((dictDirCode.charAt(0)=='r')&&(dictDirCode.charAt(1)=='o'))){alert('Эта опция недоступна для данного направления перевода.')}
                
                if (((dictDirCode[0]=='pt')&&(dictDirCode[1]=='ru'))||((dictDirCode[0]=='ru')&&(dictDirCode[1]=='pt'))||((dictDirCode[0]=='ru')&&(dictDirCode[1]=='it'))||((dictDirCode[0]=='de')&&(dictDirCode[1]=='it'))||((dictDirCode[0]=='de')&&(dictDirCode[1]=='pt'))||((dictDirCode[0]=='it')&&(dictDirCode[1]=='de'))||((dictDirCode[0]=='pt')&&(dictDirCode[1]=='de'))||((dictDirCode[0]=='ja')&&(dictDirCode[1]=='ru'))||((dictDirCode[0]=='ja')&&(dictDirCode[1]=='en'))||((dictDirCode[0]=='en')&&(dictDirCode[1]=='ja'))||((dictDirCode[0]=='ru')&&(dictDirCode[1]=='ja'))||((dictDirCode[0]=='fi')&&(dictDirCode[1]=='ru'))||((dictDirCode[0]=='ru')&&(dictDirCode[1]=='fi'))||((dictDirCode[0]=='ar')&&(dictDirCode[1]=='ru'))||((dictDirCode[0]=='ru')&&(dictDirCode[1]=='ar'))||((dictDirCode[0]=='ar')&&(dictDirCode[1]=='en'))||((dictDirCode[0]=='en')&&(dictDirCode[1]=='ar'))||((dictDirCode[0]=='el')&&(dictDirCode[1]=='ru'))||((dictDirCode[0]=='ru')&&(dictDirCode[1]=='el'))||((dictDirCode[0]=='el')&&(dictDirCode[1]=='en'))||((dictDirCode[0]=='en')&&(dictDirCode[1]=='el'))||((dictDirCode[0]=='ca')&&(dictDirCode[1]=='ru'))||((dictDirCode[0]=='ru')&&(dictDirCode[1]=='ca'))||((dictDirCode[0]=='ca')&&(dictDirCode[1]=='en'))||((dictDirCode[0]=='en')&&(dictDirCode[1]=='ca'))||((dictDirCode[0]=='tr')&&(dictDirCode[1]=='ru'))||((dictDirCode[0]=='ru')&&(dictDirCode[1]=='tr'))||((dictDirCode[0]=='tr')&&(dictDirCode[1]=='en'))||((dictDirCode[0]=='en')&&(dictDirCode[1]=='tr')) ){alert('Эта опция недоступна для данного направления перевода.')}
                else{
                   var dictDirCodeJoin=dictDirCode[0]+"-"+dictDirCode[1];
                   if((dictDirCodeJoin=='en-ru')||(dictDirCodeJoin=='ru-en') || (dictDirCodeJoin=='de-ru')||(dictDirCodeJoin=='ru-de')|| (dictDirCodeJoin=='fr-ru')||(dictDirCode=='ru-fr')){GetFullWordCBK_old('1', 'dictWordER');referStr="";}
                   else {GetFullWordCBK('1', 'dictWord');referStr="";}
               
                   if(document.selection&&document.selection.createRange){document.selection.empty();}
                   else{
                        $("#SiteContent_sourceText").val($("#SiteContent_sourceText").val() +' ');
                        $("#SiteContent_sourceText").val($("#SiteContent_sourceText").val().slice(0, -1));
                        //if(typeof(document.aspnetForm.ctl00$SiteContent$sourceText.selectionStart)=="number"){document.aspnetForm.ctl00$SiteContent$sourceText.selectionStart=document.aspnetForm.ctl00$SiteContent$sourceText.selectionEnd}
                        if(typeof(document.getElementById('SiteContent_sourceText').selectionStart)=="number"){document.getElementById('SiteContent_sourceText').selectionStart=document.getElementById('SiteContent_sourceText').selectionEnd}
                       }
               }    
            }
        }
    }
 
}

function captureRefers(){
	var str="";
	var obj=document.getElementById('SiteContent_sourceText');
	if(document.selection&&document.selection.createRange){var range=document.selection.createRange();str=range.text}
	else if(typeof(obj.selectionStart)=="number"){
		if(obj.selectionStart!=obj.selectionEnd){
			var start=obj.selectionStart;
			var end=obj.selectionEnd;
			var rs=obj.value.substr(start,end-start);str=rs
		}
	}
	referStr=str;
}

function checkResSelection(){
	var rs="";
	var obj=document.getElementById('editResult_test');
	if(document.selection&&document.selection.createRange){var range=document.selection.createRange();return true}
	else if(typeof(obj.selectionStart)=="number"){
		if(obj.selectionStart!=obj.selectionEnd){
			return true;
		}
	}
	return false;
}

//function execShowRefers(){
//GetFullWordCBK('1', 'dictWordER');
//    }


//edit bttns end

// vk scripts
var loadVK=false;
function callVK(){
var dir=GetDir();
    gaCustomVarsSet(dir);
    _gaq.push(['_trackEvent', 'Services', 'VKeyboard', '']);
    $("#vkb_f2").dialog('open');
    if(!loadVK){callAjaxVK();}
    else{vkb_Show();}
}
function callAjaxVK()
{
    $("#loadingVK").ajaxStart(function(){$(this).show();});
    $("#loadingVK").ajaxStop(function(){$(this).hide();});
    $("#LoadVKText").ajaxStart(function(){$(this).hide();});
    $("#LoadVKText").ajaxStop(function(){$(this).hide();});
    $.ajax({
        type:"POST",
        contentType:"application/json; charset=utf-8",
        url:"/Components/virtKB.aspx",
        data:"{prmtlang:'ru'}",
        dataType:"html",
        success:function(result){
            var res=GetAjaxResult(result);     
            $('#vkb_f2').append(res);
            vkb_Show();
            loadVK=true;},
        error:function(XMLHttpRequest,textStatus,errorThrown){
            alert(textStatus+"   "+errorThrown);}
        });
}

function vkb_Show(){
    //document.aspnetForm.ctl00$SiteContent$sourceText.focus();
    document.getElementById('SiteContent_sourceText').focus();
    if(!Show_vkb)
    {set_kbLang();setVKL(kbLang);show_keyboard(kbLang);Show_vkb=true;return}
    if(Show_vkb)
    {hide_keyboards();Show_vkb=false;return}
}

function set_kbLang(){

kbLang=$('#SiteContent_dirs_sLang').val();
    //switch(document.aspnetForm.ctl00$SiteContent$sLang.value){
//    switch(document.getElementById("SiteContent_dirs_sLang").options[document.getElementById("SiteContent_dirs_sLang").selectedIndex].value){
//        case"r":kbLang="ru";
//                if(Show_vkb)show_keyboard('ru');
//                break;
//        case"g":kbLang="de";
//                if(Show_vkb)show_keyboard('de');
//                break;
//        case"f":kbLang="fr";
//                if(Show_vkb)show_keyboard('fr');
//                break;
//        case"s":kbLang="es";
//                if(Show_vkb)show_keyboard('es');
//                break;
//        case"i":kbLang="it";
//                if(Show_vkb)show_keyboard('it');
//                break;
//        case"p":kbLang="pt";
//                if(Show_vkb)show_keyboard('pt');
//                break;
//        case"o":kbLang="fi";
//                if(Show_vkb)show_keyboard('fi');
//                break;
//        default:kbLang="en";
//                if(Show_vkb)show_keyboard('en')
//       }
    if ((kbLang=='au')||(kbLang=='ja')||(kbLang=='ar')){ kbLang='en';}
    if (kbLang=='ca') {kbLang='es';}
    show_keyboard(kbLang);
}

function langConvertor(lng){
var isoLang='';
    switch(lng){
        case"r":
        case"ru":isoLang="ru";
                break;
        case"g":
        case"de":isoLang="de";
                break;
        case"f":
        case"fr":isoLang="fr";
                break;
        case"s":
        case"es":isoLang="es";
                break;
        case"i":
        case"it":isoLang="it";
                break;
        case"p":
        case"pt":isoLang="pt";
                break;
        case"a":
        case"au":
        case"auto":isoLang="auto";
                break;
        case"j":
        case"ja":
        case"jp":isoLang="ja";
                break;
        case"o":
        case"fi":isoLang="fi";
                break;
                case "ar": isoLang = "ar";
            break;
        case "el": isoLang = "el";
            break;
        case "ca": isoLang = "ca";
            break;
        case "tr": isoLang = "tr";
            break;
        case "kk": isoLang = "kk";
            break;
        default: isoLang = "en";

       }
return isoLang
}

function show_keyboard(lang){
    Show_vkb=true;
    $("#lang_"+lang).show();
    if (!document.getElementById("vkb_f1")){callAjaxVK();};
    CapsLockD=false;
}

function hide_keyboards(){
    Show_vkb=false;
    $("#vkb_f2").dialog('close');
    hideAllKBs();
}

// vk scripts end


function showEditTranslationWin_(){
    var txtForEditor = "";
    var sourceTxt = $("#translationResult").html();
    if (sourceTxt!=''){
        
        txtForEditor = sourceTxt.replace(/<br>/g, "\n");
        
        $("#editResult").val(txtForEditor);
        $("#editResultWin").width($("#resultBlock").width()-20);
        $("#keepClickEditor").show();
        
        $("#keepClickEditor").height(document.body.offsetHeight);
       
        
        $("#editResult").attr('class','expand101-2400');
        jQuery("textarea[class*=expand]").TextAreaExpander();
        
        
        $("#editResultWin").show();
        $("#editResult").focus();
        
        
    }

}

function  setEqualHeights(){ 
    if ($("#editResult_test").css('min-height')!=''){$("#editResult_test").css('min-height','');jQuery("#editResult_test").TextAreaExpander();}
    if ($("#SiteContent_sourceText").css('min-height')!=''){$("#SiteContent_sourceText").css('min-height','');jQuery("#SiteContent_sourceText").TextAreaExpander();}
    //alert ('source: '+$("#SiteContent_sourceText").height()+'          result: '+$("#editResult_test").height());
//    $("#SiteContent_sourceText").css('min-height','');
//   $("#editResult_test").css('min-height',''); 
//   $("#editResult_test").css('height','');
//    $("#SiteContent_sourceText").css('height','');
//    jQuery("#SiteContent_sourceText").TextAreaExpander();
//    jQuery("#editResult_test").TextAreaExpander();
    if (curVMode == 'vert'){
//    alert("#editResult_test: "+$("#editResult_test").height()+";  #SiteContent_sourceText: "+$("#SiteContent_sourceText").height());
       //var maxSWH = (maxSourceWin>$("#editResult_test").height()) ? maxSourceWin : $("#SiteContent_sourceText").height();
       var maxH = ($("#editResult_test").height()>$("#SiteContent_sourceText").height())?$("#editResult_test").height() : $("#SiteContent_sourceText").height();
//       alert($("#editResult_test").height());
//       alert($("#SiteContent_sourceText").height());
//       alert(maxH);
       $("#editResult_test").css('min-height',maxH+'px');
       $("#SiteContent_sourceText").css('min-height',maxH+'px');
       }
}

function sendGAEditEvents(mode){
var dir=GetDir();
var text=rtrim($("#editResult_test").val());
gaCustomVarsSet(dir);
if (mode=="ok"){
        _gaq.push(['_trackEvent', 'Services', 'EditSave',text,text.length ]);

}
if (mode=="cancel"){
         _gaq.push(['_trackEvent', 'Services', 'EditCancel',text,text.length ]);

}
//$("#editResult").unbind("change");
$("#editResult_test" ).unbind("change");
startEdit=false;

}

function SaveEdits()
{
var userResult =$('#editResult_test').val();
 var template = $("#template").val();
 var source4Save=rtrim($("#SiteContent_sourceText").val());
 if (userResult==source4Save) {return;}
 
 $.ajax({
    type: "POST",
    contentType: "application/json; charset=utf-8",
    url: "/services/UtilsService.asmx/SaveTranslationEdits",
    data: "{ dirCode:'"+GetDir()+"', ptsDirCode:'"+trDirCode+"', template:'"+template+"', source:'"+source4Save+"', ptsResult:'"+ptsResult+"', userResult:'"+userResult+"', trId:'"+trUID+"', lang:'ru', sessId:'rjlz2rsg3ugc5baibtgs1t2k', key:'"+trKey+"'}", 
    dataType: "json",
    success: function(res){
    },
    error: function (XMLHttpRequest, textStatus, errorThrown) {       
    }     
 });
}

function hideEditTranslationWin(status){
txtForEditor = "";
    if (status=='1'){
        SaveEdits();
        $('#translationResult').html($('#editResult_test').val().replace(/\n/g,'<br>'));
        //$('#editResult_test').css('height','');
        $("#editResult_test").css('min-height','');
        jQuery("textarea[class*=expand]").TextAreaExpander();
        $("#SiteContent_sourceText").css('min-height','');
        jQuery("textarea[class*=expand]").TextAreaExpander();
    }
    else {
            
            $('#editResult_test').val($('#translationResult').html().replace(/<br>/g, '\n').replace(/<BR>/g, '\n').replace(/&nbsp;/g, " ").replace(/&amp;/g, "&"));
            
        }
    
    //$('#keepClickEditor').hide();
    $("#spellBttms_test").hide();
    $("#editResultWin_test").css('background','transparent').css('border','1px solid transparent').css({'box-shadow':'0px 0px 0px #bbb','-moz-box-shadow':'0px 0px 0px #bbb','-webkit-box-shadow':'0px 0px 0px #bbb'});
   
    //$('#editResult_test').height($('#translationResult').height());
    $('#editResult_test').css('min-height','').css('color','#525252');
//    if (curVMode == 'vert'){
//        if ($('#editResult_test').height()>$('#SiteContent_sourceText').height()+2){$('#SiteContent_sourceText').css('min-height',$('#editResult_test').height()+'px')}
//        else{$('#editResult_test').height($('#SiteContent_sourceText').height()+2);$('#SiteContent_sourceText').css('min-height','');}
//    }
    setEqualHeights();
    maxSourceWin=$("#SiteContent_sourceText").height();
}


function showEditTranslationWin(mode){

    var sourceTxt = $("#translationResult").html();
    //alert("2: "+ sourceTxt);
    if (sourceTxt!=''){
    
        if(txtForEditor==""){
            txtForEditor = sourceTxt.replace(/<br>/g, "\n");
            txtForEditor = txtForEditor.replace(/<BR>/g, "\n");
            txtForEditor = txtForEditor.replace(/&nbsp;/g, " ");
            txtForEditor = txtForEditor.replace(/&amp;/g, "&");
            //alert("3: "+ sourceTxt);
            $("#editResult_test").val(txtForEditor);
            //alert("4: "+ $("#editResult_test").val());
            }
        //$('#editResult_test').removeAttr('readonly');
        //$("#editResultWin_test").width($("#resultBlock").width()-10);
        //$("#keepClickEditor").show();
        //$("#keepClickEditor").height(document.body.offsetHeight);
        
        $("#editResult_test").attr('class','expand101-2400');
        jQuery("textarea[class*=expand]").TextAreaExpander();
        //$("#editResult_test").width($("#result").width()-2);
        
        $("#editResultWin_test").css('background','transparent').css('border','1px solid transparent').css({'box-shadow':'0px 0px 0px #bbb','-moz-box-shadow':'0px 0px 0px #bbb','-webkit-box-shadow':'0px 0px 0px #bbb'});

        $("#editResultWin_test").show();

        if (mode=='1'){
          $("#editResult_test").css('background','white').css('color','green');
          $("#editResult_test").css('min-height',$("#SiteContent_sourceText").height()+'px');
           //       $("#editResult" ).change(function(){resultEdit();});
          $("#editResult_test" ).bind("change", function() {resultEdit();});
          $("#spellBttms_test").show();
          
          $("#editResultWin_test").css('background','white').css('border','1px solid #6f8ea9').css({'box-shadow':'5px 5px 4px #bbb','-moz-box-shadow':'5px 5px 4px #bbb','-webkit-box-shadow':'5px 5px 4px #bbb'});
          $("#spellBttms_test").focus();
        
        }
    }

}

function showPrintWin(){
//alert("Печать перевода");
//var NS = (navigator.appName == "Netscape");
//var VERSION = parseInt(navigator.appVersion);
//if (NS) {
    _gaq.push(['_trackEvent', 'Services', 'Print', '']);
    window.print() ;  
//} else {
//    var WebBrowser = '<OBJECT ID="WebBrowser1" WIDTH=0 HEIGHT=0 CLASSID="CLSID:8856F961-340A-11D0-A96B-00C04FD705A2"></OBJECT>';
//document.body.insertAdjacentHTML('beforeEnd', WebBrowser);
//    WebBrowser1.ExecWB(6, 2);
	//Use a 1 vs. a 2 for a prompting dialog box 
	//WebBrowser1.outerHTML = "";  
//}
}
function savePrevDirection(){
reserveSrcLang=GetDir[0];
reserveTrgLang=GetDir[1];
}

var visSForm = 740; 

$(document).ready(function(){
 
 function getBodyScrollTop(){return self.pageYOffset || (document.documentElement && document.documentElement.scrollTop) || (document.body && document.body.scrollTop);}
 //function getClientHeight(){return document.compatMode=='CSS1Compat' && !window.opera?document.documentElement.clientHeight:document.body.clientHeight;}
 function getClientHeight(){return document.compatMode=='CSS1Compat'?document.documentElement.clientHeight:document.body.clientHeight;}

//if (getCookie('LoggedUserParams')){
//var LoggedUser=getCookie('LoggedUserParams');
//if (LoggedUser.substring(9,13)=='true') maxlen=10000
//else maxlen=3000;
//console.log(maxlen);
//}


 if (!getCookie('subscibeFormOpen')) visSForm = 870;
 $(document).scroll(function () { if ((getBodyScrollTop()+ getClientHeight())>visSForm){$("#subscribeForm").fadeIn('slow');} 
                                else {$("#subscribeForm").fadeOut('slow')}
                               });
 $(window).scroll(function () { if ((getBodyScrollTop()+ getClientHeight())>visSForm){$("#subscribeForm").fadeIn('slow');} 
                                else {$("#subscribeForm").fadeOut('slow')}
                               });
 $(document).scrollTop(1); 
  
//$("#hat").click(function(event){$("#hat").width(160); setTimeout("$('#hat').width(60);", 500); });

                                
 $("#SiteContent_sourceText").keydown(checkForEnter);
    
 if (document.getElementById("SiteContent_dirs_sLang")){dynamicSelect1("SiteContent_dirs_sLang", "SiteContent_dirs_rLang");
 ChangedLang();}
 $("#keepClick").click(function(event){closeAllTopPopups();});
 $("#SiteContent_dirs_sLang").click(function(){savePrevDirection();});
 $("#SiteContent_dirs_rLang").click(function(){savePrevDirection();});
// $("#keepClickEditor").click(function(event){$('#editResultWin_test').hide();$('#keepClickEditor').hide();$("#editResult_test").css('background','transparent').css('color','transparent');});
//  $("#keepClickEditor").click(function(event){hideEditTranslationWin(1);});

 
 
 $("#keepClickVM").click(function(event){hideViewModes();});
 $("#keepClick").click(function(event){closeAllTopPopups();});
 $("#keepClickSS").click(function(event){closeTranslationLinks();closewAddTranslation();});
 $("#viewModeStatus").click(function(event){showViewModes();});
 $("#keepClickTemplate").click(function(event){$(".templatesBlock").hide();$("#keepClickTemplate").hide();$("#keepClickTemplateTop").hide();curOpenTemplate = '';$(".templateHeader").removeClass('tempSelectTemplate');});
 $("#keepClickTemplateTop").click(function(event){$(".templatesBlock").hide();$("#keepClickTemplate").hide();$("#keepClickTemplateTop").hide();curOpenTemplate = '';$(".templateHeader").removeClass('tempSelectTemplate');});
// $("#translationResult").click(function(event){showEditTranslationWin();});



 //	
 $(".viewModeEl").click(function(event){
    $(".viewModeEl").removeClass('curSelectTempl');
    $(this).addClass('curSelectTempl');
    vMode=$(this).find('.viewModeName').attr('id');
    vMode = vMode.substr(0,vMode.length-2)
    setViewMode(vMode);
    setCookie('vMode',vMode);
    
 });
 $(window).resize(function() {
                if (vMode=="auto"){autoVMode();}
                
                    if (getBodyScrollTop()+ getClientHeight()>visSForm){$("#subscribeForm").fadeIn('slow')} 
                    else {$("#subscribeForm").fadeOut('slow')}
               
                //setEqualHeights();
            });   
 setViewMode(vMode);
 $("#megaFullInfo").dialog({title:'Словоизменение <sup>beta</sup>',width:680, height:500, resizable:false,draggable:false,autoOpen:false,modal: true,zIndex: 110000,close:function(){fullWordInfo=0;$(".trsl").hide();$("#mfi_grammInfo").html("");}});
 
 $("#spellInfo").dialog({title:'Проверка орфографии <sup>beta</sup>',width:680, height:520, resizable:false,draggable:false,autoOpen:false,modal: true,zIndex: 110000,close:function(){  $("#okSpellDescr").hide();$("#errSpellDescr").hide(); $("#spellEditor").html('');$("#spellLoadDiv").show();}});
 $("#vkb_f2").dialog({title:'Виртуальная клавиатура',width:485,resizable:false,draggable:true,close:function(){hideAllKBs();Show_vkb=false;$('#Vkeyboard').append($("#vkb_f1"));},autoOpen:false,position:[400,300]});
 

if (document.getElementById("SiteContent_dirs_sLang"))
{
    if ("1"=="1") {GETDTO();}
    if (location.pathname.toLowerCase().indexOf("widget")<0) 
    {getParams(); }
}
if (location.pathname.toLowerCase().indexOf("/links/")>=0){saveTranslation=true; savedUID = location.pathname.replace("/links/", "");}


});  //ready()

function autoVMode(){
 if($(window).width()>1100){
    $("#sourceBlock").removeClass().addClass('vert');
    $("#resultBlock").removeClass().addClass('vert');
    $("#SiteContent_sourceText").attr('class','expand101-2400');
    jQuery("textarea[class*=expand]").TextAreaExpander();
    curVMode = 'vert';
    
 }
 else{
    $("#sourceBlock").removeClass().addClass('horiz');
    $("#resultBlock").removeClass().addClass('horiz');
    curVMode = 'horiz';
    $("#SiteContent_sourceText").attr('class','expand101-340');
    jQuery("textarea[class*=expand]").TextAreaExpander();
 }
}

function setViewMode(mode){
 //mode=mode.substr(0,mode.length-2);
 if(vMode!='auto'){
    $("#sourceBlock").removeClass().addClass(mode);
    $("#resultBlock").removeClass().addClass(mode);
    curVMode = mode;
    if (mode=='horiz'){$("#SiteContent_sourceText").attr('class','expand101-340');jQuery("textarea[class*=expand]").TextAreaExpander();}
    if ((mode=='vert')&&($("#translationResult").html()!='')) {
        $("#SiteContent_sourceText").attr('class','expand101-2400');
        jQuery("textarea[class*=expand]").TextAreaExpander();
//        if ($("#translationResult").height()>$("#SiteContent_sourceText").height()){$("#SiteContent_sourceText").css('min-height',$("#translationResult").height()+'px')}
//        else {$("#translationResult").css('min-height',$("#SiteContent_sourceText").height()+'px'); $("#editResult_test").css('min-height',$("#SiteContent_sourceText").height()+2+'px');}
setEqualHeights();
    }
 }
 else{ autoVMode();}
 $("#viewModeStatus img").attr('src','/images/common/vm_'+mode+'_ico.png').attr('alt', $("#"+mode+"Bl").text()).attr('title', $("#"+mode+"Bl").text());
 $("#vmDes").html($("#"+mode+"Bl").text());
}

function showViewModes(){
 $(".viewModeList").show();
 $("#vmDes").css('display','inline');
 $("#keepClickVM").show();
 $(".viewModeList").click(function(event){hideViewModes();});
 $("#viewModeBlock").addClass("showModes");
}

function hideViewModes(){
 $(".viewModeList").hide();
 $("#keepClickVM").hide();
 $("#viewModeBlock").removeClass();
 $("#vmDes").css('display','');
}


//textarea resize
(function($) {
$.fn.TextAreaExpander = function(minHeight, maxHeight) {
var hCheck = !($.browser.msie || $.browser.opera);
function ResizeTextarea(e) {
e = e.target || e;
var vlen = e.value.length, ewidth = e.offsetWidth;
if (vlen != e.valLength || ewidth != e.boxWidth) {
if (hCheck && (vlen < e.valLength || ewidth != e.boxWidth)) e.style.height = "0px";
var h = Math.max(e.expandMin, Math.min(e.scrollHeight, e.expandMax));
e.style.overflow = (e.scrollHeight > h ? "auto" : "hidden");
e.style.height = h + "px";
e.valLength = vlen;
e.boxWidth = ewidth;
}
return true;
};
this.each(function() {
if (this.nodeName.toLowerCase() != "textarea") return;
var p = this.className.match(/expand(\d+)\-*(\d+)*/i);
this.expandMin = minHeight || (p ? parseInt('0'+p[1], 10) : 0);
this.expandMax = maxHeight || (p ? parseInt('0'+p[2], 10) : 99999);
ResizeTextarea(this);
if (!this.Initialized) {
this.Initialized = true;
$(this).css("padding-top", 0).css("padding-bottom", 0);
$(this).bind("keyup", ResizeTextarea).bind("focus", ResizeTextarea);
}
});
return this;
};
})(jQuery);
jQuery(document).ready(function() {
jQuery("textarea[class*=expand]").TextAreaExpander();
}); 

function MoveBlog(){}

//save Rating
var myVote=0; 
function shRating(vn){
for (var x=1;x<=vn;x++){$("#rst" + x).attr('src','/images/common/starfill.gif');$("#rst" + x + "_bt").attr('src','/images/common/starfill.png');}
for (var x=vn+1; x<6; x++){$("#rst" + x).attr('src','/images/common/starblank.gif');$("#rst" + x + "_bt").attr('src','/images/common/starblank.png');}
}
function setVote(vnn){
for (var y=1;y<=vnn;y++){$("#rst" + y).attr('src','/images/common/gstarfill.gif');$("#rst" + y + "_bt").attr('src','/images/common/gstarfill.png');}
for (var y=vnn+1; y<6; y++){$("#rst" + y).attr('src','/images/common/gstarblank.gif');$("#rst" + y + "_bt").attr('src','/images/common/gstarblank.png');}
}
function clRating(){shRating(myVote); }
function stopVote(){for (var i=1; i<6; i++){$("#rst" + i).click(function(){});document.getElementById("rst" + i).onmouseover=function(){};document.getElementById("rst" + i).onmouseout=function(){};$("#rst" + i).removeClass("vt");if (thisDict) {$("#rst" + i +"_bt").click(function(){});document.getElementById("rst" + i + "_bt").onmouseover=function(){};document.getElementById("rst" + i + "_bt").onmouseout=function(){};$("#rst" + i + "_bt").removeClass("vt");}}}
function emp(){}
function resetVote(){
 myVote=0; 
 $("#rating").html('<span id="trest">  Оценить перевод:</span><img src="/images/common/starblank.gif" border="0"  align="absmiddle" id="rst1" onmouseout="javascript:clRating();" onclick="javascript:sendRating(1);" onmouseover="javascript:shRating(1);" class="vt" /><img src="/images/common/starblank.gif" border="0"  align="absmiddle" id="rst2" onmouseout="javascript:clRating();" onclick="javascript:sendRating(2);" onmouseover="javascript:shRating(2);" class="vt"/><img src="/images/common/starblank.gif" border="0" align="absmiddle" id="rst3" onmouseout="javascript:clRating();" onclick="javascript:sendRating(3);" onmouseover="javascript:shRating(3);"  class="vt" /><img src="/images/common/starblank.gif" border="0" align="absmiddle" id="rst4" onmouseout="javascript:clRating();" onclick="sendRating(4)" onmouseover="javascript:shRating(4);" class="vt"  /><img src="/images/common/starblank.gif" border="0"  align="absmiddle" id="rst5" onmouseout="javascript:clRating();" onclick="javascript:sendRating(5);" onmouseover="javascript:shRating(5);" class="vt" /><br/>');
}

function sendRating(rt){
 if ((savedUID!="")&&(trUID=="")) {trUID = savedUID;}
 if (myVote!=0) return; myVote=rt;
 SaveSocial(rt, 'rate');
}//Rating

function getTranslationLinks(){
 if (!visLink){
   //$("#keepClickSS").show();
   if (saveTranslation) $("#loadingLink").hide();
   closewAddTranslation();
   if (!($.browser.msie)){
    if ( !thisDict ){$("#linkGL_img").attr('src','/images/common/ss_icns_bt_d.png');}
    else{$("#linkGL_img").attr('src','/images/common/ss_icns_bt_d.png');}
    }
   else{
    if (!thisDict){$("#linkGL_img").attr('src','/images/common/ss_icns_bt_ie_d.png');}
    else{$("#linkGL_img").attr('src','/images/common/ss_icns_bt_ie_d.png'); $("#linkGL_img_bt").attr('src','/images/common/ss_icns_bt_ie.png');}
    }
   $("#getLinkSpan").show(); 
   visLink=true;
   if (!saveTranslation) saveTranslationAjax();
 }
 else {closeTranslationLinks();}
}//getTrLinks

function closeTranslationLinks(){ 
 visLink=false;
 closeViewTranslationLinks();
 $("#loadingLink").hide();
 $("#getLinkSpan").hide();
 $("#getLinkSpan").hide();
 if (!($.browser.msie)){
 if (!thisDict){$("#linkGL_img").attr('src','/images/common/ss_icns_bt.png');}
 else{$("#linkGL_img").attr('src','/images/common/ss_icns_bt.png');}
 }
 else{
 if (!thisDict){$("#linkGL_img").attr('src','/images/common/ss_icns_bt_ie.png')}
 else{$("#linkGL_img").attr('src','/images/common/ss_icns_bt_ie.png');}
 }
 if (thisDict){
 closeViewTranslationLinks();
 $("#loadingLink_bt").hide();
 $("#getLinkSpan_bt").hide();
 $("#getLinkSpan_bt").hide();
 if (!($.browser.msie)){$("#linkGL_img_bt").attr('src','/images/common/ss_icns_bt.png');}
 else{$("#linkGL_img_bt").attr('src','/images/common/ss_icns_bt_ie.png')}
 }


 //$('#keepClickSS').hide();
}//closeTrLinks

function getViewTranslationLinks(){
 if (!visVLink){$("#getLinkSpan").css('margin-top','-247px');$("#getLinkSpan").css('height','243px');$("#VLspan").css('margin-top','-13px');$("#getViewLinkSpan").show();$("#getViewLinkSpan").click(function(event){closeViewTranslationLinks();}); visVLink=true;}
 else {closeViewTranslationLinks();}
}
function closeViewTranslationLinks(){
 visVLink=false;
 $("#getViewLinkSpan").hide();$("#VLspan").css('margin-top','-9px');$("#getLinkSpan").css('margin-top','-207px');$("#getLinkSpan").css('height','203px');
 if (thisDict) {$("#getViewLinkSpan_bt").hide();$("#VLspan_bt").css('margin-top','-9px');$("#getLinkSpan_bt").css('margin-top','-207px');$("#getLinkSpan_bt").css('height','203px');}
}


function closeAllTopPopups(){
 $("#feedbackForm").slideUp(600);$("#flags").slideUp(600);$("#forLogin").slideUp(600);
 $("#keepClick").hide(); topPopup="close";
 $("#lOtpravleno").hide();$("#fFeedbackFld").show();$(".checkLabel1").show();$("#bAjaxFeedback").show(); 
}

function saveTranslationAjax()
{
  if (savedUID == "")
  {
    SaveSocial('', 'link');  
  }
  else
  { 
    trUID = savedUID;
    generateLink = GenerateLinks(uTrType);
    GenerateTexts(generateLink);
    $("#loadingLink").hide();
    $("#saveLinkResult").show();
    saveTranslation=true;     
  }  
}//saveTrAjx

function GenerateLinks(trType){
    var lnk="http://www.translate.ru/"
    if (trType=='word'){
        lnk+="/"+$("#template").val()+"/en-ru/"+$("#SiteContent_sourceText").val();
    }
    else {lnk+="links/"+trUID;} 
//    alert(lnk);
    return lnk; 
}//GenrtLinks

function GenerateTexts(trLink){       
 var wrds=( thisDict) ? $("#SiteContent_sourceTextDict").val().split(' ') : $("#SiteContent_sourceText").val().split(' ');
 var trText='';
 if (wrds.length>5){for (i=0; i<5; i++){trText+=wrds[i]+" "}; trText+="..."}
 else trText=( !thisDict) ? rtrim($("#SiteContent_sourceText").val()):rtrim($("#SiteContent_sourceTextDict").val());
 //alert(trLink);
 var linkText='<span style="font-family:Verdana, Arial, Helvetica, sans-serif; font-size:11px;">';
 var viewLinkText=linkText;
 linkText+='<a href="http://'+location.hostname+'"><img src="http://'+location.hostname+'/images/common/logo31.gif" width="31" height="31" border="0" style="padding-right:10px;padding-left:10px;" alt="Translate.Ru" title="Онлайн-переводчик и словарь Translate.Ru" align="left"/></a> Перевести ';
 viewLinkText+='<img src="http://'+location.hostname+'/images/common/logo31.gif" width="31" height="31" border="0" style="padding-bottom:15px;padding-right:10px;padding-left:10px;" alt="Translate.Ru" title="Онлайн-переводчик и словарь Translate.Ru" align="left"/> Перевести ';
 linkText+="на "+document.getElementById("SiteContent_dirs_rLang").options[document.getElementById("SiteContent_dirs_rLang").selectedIndex].innerHTML+ " ";
 viewLinkText+="на "+document.getElementById("SiteContent_dirs_rLang").options[document.getElementById("SiteContent_dirs_rLang").selectedIndex].innerHTML+ " ";
 linkText+='&laquo;<a href="'+trLink+'">'+trText;
 viewLinkText+='&laquo;<a href="javascript:;">'+trText;
 linkText+='</a>&raquo; с помощью Translate.Ru.</span>';
 viewLinkText+='</a>&raquo; с помощью Translate.Ru.</span>';
                        
 $("#dTrLink").val(trLink);

 $("#fTrLink").val(linkText); 
 $("#getViewLinkSpan").html(viewLinkText); 
 $("#t_likes").html(GenerateLikes(trLink));
 
}// end GenerateTexts

function GenerateLikes(tlnk){
var btts='';
//btts+='<div  style="clear:both;float:right;"><div class="google-buzz" style="width:60px;"><scr'+'ipt type="text/javascript" src="https://apis.google.com/js/plusone.js">{lang: "ru",size:"small"}</sc'+'ript><g:plusone size="medium" href="'+tlnk+'"></g:plusone></div></div>';
if (!($.browser.msie)){
btts+='<div  style="float:right; clear: both;"><div class="google-buzz" style="width:40px;"><scr'+'ipt type="text/javascript" src="https://apis.google.com/js/plusone.js">{lang: "ru",size:"small",annotation:"none"}</sc'+'ript><g:plusone annotation="none" size="medium" data-href="'+tlnk+'" href="'+tlnk+'"></g:plusone></div></div>';}
btts+='<div style="float:right;"><iframe allowtransparency="true" frameborder="0" scrolling="no" src="//platform.twitter.com/widgets/tweet_button.html?lang=ru&count=none&url='+tlnk+'&text=Результат перевода&via=translate_ru" style="width:80px; height:20px;"></iframe></div>'
btts+='<div style="float:right; margin:0 10px 15px 10px;"><sc'+'ript type="text/javascript" src="http://static.ak.fbcdn.net/connect.php/js/FB.Share?ver=3.1.3"></scr'+'ipt><div class="fb-share-button"><a rel="nofollow" title="Опубликовать в Facebook" name="fb_share" type="button_count" share_url='+tlnk+'>Поделиться</a></div></div>';
//btts+='<div style="float:right; margin:0 10px 15px 10px;"><a href="http://www.facebook.com/sharer.php?s=100&p[url]='+tlnk+'&p[title]="></a></div>';
btts+= '<div style="margin:0 0 15px 10px;"><div id="vk_share_button" style="float:right"></div><scr'+'ipt type="text/javas'+'cript">document.getElementById("vk_share_button").innerHTML = VK.Share.button({url: "'+tlnk+'",title:"Результат перевода на Translate.Ru",noparse: true},{type:"button",text:"Поделиться"});</scr'+'ipt></div>';

return btts;

}

function showwAddTranslation(){
 //alert("Предложи свой перевод!");
 if (!visATWin){closeTranslationLinks();
 //$("#keepClickSS").show();
 }
 if (uTrType == "text"){
  //if(advertTextText !=null) alert($("#SiteContent_MA_trasnlform_tbResult").val().replace(advertTextText,''));
  $("#addTranslationText").val($("#SiteContent_MA_trasnlform_tbPismo").val());
  //$("#addTranslationText").attr("rows","5").css("height","60px");
  $("#ATSpan").css("margin-top","-162px").css("height","145px");
  //$("#addTranslationText").keypress(function(event){});
  // $("#addTranslationText").keypress(function(event) { if (event.which == '13') alert("ffcgfgxcfg")});
 }
 else {$("#addTranslationText").keypress(function(event) { if (event.which == '13'){ saveUTranslation();return false}});}
 $("#ATSpan").show(); visATWin=true;
 $("#addTranslationText").focus();
}//showwAddTranslation

function closewAddTranslation(){
 $("#keepClickSS").hide();
 $("#errAddTranslation").html("");
 $("#ATSpan").hide();
 $("#ATForm").show(); $("#servATText").hide();
 $("#servATText").html("<b><img hspace='10' align='middle' src='/images/common/al_fullWR.gif'/> Сохраняем перевод</b>");
 if (uTrType == "text"){$("#addTranslationText").val($("#SiteContent_MA_trasnlform_tbPismo").val());}
 else {$("#addTranslationText").val('');}
 if (thisDict) {
 $("#errAddTranslation_bt").html("");
 $("#ATSpan_bt").hide();
 $("#ATForm_bt").show(); $("#servATText_bt").hide();
 $("#servATText").html("<b><img hspace='10' align='middle' src='/images/common/al_fullWR.gif'/> Сохраняем перевод</b>");
 $("#addTranslationText_bt").val('');
 }

 visATWin=false;
}

function saveUTranslation(){
 if (rtrim($("#addTranslationText").val())==""){$("#errAddTranslation").html("Пожалуйста, укажите свой вариант перевода");$("#addTranslationText").focus();return false;}
 if ($("#addTranslationText").val()==$("#SiteContent_MA_trasnlform_tbPismo").val()){$("#errAddTranslation").html("Пожалуйста, укажите СВОЙ вариант перевода"); $("#addTranslationText").focus();return false;}

 var userVar=$("#addTranslationText").val();
 userVar = encodeURIComponent(userVar).split("'").join("\\'");
    
 SaveSocial(userVar, 'vrnt');
}//saveUTrans

function showAllTemplates(){// show all Templates
 $("#allTemplatesBlock").show();
 $(".templatesBlock").hide();
 $(".templateHeader").removeClass('tempSelectTemplate');
}//showAllTmpls

function hideAllTemplates(){
 $("#allTemplatesBlock").hide();
}

function checkedUT(){}

function ListenWord(pElem,word, pos, mode){
 //var dir=GetDir();
 var dir=(trDirCode == '') ? GetDir():trDirCode.split('-');
         gaCustomVarsSet(dir);
        _gaq.push(['_trackEvent', 'Forvo', 'Listen', word]);
 $("#lnkGtTr"+pos).css('display','none');
 $("#loadFrv"+pos).show();
 $.ajax({
    type: "POST",
    contentType: "application/json; charset=utf-8",
    url: "/services/UtilsService.asmx/CallForvo",
    data: "{ dirCode:'"+dir.join('-')+"', dKey:'"+word+"'}", 
    dataType: "json",
    success: function(res){
      var result=GetAjaxResult(res);      
      if (result.inForvo){ 
        if (mode=="stop"){
         $("#speaker_on"+pos).prepend('<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" codebase="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=10,0,0,0" width="24" height="21" id="player'+pos+'"><PARAM NAME="movie" VALUE="/images/audioplay/audioplay.swf?playerid=1&file='+result.mp3URL+'&auto=no&sendstop=yes&repeat=1&buttondir=/images/audioplay/buttons/promt15&bgcolor=0x000000&mode=playstop"/><PARAM NAME="quality" VALUE="high"/><PARAM NAME="wmode" VALUE="transparent"/><PARAM NAME="allowScriptAccess" value="always" /><embed wmode="transparent" src="/images/audioplay/audioplay.swf?playerid=1&file='+result.mp3URL+'&auto=no&amp;sendstop=yes&repeat=1&buttondir=/images/audioplay/buttons/promt15&bgcolor=0x000000&mode=playstop"  quality="high" width="24" height="21" allowScriptAccess="always"  align="top" TYPE="application/x-shockwave-flash"  pluginspage="http://www.macromedia.com/go/getflashplayer" style="margin-top:2px;" name="player'+pos+'"></embed></object>').css('display','inline');
        }
        if (mode=="play"){
         $("#speaker_on"+pos).prepend('<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" codebase="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=10,0,0,0" width="24" height="21" id="player'+pos+'"><PARAM NAME="movie" VALUE="/images/audioplay/audioplay.swf?playerid=1&file='+result.mp3URL+'&auto=yes&sendstop=yes&repeat=1&buttondir=/images/audioplay/buttons/promt15&bgcolor=0x000000&mode=playstop"/><PARAM NAME="quality" VALUE="high"/><PARAM NAME="wmode" VALUE="transparent"/><PARAM NAME="allowScriptAccess" value="always" /><embed wmode="transparent" src="/images/audioplay/audioplay.swf?playerid=1&file='+result.mp3URL+'&auto=yes&amp;sendstop=yes&repeat=1&buttondir=/images/audioplay/buttons/promt15&bgcolor=0x000000&mode=playstop"  quality="high" width="24" height="21" allowScriptAccess="always"  align="top" TYPE="application/x-shockwave-flash"  pluginspage="http://www.macromedia.com/go/getflashplayer" style="margin-top:2px;" name="player'+pos+'"></embed></object>').css('display','inline');
        }
        //$("#imgGtTr"+pos).attr('src','/images/vol_on.gif').attr('alt', '').attr('title', '');
        $("#lnkGtTr"+pos).css('display','none');
      }
      else {$("#addPr").show();}
      $("#loadFrv"+pos).hide();            
    },
    error: function (XMLHttpRequest, textStatus, errorThrown) {
        $("#imgGtTr"+pos).attr('src','/images/common/vol_off.gif').attr('alt', '').attr('title', 'Произношение в настоящий момент недоступно');
    }     
 });
}//listenWord


function ListenWordFW(pElem,word, posf, mode){
 //var dir=GetDir();
 var dir=(trDirCode == '') ? GetDir():trDirCode.split('-');
          gaCustomVarsSet(dir);
        _gaq.push(['_trackEvent', 'Forvo', 'Listen', word]);
$("#flView #lnkGtTr_f"+posf).css('display','none');
 $("#flView #loadFrv_f"+posf).show();    
 $.ajax({
    type: "POST",
    contentType: "application/json; charset=utf-8",
    url: "/services/UtilsService.asmx/CallForvo",
    data: "{ dirCode:'"+dir.join('-')+"', dKey:'"+word+"'}", 
    dataType: "json",
    success: function(res){
      var result=GetAjaxResult(res);      
      if (result.inForvo){ 
        if (mode=="stop"){
          $("#flView #speaker_on_f"+posf).prepend('<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" codebase="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=10,0,0,0" width="24" height="21" id="player'+posf+'"><PARAM NAME="movie" VALUE="/images/audioplay/audioplay.swf?playerid=1&file='+result.mp3URL+'&auto=no&sendstop=yes&repeat=1&buttondir=/images/audioplay/buttons/promt15&bgcolor=0x000000&mode=playstop"/><PARAM NAME="quality" VALUE="high"/><PARAM NAME="wmode" VALUE="transparent"/><PARAM NAME="allowScriptAccess" value="always" /><embed wmode="transparent" src="/images/audioplay/audioplay.swf?playerid=1&file='+result.mp3URL+'&auto=no&amp;sendstop=yes&repeat=1&buttondir=/images/audioplay/buttons/promt15&bgcolor=0x000000&mode=playstop"  quality="high" width="24" height="21" allowScriptAccess="always"  align="top" TYPE="application/x-shockwave-flash"  pluginspage="http://www.macromedia.com/go/getflashplayer" style="margin-top:2px;" name="player'+posf+'"></embed></object>').css('display','inline');
        }
        if (mode=="play"){
          $("#flView #speaker_on_f"+posf).prepend('<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" codebase="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=10,0,0,0" width="24" height="21" id="player'+posf+'"><PARAM NAME="movie" VALUE="/images/audioplay/audioplay.swf?playerid=1&file='+result.mp3URL+'&auto=yes&sendstop=yes&repeat=1&buttondir=/images/audioplay/buttons/promt15&bgcolor=0x000000&mode=playstop"/><PARAM NAME="quality" VALUE="high"/><PARAM NAME="wmode" VALUE="transparent"/><PARAM NAME="allowScriptAccess" value="always" /><embed wmode="transparent" src="/images/audioplay/audioplay.swf?playerid=1&file='+result.mp3URL+'&auto=yes&amp;sendstop=yes&repeat=1&buttondir=/images/audioplay/buttons/promt15&bgcolor=0x000000&mode=playstop"  quality="high" width="24" height="21" allowScriptAccess="always"  align="top" TYPE="application/x-shockwave-flash"  pluginspage="http://www.macromedia.com/go/getflashplayer" style="margin-top:2px;" name="player'+posf+'"></embed></object>').css('display','inline');
        }
        //$("#imgGtTr"+pos).attr('src','/images/vol_on.gif').attr('alt', '').attr('title', '');
       // $("#flView #lnkGtTr_f"+posf).css('display','none');
        
      }
      else {$("#addPr_f").show();}
      $("#flView #loadFrv_f"+posf).hide();            
    },
    error: function (XMLHttpRequest, textStatus, errorThrown) {
        $("#flView #imgGtTr_f"+posf).attr('src','/images/common/vol_off.gif').attr('alt', '').attr('title', 'Произношение в настоящий момент недоступно');
    }     
  });
}//ListenWordFW

function ListenWordFW_tr(pElem,word, posf, mode){
 var dir=GetDir();
 dir=(trDirCode == '') ? [dir[1],dir[0]]:[trDirCode.split('-')[1],trDirCode.split('-')[0]];
          gaCustomVarsSet(dir);
        _gaq.push(['_trackEvent', 'Forvo', 'Listen', word]);

 $("#mfi_grammInfo #loadFrv_tf"+posf).show();    
 $.ajax({
    type: "POST",
    contentType: "application/json; charset=utf-8",
    url: "/services/UtilsService.asmx/CallForvo",
    data: "{ dirCode:'"+dir.join('-')+"', dKey:'"+word+"'}", 
    dataType: "json",
    success: function(res){
      var result=GetAjaxResult(res);      
      if (result.inForvo){ 
        if (mode=="stop"){
          $("#mfi_grammInfo #speaker_on_tf"+posf).prepend('<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" codebase="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=10,0,0,0" width="24" height="21" id="player'+posf+'"><PARAM NAME="movie" VALUE="/images/audioplay/audioplay.swf?playerid=1&file='+result.mp3URL+'&auto=no&sendstop=yes&repeat=1&buttondir=/images/audioplay/buttons/promt15&bgcolor=0x000000&mode=playstop"/><PARAM NAME="quality" VALUE="high"/><PARAM NAME="wmode" VALUE="transparent"/><PARAM NAME="allowScriptAccess" value="always" /><embed wmode="transparent" src="/images/audioplay/audioplay.swf?playerid=1&file='+result.mp3URL+'&auto=no&amp;sendstop=yes&repeat=1&buttondir=/images/audioplay/buttons/promt15&bgcolor=0x000000&mode=playstop"  quality="high" width="24" height="21" allowScriptAccess="always"  align="top" TYPE="application/x-shockwave-flash"  pluginspage="http://www.macromedia.com/go/getflashplayer" style="margin-top:2px;" name="player'+posf+'"></embed></object>').css('display','inline');
          //$("#speaker_on_tmf"+posf).prepend('<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" codebase="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=10,0,0,0" width="20" height="17" id="player'+posf+'"><PARAM NAME="movie" VALUE="/images/audioplay/audioplay.swf?playerid=1&file='+result.mp3URL+'&auto=no&sendstop=yes&repeat=1&buttondir=/images/audioplay/buttons/promt_small&bgcolor=0x000000&mode=playstop"/><PARAM NAME="quality" VALUE="high"/><PARAM NAME="wmode" VALUE="transparent"/><PARAM NAME="allowScriptAccess" value="always" /><embed wmode="transparent" src="/images/audioplay/audioplay.swf?playerid=1&file='+result.mp3URL+'&auto=no&amp;sendstop=yes&repeat=1&buttondir=/images/audioplay/buttons/promt_small&bgcolor=0x000000&mode=playstop"  quality="high" width="20" height="17" allowScriptAccess="always"  align="top" TYPE="application/x-shockwave-flash"  pluginspage="http://www.macromedia.com/go/getflashplayer" style="margin-top:2px;" name="player'+posf+'"></embed></object>').css('display','inline');
       }
        if (mode=="play"){
          $("#mfi_grammInfo #speaker_on_tf"+posf).prepend('<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" codebase="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=10,0,0,0" width="24" height="21" id="player'+posf+'"><PARAM NAME="movie" VALUE="/images/audioplay/audioplay.swf?playerid=1&file='+result.mp3URL+'&auto=yes&sendstop=yes&repeat=1&buttondir=/images/audioplay/buttons/promt15&bgcolor=0x000000&mode=playstop"/><PARAM NAME="quality" VALUE="high"/><PARAM NAME="wmode" VALUE="transparent"/><PARAM NAME="allowScriptAccess" value="always" /><embed wmode="transparent" src="/images/audioplay/audioplay.swf?playerid=1&file='+result.mp3URL+'&auto=yes&amp;sendstop=yes&repeat=1&buttondir=/images/audioplay/buttons/promt15&bgcolor=0x000000&mode=playstop"  quality="high" width="24" height="21" allowScriptAccess="always"  align="top" TYPE="application/x-shockwave-flash"  pluginspage="http://www.macromedia.com/go/getflashplayer" style="margin-top:2px;" name="player'+posf+'"></embed></object>').css('display','inline');
          //$("#speaker_on_tf"+posf).prepend('<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" codebase="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=10,0,0,0" width="20" height="17" id="player'+posf+'"><PARAM NAME="movie" VALUE="/images/audioplay/audioplay.swf?playerid=1&file='+result.mp3URL+'&auto=yes&sendstop=yes&repeat=1&buttondir=/images/audioplay/buttons/promt_small&bgcolor=0x000000&mode=playstop"/><PARAM NAME="quality" VALUE="high"/><PARAM NAME="wmode" VALUE="transparent"/><PARAM NAME="allowScriptAccess" value="always" /><embed wmode="transparent" src="/images/audioplay/audioplay.swf?playerid=1&file='+result.mp3URL+'&auto=yes&amp;sendstop=yes&repeat=1&buttondir=/images/audioplay/buttons/promt_small&bgcolor=0x000000&mode=playstop"  quality="high" width="20" height="17" allowScriptAccess="always"  align="top" TYPE="application/x-shockwave-flash"  pluginspage="http://www.macromedia.com/go/getflashplayer" style="margin-top:2px;" name="player'+posf+'"></embed></object>').css('display','inline');
        }
        //$("#imgGtTr"+pos).attr('src','/images/vol_on.gif').attr('alt', '').attr('title', '');
        $("#mfi_grammInfo #lnkGtTr_tf"+posf).css('display','none');
        //$("#lnkGtTr_tmf"+posf).css('display','none');
      }
      else {$("#addPr_f").show();}
      $("#mfi_grammInfo #loadFrv_tf"+posf).hide();    
      //$("#loadFrv_tmf"+posf).hide();         
    },
    error: function (XMLHttpRequest, textStatus, errorThrown) {
        $("#mfi_grammInfo #imgGtTr_tf"+posf).attr('src','/images/common/speaker_dis.png').attr('alt', '').attr('title', 'Произношение в настоящий момент недоступно');
        //$("#mfi_grammInfo #imgGtTr_tmf"+posf).attr('src','/images/common/vol_off.gif').attr('alt', '').attr('title', 'Произношение в настоящий момент недоступно');

    }     
  });
}//ListenWordFW_tr

function ListenWordFW_tr_list(pElem,word, posf, mode){

//$("#imgGtTr_tmf"+posf).click(function (e){e.stopPropagation();});
 $("#SiteContent_result .r_tr #imgGtTr_tmf"+posf).click(function (e){e.stopPropagation();});
 var dir=GetDir();
 dir=(trDirCode == '') ? [dir[1],dir[0]]:[trDirCode.split('-')[1],trDirCode.split('-')[0]];
          gaCustomVarsSet(dir);
        _gaq.push(['_trackEvent', 'Forvo', 'Listen', word]);

 //$("#mfi_grammInfo #loadFrv_tf"+posf).show(); 
 //$("#loadFrv_mtf"+posf).show();       
 $.ajax({
    type: "POST",
    contentType: "application/json; charset=utf-8",
    url: "/services/UtilsService.asmx/CallForvo",
    data: "{ dirCode:'"+dir.join('-')+"', dKey:'"+word+"'}", 
    dataType: "json",
    success: function(res){
      var result=GetAjaxResult(res);      
      if (result.inForvo){ 
        if (mode=="stop"){
          //$("#mfi_grammInfo #speaker_on_tf"+posf).prepend('<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" codebase="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=10,0,0,0" width="20" height="17" id="player'+posf+'"><PARAM NAME="movie" VALUE="/images/audioplay/audioplay.swf?playerid=1&file='+result.mp3URL+'&auto=no&sendstop=yes&repeat=1&buttondir=/images/audioplay/buttons/promt_small&bgcolor=0x000000&mode=playstop"/><PARAM NAME="quality" VALUE="high"/><PARAM NAME="wmode" VALUE="transparent"/><PARAM NAME="allowScriptAccess" value="always" /><embed wmode="transparent" src="/images/audioplay/audioplay.swf?playerid=1&file='+result.mp3URL+'&auto=no&amp;sendstop=yes&repeat=1&buttondir=/images/audioplay/buttons/promt_small&bgcolor=0x000000&mode=playstop"  quality="high" width="20" height="17" allowScriptAccess="always"  align="top" TYPE="application/x-shockwave-flash"  pluginspage="http://www.macromedia.com/go/getflashplayer" style="margin-top:2px;" name="player'+posf+'"></embed></object>').css('display','inline');
          $("#speaker_on_tmf"+posf).prepend('<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" codebase="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=10,0,0,0" width="24" height="21" id="player'+posf+'"><PARAM NAME="movie" VALUE="/images/audioplay/audioplay.swf?playerid=1&file='+result.mp3URL+'&auto=no&sendstop=yes&repeat=1&buttondir=/images/audioplay/buttons/promt15_blue&bgcolor=0x000000&mode=playstop"/><PARAM NAME="quality" VALUE="high"/><PARAM NAME="wmode" VALUE="transparent"/><PARAM NAME="allowScriptAccess" value="always" /><embed wmode="transparent" src="/images/audioplay/audioplay.swf?playerid=1&file='+result.mp3URL+'&auto=no&amp;sendstop=yes&repeat=1&buttondir=/images/audioplay/buttons/promt15_blue&bgcolor=0x000000&mode=playstop"  quality="high" width="24" height="21" allowScriptAccess="always"  align="top" TYPE="application/x-shockwave-flash"  pluginspage="http://www.macromedia.com/go/getflashplayer" style="margin-top:2px;" name="player'+posf+'"></embed></object>').css('display','inline');
       }
        if (mode=="play"){
          //$("#mfi_grammInfo #speaker_on_tf"+posf).prepend('<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" codebase="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=10,0,0,0" width="20" height="17" id="player'+posf+'"><PARAM NAME="movie" VALUE="/images/audioplay/audioplay.swf?playerid=1&file='+result.mp3URL+'&auto=yes&sendstop=yes&repeat=1&buttondir=/images/audioplay/buttons/promt_small&bgcolor=0x000000&mode=playstop"/><PARAM NAME="quality" VALUE="high"/><PARAM NAME="wmode" VALUE="transparent"/><PARAM NAME="allowScriptAccess" value="always" /><embed wmode="transparent" src="/images/audioplay/audioplay.swf?playerid=1&file='+result.mp3URL+'&auto=yes&amp;sendstop=yes&repeat=1&buttondir=/images/audioplay/buttons/promt_small&bgcolor=0x000000&mode=playstop"  quality="high" width="20" height="17" allowScriptAccess="always"  align="top" TYPE="application/x-shockwave-flash"  pluginspage="http://www.macromedia.com/go/getflashplayer" style="margin-top:2px;" name="player'+posf+'"></embed></object>').css('display','inline');
          $("#speaker_on_tmf"+posf).prepend('<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" codebase="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=10,0,0,0" width="24" height="21" id="player'+posf+'"><PARAM NAME="movie" VALUE="/images/audioplay/audioplay.swf?playerid=1&file='+result.mp3URL+'&auto=yes&sendstop=yes&repeat=1&buttondir=/images/audioplay/buttons/promt15_blue&bgcolor=0x000000&mode=playstop"/><PARAM NAME="quality" VALUE="high"/><PARAM NAME="wmode" VALUE="transparent"/><PARAM NAME="allowScriptAccess" value="always" /><embed wmode="transparent" src="/images/audioplay/audioplay.swf?playerid=1&file='+result.mp3URL+'&auto=yes&amp;sendstop=yes&repeat=1&buttondir=/images/audioplay/buttons/promt15_blue&bgcolor=0x000000&mode=playstop"  quality="high" width="24" height="21" allowScriptAccess="always"  align="top" TYPE="application/x-shockwave-flash"  pluginspage="http://www.macromedia.com/go/getflashplayer" style="margin-top:2px;" name="player'+posf+'"></embed></object>').css('display','inline');
        }
        //$("#imgGtTr"+pos).attr('src','/images/vol_on.gif').attr('alt', '').attr('title', '');
        //$("#mfi_grammInfo #lnkGtTr_tf"+posf).css('display','none');
        $("#lnkGtTr_tmf"+posf).css('display','none');
      }
      else {$("#addPr_f").show();}
      //$("#mfi_grammInfo #loadFrv_tf"+posf).hide();    
      $("#loadFrv_tmf"+posf).hide();         
    },
    error: function (XMLHttpRequest, textStatus, errorThrown) {
        //$("#mfi_grammInfo #imgGtTr_tf"+posf).attr('src','/images/common/vol_off.gif').attr('alt', '').attr('title', 'Произношение в настоящий момент недоступно');
        $("#imgGtTr_tmf"+posf).attr('src','/images/common/speaker_dis.png').attr('alt', '').attr('title', 'Произношение в настоящий момент недоступно');

    }     
  });
}//ListenWordFW


function ListenWordFW_tr_list_default(pElem,word, posf, mode){

//$("#imgGtTr_tmf"+posf).click(function (e){e.stopPropagation();});
 $("li .pronunciation #imgGtTr_tmf"+posf).click(function (e){e.stopPropagation();});
 //var dir=GetDir();
 //var dir=(trDirCode == '') ? GetDir():trDirCode.split('-');
 var dir=(trDirCode == '') ? [dir[1],dir[0]]:[trDirCode.split('-')[1],trDirCode.split('-')[0]];
          gaCustomVarsSet(dir);
        _gaq.push(['_trackEvent', 'Forvo', 'Listen', word]);

 //$("#mfi_grammInfo #loadFrv_tf"+posf).show(); 
 //$("#loadFrv_mtf"+posf).show();       
 $.ajax({
    type: "POST",
    contentType: "application/json; charset=utf-8",
    url: "/services/UtilsService.asmx/CallForvo",
    data: "{ dirCode:'"+dir.join('-')+"', dKey:'"+word+"'}", 
    dataType: "json",
    success: function(res){
      var result=GetAjaxResult(res);      
      if (result.inForvo){ 
        if (mode=="stop"){
          //$("#mfi_grammInfo #speaker_on_tf"+posf).prepend('<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" codebase="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=10,0,0,0" width="20" height="17" id="player'+posf+'"><PARAM NAME="movie" VALUE="/images/audioplay/audioplay.swf?playerid=1&file='+result.mp3URL+'&auto=no&sendstop=yes&repeat=1&buttondir=/images/audioplay/buttons/promt_small&bgcolor=0x000000&mode=playstop"/><PARAM NAME="quality" VALUE="high"/><PARAM NAME="wmode" VALUE="transparent"/><PARAM NAME="allowScriptAccess" value="always" /><embed wmode="transparent" src="/images/audioplay/audioplay.swf?playerid=1&file='+result.mp3URL+'&auto=no&amp;sendstop=yes&repeat=1&buttondir=/images/audioplay/buttons/promt_small&bgcolor=0x000000&mode=playstop"  quality="high" width="20" height="17" allowScriptAccess="always"  align="top" TYPE="application/x-shockwave-flash"  pluginspage="http://www.macromedia.com/go/getflashplayer" style="margin-top:2px;" name="player'+posf+'"></embed></object>').css('display','inline');
          $("#speaker_on_tmf"+posf).prepend('<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" codebase="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=10,0,0,0" width="24" height="21" id="player'+posf+'"><PARAM NAME="movie" VALUE="/images/audioplay/audioplay.swf?playerid=1&file='+result.mp3URL+'&auto=no&sendstop=yes&repeat=1&buttondir=/images/audioplay/buttons/promt15_blue&bgcolor=0x000000&mode=playstop"/><PARAM NAME="quality" VALUE="high"/><PARAM NAME="wmode" VALUE="transparent"/><PARAM NAME="allowScriptAccess" value="always" /><embed wmode="transparent" src="/images/audioplay/audioplay.swf?playerid=1&file='+result.mp3URL+'&auto=no&amp;sendstop=yes&repeat=1&buttondir=/images/audioplay/buttons/promt15_blue&bgcolor=0x000000&mode=playstop"  quality="high" width="24" height="21" allowScriptAccess="always"  align="top" TYPE="application/x-shockwave-flash"  pluginspage="http://www.macromedia.com/go/getflashplayer" style="margin-top:2px;" name="player'+posf+'"></embed></object>').css('display','inline');
       }
        if (mode=="play"){
          //$("#mfi_grammInfo #speaker_on_tf"+posf).prepend('<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" codebase="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=10,0,0,0" width="20" height="17" id="player'+posf+'"><PARAM NAME="movie" VALUE="/images/audioplay/audioplay.swf?playerid=1&file='+result.mp3URL+'&auto=yes&sendstop=yes&repeat=1&buttondir=/images/audioplay/buttons/promt_small&bgcolor=0x000000&mode=playstop"/><PARAM NAME="quality" VALUE="high"/><PARAM NAME="wmode" VALUE="transparent"/><PARAM NAME="allowScriptAccess" value="always" /><embed wmode="transparent" src="/images/audioplay/audioplay.swf?playerid=1&file='+result.mp3URL+'&auto=yes&amp;sendstop=yes&repeat=1&buttondir=/images/audioplay/buttons/promt_small&bgcolor=0x000000&mode=playstop"  quality="high" width="20" height="17" allowScriptAccess="always"  align="top" TYPE="application/x-shockwave-flash"  pluginspage="http://www.macromedia.com/go/getflashplayer" style="margin-top:2px;" name="player'+posf+'"></embed></object>').css('display','inline');
          $("#speaker_on_tmf"+posf).prepend('<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" codebase="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=10,0,0,0" width="24" height="21" id="player'+posf+'"><PARAM NAME="movie" VALUE="/images/audioplay/audioplay.swf?playerid=1&file='+result.mp3URL+'&auto=yes&sendstop=yes&repeat=1&buttondir=/images/audioplay/buttons/promt15_blue&bgcolor=0x000000&mode=playstop"/><PARAM NAME="quality" VALUE="high"/><PARAM NAME="wmode" VALUE="transparent"/><PARAM NAME="allowScriptAccess" value="always" /><embed wmode="transparent" src="/images/audioplay/audioplay.swf?playerid=1&file='+result.mp3URL+'&auto=yes&amp;sendstop=yes&repeat=1&buttondir=/images/audioplay/buttons/promt15_blue&bgcolor=0x000000&mode=playstop"  quality="high" width="24" height="21" allowScriptAccess="always"  align="top" TYPE="application/x-shockwave-flash"  pluginspage="http://www.macromedia.com/go/getflashplayer" style="margin-top:2px;" name="player'+posf+'"></embed></object>').css('display','inline');
        }
        //$("#imgGtTr"+pos).attr('src','/images/vol_on.gif').attr('alt', '').attr('title', '');
        //$("#mfi_grammInfo #lnkGtTr_tf"+posf).css('display','none');
        $("#lnkGtTr_tmf"+posf).css('display','none');
      }
      else {$("#addPr_f").show();}
      //$("#mfi_grammInfo #loadFrv_tf"+posf).hide();    
      $("#loadFrv_tmf"+posf).hide();         
    },
    error: function (XMLHttpRequest, textStatus, errorThrown) {
        //$("#mfi_grammInfo #imgGtTr_tf"+posf).attr('src','/images/common/vol_off.gif').attr('alt', '').attr('title', 'Произношение в настоящий момент недоступно');
        $("#imgGtTr_tmf"+posf).attr('src','/images/common/speaker_dis.png').attr('alt', '').attr('title', 'Произношение в настоящий момент недоступно');

    }     
  });
}//ListenWordFW



function ListenWordFW1(pElem,word, posf, mode){
// var dir=GetDir();
 var dir=(trDirCode == '') ? GetDir():trDirCode.split('-');
          gaCustomVarsSet(dir);
        _gaq.push(['_trackEvent', 'Forvo', 'Listen', word]);
$("#shView #lnkGtTr_f"+posf).css('display','none');
 $("#shView #loadFrv_f"+posf).show();    
 $.ajax({
    type: "POST",
    contentType: "application/json; charset=utf-8",
    url: "/services/UtilsService.asmx/CallForvo",
    data: "{ dirCode:'"+dir.join('-')+"', dKey:'"+word+"'}", 
    dataType: "json",
    success: function(res){
      var result=GetAjaxResult(res);      
      if (result.inForvo){ 
        if (mode=="stop"){
          $("#shView #speaker_on_f"+posf).prepend('<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" codebase="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=10,0,0,0" width="24" height="21" id="player'+posf+'"><PARAM NAME="movie" VALUE="/images/audioplay/audioplay.swf?playerid=1&file='+result.mp3URL+'&auto=no&sendstop=yes&repeat=1&buttondir=/images/audioplay/buttons/promt15&bgcolor=0x000000&mode=playstop"/><PARAM NAME="quality" VALUE="high"/><PARAM NAME="wmode" VALUE="transparent"/><PARAM NAME="allowScriptAccess" value="always" /><embed wmode="transparent" src="/images/audioplay/audioplay.swf?playerid=1&file='+result.mp3URL+'&auto=no&amp;sendstop=yes&repeat=1&buttondir=/images/audioplay/buttons/promt15&bgcolor=0x000000&mode=playstop"  quality="high" width="24" height="21" allowScriptAccess="always"  align="top" TYPE="application/x-shockwave-flash"  pluginspage="http://www.macromedia.com/go/getflashplayer" style="margin-top:2px;" name="player'+posf+'"></embed></object>').css('display','inline');
        }
        if (mode=="play"){
          $("#shView #speaker_on_f"+posf).prepend('<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" codebase="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=10,0,0,0" width="24" height="21" id="player'+posf+'"><PARAM NAME="movie" VALUE="/images/audioplay/audioplay.swf?playerid=1&file='+result.mp3URL+'&auto=yes&sendstop=yes&repeat=1&buttondir=/images/audioplay/buttons/promt15&bgcolor=0x000000&mode=playstop"/><PARAM NAME="quality" VALUE="high"/><PARAM NAME="wmode" VALUE="transparent"/><PARAM NAME="allowScriptAccess" value="always" /><embed wmode="transparent" src="/images/audioplay/audioplay.swf?playerid=1&file='+result.mp3URL+'&auto=yes&amp;sendstop=yes&repeat=1&buttondir=/images/audioplay/buttons/promt15&bgcolor=0x000000&mode=playstop"  quality="high" width="24" height="21" allowScriptAccess="always"  align="top" TYPE="application/x-shockwave-flash"  pluginspage="http://www.macromedia.com/go/getflashplayer" style="margin-top:2px;" name="player'+posf+'"></embed></object>').css('display','inline');
        }
        //$("#imgGtTr"+pos).attr('src','/images/vol_on.gif').attr('alt', '').attr('title', '');
        $("#shView #lnkGtTr_f"+posf).css('display','none');
      }
      else {$("#addPr_f").show();
      }
      $("#shView #loadFrv_f"+posf).hide();            
    },
    error: function (XMLHttpRequest, textStatus, errorThrown) {
        $("#shView #imgGtTr_f"+posf).attr('src','/images/common/vol_off.gif').attr('alt', '').attr('title', 'Произношение в настоящий момент недоступно');
    }     
  });
}//ListenWordFW1

function showFeedbackForm(){
 if (topPopup =="fbPU"){ closeAllTopPopups(); return }
 else{closeAllTopPopups();}
 $("#feedbackForm").height(380);
 $("#feedbackForm").slideDown(600); 
 $("#keepClick").show();topPopup="fbPU"; 
 if (wasErr==true) {$("#tbOtzyv").val(eFB);}
 else {$("#tbOtzyv").val("");}
}

function hideFeedbackForm(){closeAllTopPopups();} 

//function ShowFullWRefERRE(pos){ 
function ShowFullWRefERRE(key, dir, pos, doDict){


 $("#megaFullInfo").dialog('open');
 $("#al_fullWR").hide();
 if (!getFullWRef){
 $("#mfi_translate").html('<span id="al_fullWR1" style="display:inline;"><img hspace="10" align="middle" src="/images/common/al_fullWR.gif"> Загружаем информацию...</span>');
 $("#mfi_grammInfo").html('<span id="al_fullWR2" style="display:inline;"><img hspace="10" align="middle" src="/images/common/al_fullWR.gif"> Загружаем информацию...</span>');

 //alert(doDict);
 var wrd = ((doDict == 1)||(doDict == 2))? rtrim(referStr) : rtrim($("#SiteContent_sourceText").val());
 var forGACV = wrd;
 //alert(wrd);
 //rtrim($("#SiteContent_sourceText").val());
 

        _gaq.push(['_setCustomVar',1,'Template',$("#template").val(),3]);
        _gaq.push(['_setCustomVar',2,'SrcLang',langConvertor(dir[0]),3]);
        _gaq.push(['_setCustomVar',3,'TgtLang',langConvertor(dir[1]),3]);  
        _gaq.push(['_setCustomVar',4,'UserLang',langConvertor(GetDir()[0])+"-"+langConvertor(GetDir()[1]),3]);
        
if (doDict==2) {
    $("#megaFullInfo").dialog({title:'Справка по словарям'});
        _gaq.push(['_trackEvent', 'Translate', 'Dict ', wrd, wrd.length]);
                }
else {
    $("#megaFullInfo").dialog({title:'Словоизменение <sup>beta</sup>'}); 
    if (doDict==0){_gaq.push(['_trackEvent', 'Translate', 'FWord', wrd, wrd.length]);}
    else {_gaq.push(['_trackEvent', 'Translate', 'Dict', wrd, wrd.length]);}
    } 


 wrd = encodeURIComponent(wrd).split("'").join("\\'");
 //var wrd = encodeURIComponent(lastTranslation).split("'").join("\\'");
 if (dir=="") {dir=GetDir();}
 // old method requires old langcoding
 if (dir=="de-ru") {dir="gr"}
 if (dir=="ru-de") {dir="rg"}
 var iLang = "ru"; 
 var copyHeadWord="";
 $("#shortRLink a").focus();
// $("#al_fullWR").show();

    
 isd = "false"; if (doDict!=0) {isd="true";}
 $.ajax({
    type: "POST",
    contentType: "application/json; charset=utf-8",
    url: "/services/TranslationService.asmx/GetFullWordInfo",
    data: "{ word:'"+ wrd +"', dirCode:'"+ dir +"', lang:'"+ iLang +"', key:'"+key+"', ts:'"+TS+"', isDict:'"+isd+"'}", 
    dataType: "json",
    timeout: 60000,
    success: function(res){
      var result=GetAjaxResult(res);
      TS = "MainSite";
      var tmp = "";
      tmp = result.resStr;
      code = result.resCode;
      if (result.isComplete==false) { 
        $.ajax({
        type: "POST",
        contentType: "application/json; charset=utf-8",
        url: "/services/TranslationService.asmx/GetFullWordInfoRestInfo",
        data: "{ resCode:'"+ code +"'}", 
        dataType: "json",
        async: false,
        timeout: 5000,
        success: function(res){
            var result=GetAjaxResult(res);      
            tmp = tmp + result.resStr;           
            if (result.isComplete==false) { 
            $.ajax({
            type: "POST",
            contentType: "application/json; charset=utf-8",
            url: "/services/TranslationService.asmx/GetFullWordInfoRestInfo",
            data: "{ resCode:'"+ code +"'}", 
            dataType: "json",
            timeout: 5000,
            async: false,
            success: function(res){
                  var result = GetAjaxResult(res);
                  tmp = tmp + result.resStr;           
            },
            error: function (XMLHttpRequest, textStatus, errorThrown) { 
                result.isComplete=true;                    
            }      
            });
            }
        },
        error: function (XMLHttpRequest, textStatus, errorThrown) { 
            result.isComplete=true;                    
        }      
        });
      }
      getFullWRef=true; fullWordInfo=1;
      $("#mfi_translate").html(tmp);
      $("#al_fullWR").hide();
      $("#al_fullWR1").hide();
      $("#al_fullWR2").hide();
      if (doDict == 2) {$('#mfi_translate').css('width','480px'); $('#mfi_grammInfoDiv').css('display','none'); }
      else{$('#mfi_translate').removeAttr('style'); $('#mfi_grammInfoDiv').removeAttr('style');}
      $("#mfi_translate .ref_cform").click(function(){$("#mfi_translate .ref_cform").css('background','Transparent');$("#mfi_translate .r_tr").css('background','Transparent');$(this).css('background','#e0efd9'); $(".cforms_result .trsl").hide();$(".ref_cform .v_img img").attr("src","/images/common/tr_cl.gif");$(this).next(".trsl").show();$(this).children(".v_img").children("img").attr("src","/images/common/tr_op.gif");$("#mfi_grammInfo").html($(this).children(".ref_source").children().html() ); });
      $("#mfi_translate .r_tr").click(function(){$("#mfi_translate .ref_cform").css('background','Transparent');$("#mfi_translate .r_tr").css('background','Transparent');$(this).css('background','#e0efd9');$("#mfi_grammInfo").html($(this).find(".r_rs").children().html() ); });
      $("#cforms_result"+pos+" .v_img img").attr("src","/images/common/tr_op.gif");
      $("#cforms_result"+pos+" #trsl"+pos).show();
      $("#flView").children("#cforms_result"+pos).children(".ref_cform").css('background','#e0efd9');
      $("#mfi_grammInfo").html($("#flView").children("#cforms_result"+pos).children(".ref_cform").children(".ref_source").children(".sf_sr").html());
      },
      error: function (XMLHttpRequest, textStatus, errorThrown) {         
        $("#SiteContent_MA_trasnlform_divResult").hide();
        $("#divFullWordResult").show(); 
        $("#divFullWordResult").html(XMLHttpRequest);
        //_gaq.push(['_setCustomVar',5,'Error',,3]);
      }





     
    }); 
 }
 else{ 
   $("#megaFullInfo").dialog('open');
   $("#cforms_result"+pos+" .v_img img").attr("src","/images/common/tr_op.gif");
   $("#cforms_result"+pos+" #trsl"+pos).show();
   $("#mfi_translate .ref_cform").css('background','Transparent');
   $("#flView").children("#cforms_result"+pos).children(".ref_cform").css('background','#e0efd9');
   $("#mfi_grammInfo").html($("#flView").children("#cforms_result"+pos).children(".ref_cform").children(".ref_source").children(".sf_sr").html());
   fullWordInfo=1; 
 }
}//ShowFullERRE

//function ShowFullWRef(){ 
function ShowFullWRef(key, dir, pos){ 
  if (!getFullWRef){
    var wrd=rtrim($("#SiteContent_sourceText").val());
    var wfga = wrd;
    wrd = encodeURIComponent(wrd).split("'").join("\\'");
    //var wrd = encodeURIComponent(lastTranslation).split("'").join("\\'");
    if (dir=="") {dir=GetDir();}
    var iLang = "ru"; 
    var copyHeadWord="";
    $("#shortRLink a").focus();
    $("#al_fullWR").show();
    $.ajax({
        type: "POST",
        contentType: "application/json; charset=utf-8",
        url: "/services/TranslationService.asmx/GetFullWordInfo",
        data: "{ word:'"+ wrd +"', dirCode:'"+ dir +"', lang:'"+ iLang +"', key:'"+key+"', ts:'"+TS+"', isDict:'false'}", 
        dataType: "json",
        success: function(res){
        var result=GetAjaxResult(res);   
        TS = "MainSite";
        var tmp = "";
        tmp = result.resStr;
        code = result.resCode;
        if (result.isComplete==false) 
        { 
            $.ajax({
            type: "POST",
            contentType: "application/json; charset=utf-8",
            url: "/services/TranslationService.asmx/GetFullWordInfoRestInfo",
            data: "{ resCode:'"+ code +"'}", 
            dataType: "json",
            async: false,
            success: function(result){
                result=GetAjaxResult(result);      
                tmp = tmp + result.resStr;           
            },
            error: function (XMLHttpRequest, textStatus, errorThrown) { 
                result.isComplete=true;                    
            }      
         });
        }
        getFullWRef=true; fullWordInfo=1;
        $("#divFullWordResult").html( copyHeadWord + tmp);
        $("#al_fullWR").hide();
        //ParseFull(tmp);
        $("#translationResult").hide();
        $("#divFullWordResult").show(); 
        
         _gaq.push(['_setCustomVar',1,'Template',$("#template").val(),3]);
        _gaq.push(['_setCustomVar',2,'SrcLang',langConvertor(dir[0]),3]);
        _gaq.push(['_setCustomVar',3,'TgtLang',langConvertor(dir[1]),3]);  
        _gaq.push(['_setCustomVar',4,'UserLang',langConvertor(GetDir()[0])+"-"+langConvertor(GetDir()[1]),3]);
        
        _gaq.push(['_trackEvent', 'Translate', 'FWord', wfga, wfga.length]);

        },
        error: function (XMLHttpRequest, textStatus, errorThrown) { 
        alert("Error ShowFullWRef");
        $("#translationResult").hide();
        $("#divFullWordResult").show(); 
        }
     });
  }
  else
  { 
   $("#translationResult").hide();
   $("#divFullWordResult").show();
   fullWordInfo=1; 
  }
}//ShowFull


function linkToDict(reg){

    _gaq.push(['_trackEvent', 'Link', 'Dictionary', reg]); 
    //console.log(reg);
}


function ShowShortWRef(){
   fullWordInfo=0;
   $("#divFullWordResult").hide(); 
   $("#translationResult").show();
}

function ParseFull(tmp){
 $.ajax({
    type: "POST",
    contentType: "application/json; charset=utf-8",
    url: "/services/UtilsService.asmx/ParseFullWordDiv",
    data: "{ divStr:'"+ tmp +"'}", 
    dataType: "json",
    success: function(result){   
    var res=GetAjaxResult(result);            
      parsedFullRes = res;
    },
    error: function (XMLHttpRequest, textStatus, errorThrown) {         
      parsedFullRes = "";
    }
 });
}//parseFull

// advert refresh
 function RefreshAdv()
   {
    $("#testIA").attr('src', '/Components/advert.html');
   }
   
function RefreshAdv_inRes()
   {
    
    $("#inResultlFrame").attr('src', '/Components/advert_ir.html');
    
    //$("#AdvInResult").show();
   }
function RefreshAdvTop()
   {
    $("#topAdvF").attr('src', '/Components/advertTop.html');
   }

function currWinHeight (){
    var windowWidth, windowHeight;
       if (self.innerHeight) { // all except Explorer
               windowWidth = self.innerWidth;
               windowHeight = self.innerHeight;
       } else if (document.documentElement && document.documentElement.clientHeight) { // Explorer 6 Strict Mode
               windowWidth = document.documentElement.clientWidth;
               windowHeight = document.documentElement.clientHeight;
       } else if (document.body) { // other Explorers
               windowWidth = document.body.clientWidth;
               windowHeight = document.body.clientHeight;
       }
    return windowHeight;
}
function showInResAdv(w,h){
//            alert($(window).width()); 
//            alert($(document).width()); 
//            alert($('#autoInfo').offset().top);
//            alert(document.body.clientHeight);
//alert(currWinHeight ());
            if ($('#autoInfo').offset().top+h > currWinHeight()) { $("#AdvInResult").css('top',currWinHeight()-$('#sourceBlock').offset().top-h-80+'px')}
             $("#AdvInResult").css('left','-10px');
            $("#inResultlFrame").attr('width',w).attr('height',h);
            $("#AdvInResult").fadeIn(4500);

    }
function setPollCookie(name, value, timeout){  
            var expires = new Date(); //var day = expires.getDate();day = day +1;
            if (timeout=="") timeout=24;
            var keep=expires.getTime()+(timeout*60*60*1000);
            expires.setTime(keep);
            var curCookie = name + "=" + value + ((expires) ? "; expires=" + expires.toGMTString() : "")+  "; path=/";
            document.cookie = curCookie;
            }

          
var pp9=null;
function VotedPoll(namePoll, timeout)
{
clearTimeout(pp9);
setPollCookie(namePoll, 'voted', timeout);
//$("#TranslationAdvertShadow").hide();
$("#AdvInResult").hide();
$("#AdvInResult").removeAttr('style');

}

function ClosedPoll(namePoll,timeout)
{
clearTimeout(pp9);
setPollCookie(namePoll, 'closed', timeout);
//$("#TranslationAdvertShadow").hide();
$("#AdvInResult").hide();
$("#AdvInResult").removeAttr('style');


}
    
function hideInResAdv(){
            $("#AdvInResult").fadeOut(500);
            $("#AdvInResult").removeAttr('style');

    }

var customEvents = {
	            _handlers : {},
	            subscribe: function(event, handler){
	               if(typeof(this._handlers[event])=="undefined")
	                   this._handlers[event]=[];
	               this._handlers[event].push(handler);
	            },
	            fire:function(event, data){
	                if(this._handlers[event]){
	                    for(var i = 0; i < this._handlers[event].length; i++){
	                        this._handlers[event][i](data);
	                    }
	                }
	            }
	    };


</script>


<div id="TNSCounter">
    <!-- tns-counter.ru -->
    <script language="JavaScript">        var img = new Image(); img.src = 'http://www.tns-counter.ru/V13a***R>' + document.referrer.replace(/\*/g, '%2a') + '*translate_ru/ru/CP1251/tmsec=translate_total/';</script>
    <noscript>
        <img src="http://www.tns-counter.ru/V13a****translate_ru/ru/CP1251/tmsec=translate_total/" width="1" height="1" alt="" />
    </noscript>
    <!-- tns-counter.ru -->
</div>
      
        <div id="catfish"></div>
        <script type="text/javascript">
            //new adriver("catfish", {sid:196839, bt:52, bn:5, pz:ar_duo1, keyword: encodeURIComponent(typeof crtg_content !== 'undefined' && crtg_content ? crtg_content : '')});
        </script>
        

<div class="wrapp">
<div style="width:0;height:0;">

<!-- Tranlate.Ru_Fly -->
<script type='text/javascript'>
    GA_googleFillSlot("Tranlate.Ru_Fly");
</script>



  
        <!-- Tranlate.Ru_topLine -->
        <script type='text/javascript'>
            GA_googleFillSlot("Translate.Ru_topLine");
        </script>


</div>

    <form method="post" action="" id="aspnetForm" ClientID="aspnetForm">
<div class="aspNetHidden">
<input type="hidden" name="__EVENTTARGET" id="__EVENTTARGET" value="" />
<input type="hidden" name="__EVENTARGUMENT" id="__EVENTARGUMENT" value="" />
<input type="hidden" name="__VIEWSTATE" id="__VIEWSTATE" value="/wEPDwUKLTU2OTI2NzUxOQ9kFgJmD2QWBGYPZBYCAhUPFgQeBHR5cGUFD3RleHQvamF2YXNjcmlwdB4JaW5uZXJodG1sBURHQV9nb29nbGVBZGRTbG90KCJjYS1wdWItNDQzNjc4OTgwMTY1NTU2MCIsICJUcmFuc2xhdGUuUnVfdG9wTGluZSIpO2QCAQ9kFgICBQ9kFgRmDxYCHwEFzNgBPGRpdiBpZD0ic2hBbGxUbXBsIiBzdHlsZT0iZmxvYXQ6cmlnaHQ7IG1hcmdpbjo3cHg7IGxpbmUtaGVpZ2h0OiAxMHB4OyI+PGEgaHJlZj0iamF2YXNjcmlwdDo7IiBvbmNsaWNrPSJqYXZhc2NyaXB0OnNob3dBbGxUZW1wbGF0ZXMoKTsiPjxpbWcgc3JjPSIvaW1hZ2VzL2NvbW1vbi9hbGxfdG1wbC5naWYiIGJvcmRlcj0iMCIgYWx0PSLQktGB0LUg0YLQtdC80LDRgtC40LrQuCIgdGl0bGU9ItCS0YHQtSDRgtC10LzQsNGC0LjQutC4Ij48L2E+PC9kaXY+DQo8ZGl2IGlkPSJrZWVwQ2xpY2tUZW1wbGF0ZSI+PC9kaXY+DQo8ZGl2IGlkPSJhbGxUZW1wbGF0ZXNCbG9jayI+PGEgaHJlZj0iamF2YXNjcmlwdDo7IiBvbmNsaWNrPSJqYXZhc2NyaXB0OmhpZGVBbGxUZW1wbGF0ZXMoKTsiPjxkaXYgY2xhc3M9ImNsb3NlIj48L2Rpdj48L2E+PGRpdiBpZD0iYWxsTGlzdCI+DQogICAgPGRpdiBjbGFzcz0iYWJvdXRUZW1wbGF0ZUwiPjxhIG9uY2xpY2s9ImphdmFzY3JpcHQ6cmV0dXJuIGZhbHNlOyIgaHJlZj0iL3QvU2Nob29sLyI+PGltZyB0bXBsbmFtZT0iZGVmYXVsdCIgc3JjPSIvaW1hZ2VzL3RpY29ucy9kZWZhdWx0LmdpZiIgd2lkdGg9IjI2IiBoZWlnaHQ9IjI2IiBib3JkZXI9IjAiIGFsaWduPSJsZWZ0Ij48c3BhbiBjbGFzcz0idGVtcGxhdGVOYW1lIiBpZD0iYWJfU2Nob29sIj7QntCx0YDQsNC30L7QstCw0L3QuNC1OiDQr9C30YvQutC4PC9zcGFuPjxzcGFuIGNsYXNzPSJ0ZW1wbGF0ZURlc2N0aXB0aW9uIj7Qn9C10YDQtdCy0L7QtCDQvNCw0YLQtdGA0LjQsNC70L7QsiDQv9C+INCz0YDQsNC80LzQsNGC0LjQutC1LCDQtNC40LDQu9C+0LPQvtCyLCDRgtC+0L/QuNC60L7Qsiwg0YPQv9GA0LDQttC90LXQvdC40Lkg0LjQtyDRg9GH0LXQsdC90LjQutC+0LIuPC9zcGFuPjwvYT48L2Rpdj4NCiAgICA8ZGl2IGNsYXNzPSJhYm91dFRlbXBsYXRlTCI+PGEgb25jbGljaz0iamF2YXNjcmlwdDpyZXR1cm4gZmFsc2U7IiBocmVmPSIvdC9IdW1hbml0aWVzLyI+PGltZyB0bXBsbmFtZT0iZGVmYXVsdCIgc3JjPSIvaW1hZ2VzL3RpY29ucy9kZWZhdWx0LmdpZiIgd2lkdGg9IjI2IiBoZWlnaHQ9IjI2IiBib3JkZXI9IjAiIGFsaWduPSJsZWZ0Ij48c3BhbiBjbGFzcz0idGVtcGxhdGVOYW1lIiBpZD0iYWJfSHVtYW5pdGllcyI+0J7QsdGA0LDQt9C+0LLQsNC90LjQtTog0JPRg9C80LDQvdC40YLQsNGA0L3Ri9C1INC90LDRg9C60Lg8L3NwYW4+PHNwYW4gY2xhc3M9InRlbXBsYXRlRGVzY3RpcHRpb24iPtCf0YDQsNCy0L4sINC40YHRgtC+0YDQuNGPLCDQu9C40YLQtdGA0LDRgtGD0YDQsCwg0Y3QutC+0L3QvtC80LjQutCwLCDRgNC10LvQuNCz0LjRjy48L3NwYW4+PC9hPjwvZGl2Pg0KICAgIDxkaXYgY2xhc3M9ImFib3V0VGVtcGxhdGVMIj48YSBvbmNsaWNrPSJqYXZhc2NyaXB0OnJldHVybiBmYWxzZTsiIGhyZWY9Ii90L05hdHVyYWwvIj48aW1nIHRtcGxuYW1lPSJkZWZhdWx0IiBzcmM9Ii9pbWFnZXMvdGljb25zL2RlZmF1bHQuZ2lmIiB3aWR0aD0iMjYiIGhlaWdodD0iMjYiIGJvcmRlcj0iMCIgYWxpZ249ImxlZnQiPjxzcGFuIGNsYXNzPSJ0ZW1wbGF0ZU5hbWUiIGlkPSJhYl9OYXR1cmFsIj7QntCx0YDQsNC30L7QstCw0L3QuNC1OiDQldGB0YLQtdGB0YLQstC10L3QvdGL0LUg0L3QsNGD0LrQuDwvc3Bhbj48c3BhbiBjbGFzcz0idGVtcGxhdGVEZXNjdGlwdGlvbiI+0KXQuNC80LjRjywg0YTQuNC30LjQutCwLCDQvNC10LTQuNGG0LjQvdCwLCDQsdC40L7Qu9C+0LPQuNGPLCDRjdC60L7Qu9C+0LPQuNGPLjwvc3Bhbj48L2E+PC9kaXY+DQogICAgPGRpdiBjbGFzcz0iYWJvdXRUZW1wbGF0ZUwiPjxhIG9uY2xpY2s9ImphdmFzY3JpcHQ6cmV0dXJuIGZhbHNlOyIgaHJlZj0iL3QvUGVyc29uYWxDb3JyZXNwb25kZW5jZS8iPjxpbWcgdG1wbG5hbWU9ImRlZmF1bHQiIHNyYz0iL2ltYWdlcy90aWNvbnMvZGVmYXVsdC5naWYiIHdpZHRoPSIyNiIgaGVpZ2h0PSIyNiIgYm9yZGVyPSIwIiBhbGlnbj0ibGVmdCI+PHNwYW4gY2xhc3M9InRlbXBsYXRlTmFtZSIgaWQ9ImFiX1BlcnNvbmFsQ29ycmVzcG9uZGVuY2UiPtCe0LHRidC10L3QuNC1OiDQm9C40YfQvdCw0Y8g0L/QtdGA0LXQv9C40YHQutCwPC9zcGFuPjxzcGFuIGNsYXNzPSJ0ZW1wbGF0ZURlc2N0aXB0aW9uIj7QntCx0YnQtdC90LjQtSDQsiDQvNC10YHRgdC10L3QtNC20LXRgNCw0YUsINGH0LDRgtCw0YUsINC70LjRh9C90LDRjyDQv9C10YDQtdC/0LjRgdC60LAuPC9zcGFuPjwvYT48L2Rpdj4NCiAgICA8ZGl2IGNsYXNzPSJhYm91dFRlbXBsYXRlTCI+PGEgb25jbGljaz0iamF2YXNjcmlwdDpyZXR1cm4gZmFsc2U7IiBocmVmPSIvdC9CdXNpbmVzc0NvcnJlc3BvbmRlbmNlLyI+PGltZyB0bXBsbmFtZT0iZGVmYXVsdCIgc3JjPSIvaW1hZ2VzL3RpY29ucy9kZWZhdWx0LmdpZiIgd2lkdGg9IjI2IiBoZWlnaHQ9IjI2IiBib3JkZXI9IjAiIGFsaWduPSJsZWZ0Ij48c3BhbiBjbGFzcz0idGVtcGxhdGVOYW1lIiBpZD0iYWJfQnVzaW5lc3NDb3JyZXNwb25kZW5jZSI+0J7QsdGJ0LXQvdC40LU6INCU0LXQu9C+0LLQsNGPINC/0LXRgNC10L/QuNGB0LrQsDwvc3Bhbj48c3BhbiBjbGFzcz0idGVtcGxhdGVEZXNjdGlwdGlvbiI+0J7RhNC40YbQuNCw0LvRjNC90LDRjyDQv9C10YDQtdC/0LjRgdC60LAg0L/QviDQstC+0L/RgNC+0YHQsNC8INCx0LjQt9C90LXRgdCwLjwvc3Bhbj48L2E+PC9kaXY+DQogICAgPGRpdiBjbGFzcz0iYWJvdXRUZW1wbGF0ZUwiPjxhIG9uY2xpY2s9ImphdmFzY3JpcHQ6cmV0dXJuIGZhbHNlOyIgaHJlZj0iL3QvTG92ZUFuZERhdGluZy8iPjxpbWcgdG1wbG5hbWU9ImRlZmF1bHQiIHNyYz0iL2ltYWdlcy90aWNvbnMvZGVmYXVsdC5naWYiIHdpZHRoPSIyNiIgaGVpZ2h0PSIyNiIgYm9yZGVyPSIwIiBhbGlnbj0ibGVmdCI+PHNwYW4gY2xhc3M9InRlbXBsYXRlTmFtZSIgaWQ9ImFiX0xvdmVBbmREYXRpbmciPtCe0LHRidC10L3QuNC1OiDQl9C90LDQutC+0LzRgdGC0LLQsDwvc3Bhbj48c3BhbiBjbGFzcz0idGVtcGxhdGVEZXNjdGlwdGlvbiI+0J/QvtC40YHQuiDQv9Cw0YDRiyDQvdCwINGB0LDQudGC0LDRhSDQt9C90LDQutC+0LzRgdGC0LIsINC/0LXRgNC10L/QuNGB0LrQsCwg0LvRjtCx0L7QstGMINC4INC00YDRg9C20LHQsC48L3NwYW4+PC9hPjwvZGl2Pg0KICAgIDxkaXYgY2xhc3M9ImFib3V0VGVtcGxhdGVMIj48YSBvbmNsaWNrPSJqYXZhc2NyaXB0OnJldHVybiBmYWxzZTsiIGhyZWY9Ii90L1NvY2lhbC8iPjxpbWcgdG1wbG5hbWU9ImRlZmF1bHQiIHNyYz0iL2ltYWdlcy90aWNvbnMvZGVmYXVsdC5naWYiIHdpZHRoPSIyNiIgaGVpZ2h0PSIyNiIgYm9yZGVyPSIwIiBhbGlnbj0ibGVmdCI+PHNwYW4gY2xhc3M9InRlbXBsYXRlTmFtZSIgaWQ9ImFiX1NvY2lhbCI+0J7QsdGJ0LXQvdC40LU6INCh0L7RhtC40LDQu9GM0L3Ri9C1INGB0LXRgtC4PC9zcGFuPjxzcGFuIGNsYXNzPSJ0ZW1wbGF0ZURlc2N0aXB0aW9uIj7QmNC90YLQtdGA0YTQtdC50YEg0YHQvtGG0LjQsNC70YzQvdGL0YUg0YHQtdGC0LXQuSBUd2l0dGVyLCBGYWNlYm9vaywgR29vZ2xlKy4g0J7QsdGJ0LXQvdC40LUg0LIg0L3QuNGFLjwvc3Bhbj48L2E+PC9kaXY+DQogICAgPGRpdiBjbGFzcz0iYWJvdXRUZW1wbGF0ZUwiPjxhIG9uY2xpY2s9ImphdmFzY3JpcHQ6cmV0dXJuIGZhbHNlOyIgaHJlZj0iL3QvQ29tcHV0ZXIvIj48aW1nIHRtcGxuYW1lPSJkZWZhdWx0IiBzcmM9Ii9pbWFnZXMvdGljb25zL2RlZmF1bHQuZ2lmIiB3aWR0aD0iMjYiIGhlaWdodD0iMjYiIGJvcmRlcj0iMCIgYWxpZ249ImxlZnQiPjxzcGFuIGNsYXNzPSJ0ZW1wbGF0ZU5hbWUiIGlkPSJhYl9Db21wdXRlciI+0KLQtdGF0L3QuNC60LA6INCa0L7QvNC/0YzRjtGC0LXRgNGLPC9zcGFuPjxzcGFuIGNsYXNzPSJ0ZW1wbGF0ZURlc2N0aXB0aW9uIj7QotC10YXQvdC40YfQtdGB0LrQuNC5INC/0LXRgNC10LLQvtC0OiDQv9GA0L7Qs9GA0LDQvNC80LjRgNC+0LLQsNC90LjQtSwg0YHRgtGA0YPQutGC0YPRgNCwINCf0JosINC40L3RgtC10YDQvdC10YIsINC/0YDQvtC00YPQutGC0YsgTWljcm9zb2Z0INC4INC00L7QutGD0LzQtdC90YLQsNGG0LjRjyBXaW5kb3dzLCDRjdC70LXQutGC0YDQvtC90LjQutCwLCDRhtC40YTRgNC+0LLQsNGPINCx0YvRgtC+0LLQsNGPINGC0LXRhdC90LjQutCwLjwvc3Bhbj48L2E+PC9kaXY+DQogICAgPGRpdiBjbGFzcz0iYWJvdXRUZW1wbGF0ZUwiPjxhIG9uY2xpY2s9ImphdmFzY3JpcHQ6cmV0dXJuIGZhbHNlOyIgaHJlZj0iL3QvQXV0b21vdGl2ZS8iPjxpbWcgdG1wbG5hbWU9ImRlZmF1bHQiIHNyYz0iL2ltYWdlcy90aWNvbnMvZGVmYXVsdC5naWYiIHdpZHRoPSIyNiIgaGVpZ2h0PSIyNiIgYm9yZGVyPSIwIiBhbGlnbj0ibGVmdCI+PHNwYW4gY2xhc3M9InRlbXBsYXRlTmFtZSIgaWQ9ImFiX0F1dG9tb3RpdmUiPtCi0LXRhdC90LjQutCwOiDQkNCy0YLQvtC80L7QsdC40LvQuDwvc3Bhbj48c3BhbiBjbGFzcz0idGVtcGxhdGVEZXNjdGlwdGlvbiI+0KLQtdGF0L3QuNGH0LXRgdC60LjQuSDQv9C10YDQtdCy0L7QtDog0L7Qv9C40YHQsNC90LjQtSDQsNCy0YLQvtC80L7QsdC40LvQtdC5LCDQuNC90YHRgtGA0YPQutGG0LjQuCwg0L7QsdGK0Y/QstC70LXQvdC40Y8g0L4g0L/QvtC60YPQv9C60LUv0L/RgNC+0LTQsNC20LUg0LDQstGC0L4sINC90L7QstC+0YHRgtC4INC40Lcg0LDQstGC0L7RgdCw0LvQvtC90L7Qsi48L3NwYW4+PC9hPjwvZGl2Pg0KICAgIDxkaXYgY2xhc3M9ImFib3V0VGVtcGxhdGVMIj48YSBvbmNsaWNrPSJqYXZhc2NyaXB0OnJldHVybiBmYWxzZTsiIGhyZWY9Ii90L0dhZGdldC8iPjxpbWcgdG1wbG5hbWU9ImRlZmF1bHQiIHNyYz0iL2ltYWdlcy90aWNvbnMvZGVmYXVsdC5naWYiIHdpZHRoPSIyNiIgaGVpZ2h0PSIyNiIgYm9yZGVyPSIwIiBhbGlnbj0ibGVmdCI+PHNwYW4gY2xhc3M9InRlbXBsYXRlTmFtZSIgaWQ9ImFiX0dhZGdldCI+0KLQtdGF0L3QuNC60LA6INCT0LDQtNC20LXRgtGLPC9zcGFuPjxzcGFuIGNsYXNzPSJ0ZW1wbGF0ZURlc2N0aXB0aW9uIj7QotC10YXQvdC40YfQtdGB0LrQuNC5INC/0LXRgNC10LLQvtC0OiDQvtC/0LjRgdCw0L3QuNC1INC90L7QstC40L3QvtC6INC/0LXRgNGB0L7QvdCw0LvRjNC90YvRhSDQvNC+0LHQuNC70YzQvdGL0YUg0YPRgdGC0YDQvtC50YHRgtCyICjRgtC10LvQtdGE0L7QvdGLLCDQv9C70LDQvdGI0LXRgtGLLCDRjdC70LXQutGC0YDQvtC90L3Ri9C1INC60L3QuNCz0LgsINC90LXRgtCx0YPQutC4LCDRg9C70YzRgtGA0LDQsdGD0LrQuCwg0L3QsNCy0LjQs9Cw0YLQvtGA0YssINC/0L7RgNGC0LDRgtC40LLQvdGL0LUg0LDRg9C00LjQvi0g0Lgg0LLQuNC00LXQvtC/0YDQvtC40LPRgNGL0LLQsNGC0LXQu9C4KS48L3NwYW4+PC9hPjwvZGl2Pg0KICAgIDxkaXYgY2xhc3M9ImFib3V0VGVtcGxhdGVMIj48YSBvbmNsaWNrPSJqYXZhc2NyaXB0OnJldHVybiBmYWxzZTsiIGhyZWY9Ii90L1RyYXZlbHMvIj48aW1nIHRtcGxuYW1lPSJkZWZhdWx0IiBzcmM9Ii9pbWFnZXMvdGljb25zL2RlZmF1bHQuZ2lmIiB3aWR0aD0iMjYiIGhlaWdodD0iMjYiIGJvcmRlcj0iMCIgYWxpZ249ImxlZnQiPjxzcGFuIGNsYXNzPSJ0ZW1wbGF0ZU5hbWUiIGlkPSJhYl9UcmF2ZWxzIj7Qn9GD0YLQtdGI0LXRgdGC0LLQuNGPPC9zcGFuPjxzcGFuIGNsYXNzPSJ0ZW1wbGF0ZURlc2N0aXB0aW9uIj7QkdGA0L7QvdC40YDQvtCy0LDQvdC40LUg0L7RgtC10LvQtdC5LCDQsNCy0LjQsC0g0Lgg0LYv0LQg0LHQuNC70LXRgtGLLCDQsNC90LrQtdGC0Ysg0L3QsCDQstC40LfRgywg0L/RgNC40LPQu9Cw0YjQtdC90LjRjywg0YTQvtGA0LzRiy3Qt9Cw0Y/QstC70LXQvdC40Y8uPC9zcGFuPjwvYT48L2Rpdj4NCiAgICA8ZGl2IGNsYXNzPSJhYm91dFRlbXBsYXRlTCI+PGEgb25jbGljaz0iamF2YXNjcmlwdDpyZXR1cm4gZmFsc2U7IiBocmVmPSIvdC9PbmxpbmVzLyI+PGltZyB0bXBsbmFtZT0iZGVmYXVsdCIgc3JjPSIvaW1hZ2VzL3RpY29ucy9kZWZhdWx0LmdpZiIgd2lkdGg9IjI2IiBoZWlnaHQ9IjI2IiBib3JkZXI9IjAiIGFsaWduPSJsZWZ0Ij48c3BhbiBjbGFzcz0idGVtcGxhdGVOYW1lIiBpZD0iYWJfT25saW5lcyI+0J7QvdC70LDQudC9LdC/0L7QutGD0L/QutC4PC9zcGFuPjxzcGFuIGNsYXNzPSJ0ZW1wbGF0ZURlc2N0aXB0aW9uIj7QntC/0LjRgdCw0L3QuNGPINGB0L/QvtGB0L7QsdC+0LIg0LTQvtGB0YLQsNCy0LrQuCDQuCDQvtC/0LvQsNGC0Ysg0LIg0LjQvdGC0LXRgNC90LXRgi3QvNCw0LPQsNC30LjQvdCw0YUsINC/0LjRgdGM0LzQsCDRgSDRg9Cy0LXQtNC+0LzQu9C10L3QuNGP0LzQuCwg0YHQtdGA0LLQuNGB0L3Ri9C1INGB0L7QvtCx0YnQtdC90LjRjyDQuCDRjdC70LXQvNC10L3RgtGLINC40L3RgtC10YDRhNC10LnRgdCwLCDQvtC/0LjRgdCw0L3QuNGPINGC0L7QstCw0YDQvtCyLjwvc3Bhbj48L2E+PC9kaXY+DQogICAgPGRpdiBjbGFzcz0iYWJvdXRUZW1wbGF0ZUwiPjxhIG9uY2xpY2s9ImphdmFzY3JpcHQ6cmV0dXJuIGZhbHNlOyIgaHJlZj0iL3QvQnVzaW5lc3MvIj48aW1nIHRtcGxuYW1lPSJkZWZhdWx0IiBzcmM9Ii9pbWFnZXMvdGljb25zL2RlZmF1bHQuZ2lmIiB3aWR0aD0iMjYiIGhlaWdodD0iMjYiIGJvcmRlcj0iMCIgYWxpZ249ImxlZnQiPjxzcGFuIGNsYXNzPSJ0ZW1wbGF0ZU5hbWUiIGlkPSJhYl9CdXNpbmVzcyI+0J/RgNC+0YfQtdC1OiDQkdC40LfQvdC10YE8L3NwYW4+PHNwYW4gY2xhc3M9InRlbXBsYXRlRGVzY3RpcHRpb24iPtCa0YDQtdC00LjRgtGLLCDQsdGD0YXRg9GH0LXRgiwg0LHQuNGA0LbQtdCy0YvQtSDQuCDRhNC40L3QsNC90YHQvtCy0YvQtSDQvtC/0LXRgNCw0YbQuNC4LCDQvdCw0LvQvtCz0L7QvtCx0LvQvtC20LXQvdC40LUsINC70L7Qs9C40YHRgtC40LrQsCwg0Y7RgNC40LTQuNGH0LXRgdC60LDRjyDQtNC+0LrRg9C80LXQvdGC0LDRhtC40Y8sINCx0LDQvdC60L7QstGB0LrQsNGPINC00LXRj9GC0LXQu9GM0L3QvtGB0YLRjC48L3NwYW4+PC9hPjwvZGl2Pg0KICAgIDxkaXYgY2xhc3M9ImFib3V0VGVtcGxhdGVMIj48YSBvbmNsaWNrPSJqYXZhc2NyaXB0OnJldHVybiBmYWxzZTsiIGhyZWY9Ii90L1Nwb3J0LyI+PGltZyB0bXBsbmFtZT0iZGVmYXVsdCIgc3JjPSIvaW1hZ2VzL3RpY29ucy9kZWZhdWx0LmdpZiIgd2lkdGg9IjI2IiBoZWlnaHQ9IjI2IiBib3JkZXI9IjAiIGFsaWduPSJsZWZ0Ij48c3BhbiBjbGFzcz0idGVtcGxhdGVOYW1lIiBpZD0iYWJfU3BvcnQiPtCf0YDQvtGH0LXQtTog0KHQv9C+0YDRgjwvc3Bhbj48c3BhbiBjbGFzcz0idGVtcGxhdGVEZXNjdGlwdGlvbiI+0KHQv9C+0YDRgtC40LLQvdGL0LUg0L3QvtCy0L7RgdGC0LgsINCw0L3QsNC70LjRgtC40LrQsCDQviDRh9C10LzQv9C40L7QvdCw0YLQsNGFINC4INGB0L/QvtGA0YLQuNCy0L3Ri9GFINGB0L7QsdGL0YLQuNGP0YUsINGE0L7RgNGD0LzRiyDQuCDQsdC70L7Qs9C4Ljwvc3Bhbj48L2E+PC9kaXY+DQogICAgPGRpdiBjbGFzcz0iYWJvdXRUZW1wbGF0ZUwiPjxhIG9uY2xpY2s9ImphdmFzY3JpcHQ6cmV0dXJuIGZhbHNlOyIgaHJlZj0iL3QvRm9vdGJhbGwvIj48aW1nIHRtcGxuYW1lPSJkZWZhdWx0IiBzcmM9Ii9pbWFnZXMvdGljb25zL2RlZmF1bHQuZ2lmIiB3aWR0aD0iMjYiIGhlaWdodD0iMjYiIGJvcmRlcj0iMCIgYWxpZ249ImxlZnQiPjxzcGFuIGNsYXNzPSJ0ZW1wbGF0ZU5hbWUiIGlkPSJhYl9Gb290YmFsbCI+0J/RgNC+0YfQtdC1OiDQpNGD0YLQsdC+0Ls8L3NwYW4+PHNwYW4gY2xhc3M9InRlbXBsYXRlRGVzY3RpcHRpb24iPtCk0YPRgtCx0L7Qu9GM0L3Ri9C1INGC0LXRgNC80LjQvdGLLCDQuNC80LXQvdCwINGD0YfQsNGB0YLQvdC40LrQvtCyINC4INGC0YDQtdC90LXRgNC+0LIsINC90LDQt9Cy0LDQvdC40Y8g0YHRgtCw0LTQuNC+0L3QvtCyINCn0JwtMjAxNC48L3NwYW4+PC9hPjwvZGl2Pg0KICAgIDxkaXYgY2xhc3M9ImFib3V0VGVtcGxhdGVMIj48YSBvbmNsaWNrPSJqYXZhc2NyaXB0OnJldHVybiBmYWxzZTsiIGhyZWY9Ii90L0N1bGluYXJ5LyI+PGltZyB0bXBsbmFtZT0iZGVmYXVsdCIgc3JjPSIvaW1hZ2VzL3RpY29ucy9kZWZhdWx0LmdpZiIgd2lkdGg9IjI2IiBoZWlnaHQ9IjI2IiBib3JkZXI9IjAiIGFsaWduPSJsZWZ0Ij48c3BhbiBjbGFzcz0idGVtcGxhdGVOYW1lIiBpZD0iYWJfQ3VsaW5hcnkiPtCf0YDQvtGH0LXQtTog0JrRg9C70LjQvdCw0YDQuNGPPC9zcGFuPjxzcGFuIGNsYXNzPSJ0ZW1wbGF0ZURlc2N0aXB0aW9uIj7Qn9C10YDQtdCy0L7QtCDQutGD0LvQuNC90LDRgNC90YvRhSDRgNC10YbQtdC/0YLQvtCyLCDQvNC10L3RjiDRgNC10YHRgtC+0YDQsNC90L7Qsi48L3NwYW4+PC9hPjwvZGl2Pg0KICAgIDxkaXYgY2xhc3M9ImFib3V0VGVtcGxhdGVMIj48YSBvbmNsaWNrPSJqYXZhc2NyaXB0OnJldHVybiBmYWxzZTsiIGhyZWY9Ii90L01lZGljaW5lLyI+PGltZyB0bXBsbmFtZT0iZGVmYXVsdCIgc3JjPSIvaW1hZ2VzL3RpY29ucy9kZWZhdWx0LmdpZiIgd2lkdGg9IjI2IiBoZWlnaHQ9IjI2IiBib3JkZXI9IjAiIGFsaWduPSJsZWZ0Ij48c3BhbiBjbGFzcz0idGVtcGxhdGVOYW1lIiBpZD0iYWJfTWVkaWNpbmUiPtCf0YDQvtGH0LXQtTog0JfQtNC+0YDQvtCy0YzQtTwvc3Bhbj48c3BhbiBjbGFzcz0idGVtcGxhdGVEZXNjdGlwdGlvbiI+0KHQuNC80L/RgtC+0LzRiyDQuCDQu9C10YfQtdC90LjQtSDQsdC+0LvQtdC30L3QtdC5LCDQuNC90YTQvtGA0LzQsNGG0LjRjyDQviDQvNC10LTQuNGG0LjQvdGB0LrQuNGFINGD0YfRgNC10LbQtNC10L3QuNGP0YUsINC70LjRgtC10YDQsNGC0YPRgNCwINC+INC30LTQvtGA0L7QstC+0Lwg0L7QsdGA0LDQt9C1INC20LjQt9C90LgsINGB0L/QtdGG0LjQsNC70YzQvdCw0Y8g0LvQuNGC0LXRgNCw0YLRg9GA0LAg0Lgg0L3QsNGD0YfQvdGL0LUg0YHRgtCw0YLRjNC4INC/0L4g0LzQtdC00LjRhtC40L3QtS48L3NwYW4+PC9hPjwvZGl2Pg0KICAgIDxkaXYgY2xhc3M9ImFib3V0VGVtcGxhdGVMIj48YSBvbmNsaWNrPSJqYXZhc2NyaXB0OnJldHVybiBmYWxzZTsiIGhyZWY9Ii90L011c2ljLyI+PGltZyB0bXBsbmFtZT0iZGVmYXVsdCIgc3JjPSIvaW1hZ2VzL3RpY29ucy9kZWZhdWx0LmdpZiIgd2lkdGg9IjI2IiBoZWlnaHQ9IjI2IiBib3JkZXI9IjAiIGFsaWduPSJsZWZ0Ij48c3BhbiBjbGFzcz0idGVtcGxhdGVOYW1lIiBpZD0iYWJfTXVzaWMiPtCf0YDQvtGH0LXQtTog0J/QtdGB0L3QuDwvc3Bhbj48c3BhbiBjbGFzcz0idGVtcGxhdGVEZXNjdGlwdGlvbiI+0J/QtdGA0LXQstC+0LQg0L/QtdGB0LXQvSwg0YHRgtCw0YLQtdC5INC/0L4g0YLQtdC+0YDQuNC4INC80YPQt9GL0LrQuCDQuCDQvNGD0LfRi9C60LDQu9GM0L3Ri9GFINC20LDQvdGA0L7Qsi48L3NwYW4+PC9hPjwvZGl2Pg0KICAgIDxkaXYgY2xhc3M9ImFib3V0VGVtcGxhdGVMIj48YSBvbmNsaWNrPSJqYXZhc2NyaXB0OnJldHVybiBmYWxzZTsiIGhyZWY9Ii90L0dlbmVyYWwvIj48aW1nIHRtcGxuYW1lPSJkZWZhdWx0IiBzcmM9Ii9pbWFnZXMvdGljb25zL2RlZmF1bHQuZ2lmIiB3aWR0aD0iMjYiIGhlaWdodD0iMjYiIGJvcmRlcj0iMCIgYWxpZ249ImxlZnQiPjxzcGFuIGNsYXNzPSJ0ZW1wbGF0ZU5hbWUiIGlkPSJhYl9HZW5lcmFsIj7Qn9GA0L7Rh9C10LU6INCR0LXQtyDRgtC10LzRizwvc3Bhbj48c3BhbiBjbGFzcz0idGVtcGxhdGVEZXNjdGlwdGlvbiI+0JLRgdC1INC+0YHRgtCw0LvRjNC90L7QtS48L3NwYW4+PC9hPjwvZGl2Pg0KICA8L2Rpdj4NCiAgPGRpdiBpZD0iZkNvbCI+PC9kaXY+DQogIDxkaXYgaWQ9InNDb2wiPjwvZGl2Pg0KICA8ZGl2IGlkPSJ0Q29sIj48L2Rpdj4NCiAgPGRpdiBpZD0idXNlcl90ZW1wbGF0ZV9zcGFuIj4NCiAgICA8aDM+0J/RgNC10LTQu9C+0LbQuNGC0LUg0YHQstC+0Y4g0YLQtdC80LDRgtC40LrRgzwvaDM+DQogICAgPHA+0KHQsNC80YvQtSDQstC+0YHRgtGA0LXQsdC+0LLQsNC90L3Ri9C1INCy0LDRgNC40LDQvdGC0Ysg0LHRg9C00YPRgiDQv9C+0LTQutC70Y7Rh9C10L3RiyDQsiDQvdC+0LLRi9GFINCy0LXRgNGB0LjRj9GFINGB0LDQudGC0LAuPC9wPjxzcGFuIHN0eWxlPSJkaXNwbGF5Om5vbmU7Ij48c2NyaXB0PgogICAgICAgICAgLy9jcmVhdGVVc2VyVGVtcGxhdGVzQmxvY2tUKCk7CiAgICAgICAgPC9zY3JpcHQ+PC9zcGFuPjxsYWJlbCBmb3I9InV0ZW1wbGF0ZXNfdSI+0KHQstC+0Y8g0YLQtdC80LDRgtC40LrQsDwvbGFiZWw+PGJyPjxzcGFuIHN0eWxlPSJkaXNwbGF5OmJsb2NrOyI+PGRpdiBjbGFzcz0iaW5wdXQxIiBzdHlsZT0id2lkdGg6IDE4MHB4OyI+PGlucHV0IHR5cGU9InRleHQiIG5hbWU9InV0ZW1wbGF0ZXNpIiBpZD0idXRlbXBsYXRlc2kiIHZhbHVlPSIiIG9uZm9jdXM9ImphdmFzY3JpcHQ6Y2hlY2tlZFVUKCk7IiBzdHlsZT0iYmFja2dyb3VuZC1jb2xvcjpXaGl0ZTsiIG1heGxlbmd0aD0iNTAiPjwvZGl2Pjxicj48aW5wdXQgbmFtZT0iT2siIGlkPSJhZGRVVEJ0dG1JZCIgdHlwZT0iYnV0dG9uIiB2YWx1ZT0i0J7RgtC/0YDQsNCy0LjRgtGMIiBvbmNsaWNrPSJqYXZhc2NyaXB0OnNhdmVVVGVtcGxhdGVzKCk7IiBjbGFzcz0iYWRkVVRCdHRtIj48L3NwYW4+PC9kaXY+DQo8L2Rpdj4NCjxkaXYgY2xhc3M9InRlbXBsYXRlSGVhZGVyIiBpZD0ic2Nob29sVGVtcGwiPg0KICA8ZGl2IGNsYXNzPSJ0ZW1wbGF0ZXNCbG9jayI+DQogICAgPGRpdiBjbGFzcz0iYWJvdXRUZW1wbGF0ZSI+PGEgb25jbGljaz0iamF2YXNjcmlwdDpyZXR1cm4gZmFsc2U7IiBocmVmPSIvdC9TY2hvb2wvIj48aW1nIHRtcGxuYW1lPSJkZWZhdWx0IiBzcmM9Ii9pbWFnZXMvdGljb25zL2RlZmF1bHQuZ2lmIiB3aWR0aD0iMjYiIGhlaWdodD0iMjYiIGJvcmRlcj0iMCIgYWxpZ249ImxlZnQiPjxzcGFuIGNsYXNzPSJ0ZW1wbGF0ZU5hbWUiIGlkPSJTY2hvb2wiPtCe0LHRgNCw0LfQvtCy0LDQvdC40LU6INCv0LfRi9C60Lg8L3NwYW4+PHNwYW4gY2xhc3M9InRlbXBsYXRlRGVzY3RpcHRpb24iPtCf0LXRgNC10LLQvtC0INC80LDRgtC10YDQuNCw0LvQvtCyINC/0L4g0LPRgNCw0LzQvNCw0YLQuNC60LUsINC00LjQsNC70L7Qs9C+0LIsINGC0L7Qv9C40LrQvtCyLCDRg9C/0YDQsNC20L3QtdC90LjQuSDQuNC3INGD0YfQtdCx0L3QuNC60L7Qsi48L3NwYW4+PC9hPjwvZGl2Pg0KICAgIDxkaXYgY2xhc3M9ImJ0d1RlbXBsYXRlIj48L2Rpdj4NCiAgICA8ZGl2IGNsYXNzPSJhYm91dFRlbXBsYXRlIj48YSBvbmNsaWNrPSJqYXZhc2NyaXB0OnJldHVybiBmYWxzZTsiIGhyZWY9Ii90L0h1bWFuaXRpZXMvIj48aW1nIHRtcGxuYW1lPSJkZWZhdWx0IiBzcmM9Ii9pbWFnZXMvdGljb25zL2RlZmF1bHQuZ2lmIiB3aWR0aD0iMjYiIGhlaWdodD0iMjYiIGJvcmRlcj0iMCIgYWxpZ249ImxlZnQiPjxzcGFuIGNsYXNzPSJ0ZW1wbGF0ZU5hbWUiIGlkPSJIdW1hbml0aWVzIj7QntCx0YDQsNC30L7QstCw0L3QuNC1OiDQk9GD0LzQsNC90LjRgtCw0YDQvdGL0LUg0L3QsNGD0LrQuDwvc3Bhbj48c3BhbiBjbGFzcz0idGVtcGxhdGVEZXNjdGlwdGlvbiI+0J/RgNCw0LLQviwg0LjRgdGC0L7RgNC40Y8sINC70LjRgtC10YDQsNGC0YPRgNCwLCDRjdC60L7QvdC+0LzQuNC60LAsINGA0LXQu9C40LPQuNGPLjwvc3Bhbj48L2E+PC9kaXY+DQogICAgPGRpdiBjbGFzcz0iYnR3VGVtcGxhdGUiPjwvZGl2Pg0KICAgIDxkaXYgY2xhc3M9ImFib3V0VGVtcGxhdGUiPjxhIG9uY2xpY2s9ImphdmFzY3JpcHQ6cmV0dXJuIGZhbHNlOyIgaHJlZj0iL3QvTmF0dXJhbC8iPjxpbWcgdG1wbG5hbWU9ImRlZmF1bHQiIHNyYz0iL2ltYWdlcy90aWNvbnMvZGVmYXVsdC5naWYiIHdpZHRoPSIyNiIgaGVpZ2h0PSIyNiIgYm9yZGVyPSIwIiBhbGlnbj0ibGVmdCI+PHNwYW4gY2xhc3M9InRlbXBsYXRlTmFtZSIgaWQ9Ik5hdHVyYWwiPtCe0LHRgNCw0LfQvtCy0LDQvdC40LU6INCV0YHRgtC10YHRgtCy0LXQvdC90YvQtSDQvdCw0YPQutC4PC9zcGFuPjxzcGFuIGNsYXNzPSJ0ZW1wbGF0ZURlc2N0aXB0aW9uIj7QpdC40LzQuNGPLCDRhNC40LfQuNC60LAsINC80LXQtNC40YbQuNC90LAsINCx0LjQvtC70L7Qs9C40Y8sINGN0LrQvtC70L7Qs9C40Y8uPC9zcGFuPjwvYT48L2Rpdj4NCiAgICA8ZGl2IGNsYXNzPSJidHdUZW1wbGF0ZSI+PC9kaXY+DQogIDwvZGl2PjxzcGFuIGNsYXNzPSJibG9ja1RlbXBsYXRlTmFtZSBleHQiPtCe0LHRgNCw0LfQvtCy0LDQvdC40LU6INCv0LfRi9C60Lg8L3NwYW4+PC9kaXY+DQo8ZGl2IGNsYXNzPSJ0ZW1wbGF0ZUhlYWRlciIgaWQ9InJlbGF0aW9uc1RlbXBsIj4NCiAgPGRpdiBjbGFzcz0idGVtcGxhdGVzQmxvY2siPg0KICAgIDxkaXYgY2xhc3M9ImFib3V0VGVtcGxhdGUiPjxhIG9uY2xpY2s9ImphdmFzY3JpcHQ6cmV0dXJuIGZhbHNlOyIgaHJlZj0iL3QvUGVyc29uYWxDb3JyZXNwb25kZW5jZS8iPjxpbWcgdG1wbG5hbWU9ImRlZmF1bHQiIHNyYz0iL2ltYWdlcy90aWNvbnMvZGVmYXVsdC5naWYiIHdpZHRoPSIyNiIgaGVpZ2h0PSIyNiIgYm9yZGVyPSIwIiBhbGlnbj0ibGVmdCI+PHNwYW4gY2xhc3M9InRlbXBsYXRlTmFtZSIgaWQ9IlBlcnNvbmFsQ29ycmVzcG9uZGVuY2UiPtCe0LHRidC10L3QuNC1OiDQm9C40YfQvdCw0Y8g0L/QtdGA0LXQv9C40YHQutCwPC9zcGFuPjxzcGFuIGNsYXNzPSJ0ZW1wbGF0ZURlc2N0aXB0aW9uIj7QntCx0YnQtdC90LjQtSDQsiDQvNC10YHRgdC10L3QtNC20LXRgNCw0YUsINGH0LDRgtCw0YUsINC70LjRh9C90LDRjyDQv9C10YDQtdC/0LjRgdC60LAuPC9zcGFuPjwvYT48L2Rpdj4NCiAgICA8ZGl2IGNsYXNzPSJidHdUZW1wbGF0ZSI+PC9kaXY+DQogICAgPGRpdiBjbGFzcz0iYWJvdXRUZW1wbGF0ZSI+PGEgb25jbGljaz0iamF2YXNjcmlwdDpyZXR1cm4gZmFsc2U7IiBocmVmPSIvdC9CdXNpbmVzc0NvcnJlc3BvbmRlbmNlLyI+PGltZyB0bXBsbmFtZT0iZGVmYXVsdCIgc3JjPSIvaW1hZ2VzL3RpY29ucy9kZWZhdWx0LmdpZiIgd2lkdGg9IjI2IiBoZWlnaHQ9IjI2IiBib3JkZXI9IjAiIGFsaWduPSJsZWZ0Ij48c3BhbiBjbGFzcz0idGVtcGxhdGVOYW1lIiBpZD0iQnVzaW5lc3NDb3JyZXNwb25kZW5jZSI+0J7QsdGJ0LXQvdC40LU6INCU0LXQu9C+0LLQsNGPINC/0LXRgNC10L/QuNGB0LrQsDwvc3Bhbj48c3BhbiBjbGFzcz0idGVtcGxhdGVEZXNjdGlwdGlvbiI+0J7RhNC40YbQuNCw0LvRjNC90LDRjyDQv9C10YDQtdC/0LjRgdC60LAg0L/QviDQstC+0L/RgNC+0YHQsNC8INCx0LjQt9C90LXRgdCwLjwvc3Bhbj48L2E+PC9kaXY+DQogICAgPGRpdiBjbGFzcz0iYnR3VGVtcGxhdGUiPjwvZGl2Pg0KICAgIDxkaXYgY2xhc3M9ImFib3V0VGVtcGxhdGUiPjxhIG9uY2xpY2s9ImphdmFzY3JpcHQ6cmV0dXJuIGZhbHNlOyIgaHJlZj0iL3QvTG92ZUFuZERhdGluZy8iPjxpbWcgdG1wbG5hbWU9ImRlZmF1bHQiIHNyYz0iL2ltYWdlcy90aWNvbnMvZGVmYXVsdC5naWYiIHdpZHRoPSIyNiIgaGVpZ2h0PSIyNiIgYm9yZGVyPSIwIiBhbGlnbj0ibGVmdCI+PHNwYW4gY2xhc3M9InRlbXBsYXRlTmFtZSIgaWQ9IkxvdmVBbmREYXRpbmciPtCe0LHRidC10L3QuNC1OiDQl9C90LDQutC+0LzRgdGC0LLQsDwvc3Bhbj48c3BhbiBjbGFzcz0idGVtcGxhdGVEZXNjdGlwdGlvbiI+0J/QvtC40YHQuiDQv9Cw0YDRiyDQvdCwINGB0LDQudGC0LDRhSDQt9C90LDQutC+0LzRgdGC0LIsINC/0LXRgNC10L/QuNGB0LrQsCwg0LvRjtCx0L7QstGMINC4INC00YDRg9C20LHQsC48L3NwYW4+PC9hPjwvZGl2Pg0KICAgIDxkaXYgY2xhc3M9ImJ0d1RlbXBsYXRlIj48L2Rpdj4NCiAgICA8ZGl2IGNsYXNzPSJhYm91dFRlbXBsYXRlIj48YSBvbmNsaWNrPSJqYXZhc2NyaXB0OnJldHVybiBmYWxzZTsiIGhyZWY9Ii90L1NvY2lhbC8iPjxpbWcgdG1wbG5hbWU9ImRlZmF1bHQiIHNyYz0iL2ltYWdlcy90aWNvbnMvZGVmYXVsdC5naWYiIHdpZHRoPSIyNiIgaGVpZ2h0PSIyNiIgYm9yZGVyPSIwIiBhbGlnbj0ibGVmdCI+PHNwYW4gY2xhc3M9InRlbXBsYXRlTmFtZSIgaWQ9IlNvY2lhbCI+0J7QsdGJ0LXQvdC40LU6INCh0L7RhtC40LDQu9GM0L3Ri9C1INGB0LXRgtC4PC9zcGFuPjxzcGFuIGNsYXNzPSJ0ZW1wbGF0ZURlc2N0aXB0aW9uIj7QmNC90YLQtdGA0YTQtdC50YEg0YHQvtGG0LjQsNC70YzQvdGL0YUg0YHQtdGC0LXQuSBUd2l0dGVyLCBGYWNlYm9vaywgR29vZ2xlKy4g0J7QsdGJ0LXQvdC40LUg0LIg0L3QuNGFLjwvc3Bhbj48L2E+PC9kaXY+DQogICAgPGRpdiBjbGFzcz0iYnR3VGVtcGxhdGUiPjwvZGl2Pg0KICA8L2Rpdj48c3BhbiBjbGFzcz0iYmxvY2tUZW1wbGF0ZU5hbWUgZXh0Ij7QntCx0YnQtdC90LjQtTog0JvQuNGH0L3QsNGPINC/0LXRgNC10L/QuNGB0LrQsDwvc3Bhbj48L2Rpdj4NCjxkaXYgY2xhc3M9InRlbXBsYXRlSGVhZGVyIiBpZD0idGVjaG5pY3NUZW1wbCI+DQogIDxkaXYgY2xhc3M9InRlbXBsYXRlc0Jsb2NrIj4NCiAgICA8ZGl2IGNsYXNzPSJhYm91dFRlbXBsYXRlIj48YSBvbmNsaWNrPSJqYXZhc2NyaXB0OnJldHVybiBmYWxzZTsiIGhyZWY9Ii90L0NvbXB1dGVyLyI+PGltZyB0bXBsbmFtZT0iZGVmYXVsdCIgc3JjPSIvaW1hZ2VzL3RpY29ucy9kZWZhdWx0LmdpZiIgd2lkdGg9IjI2IiBoZWlnaHQ9IjI2IiBib3JkZXI9IjAiIGFsaWduPSJsZWZ0Ij48c3BhbiBjbGFzcz0idGVtcGxhdGVOYW1lIiBpZD0iQ29tcHV0ZXIiPtCi0LXRhdC90LjQutCwOiDQmtC+0LzQv9GM0Y7RgtC10YDRizwvc3Bhbj48c3BhbiBjbGFzcz0idGVtcGxhdGVEZXNjdGlwdGlvbiI+0KLQtdGF0L3QuNGH0LXRgdC60LjQuSDQv9C10YDQtdCy0L7QtDog0L/RgNC+0LPRgNCw0LzQvNC40YDQvtCy0LDQvdC40LUsINGB0YLRgNGD0LrRgtGD0YDQsCDQn9CaLCDQuNC90YLQtdGA0L3QtdGCLCDQv9GA0L7QtNGD0LrRgtGLIE1pY3Jvc29mdCDQuCDQtNC+0LrRg9C80LXQvdGC0LDRhtC40Y8gV2luZG93cywg0Y3Qu9C10LrRgtGA0L7QvdC40LrQsCwg0YbQuNGE0YDQvtCy0LDRjyDQsdGL0YLQvtCy0LDRjyDRgtC10YXQvdC40LrQsC48L3NwYW4+PC9hPjwvZGl2Pg0KICAgIDxkaXYgY2xhc3M9ImJ0d1RlbXBsYXRlIj48L2Rpdj4NCiAgICA8ZGl2IGNsYXNzPSJhYm91dFRlbXBsYXRlIj48YSBvbmNsaWNrPSJqYXZhc2NyaXB0OnJldHVybiBmYWxzZTsiIGhyZWY9Ii90L0F1dG9tb3RpdmUvIj48aW1nIHRtcGxuYW1lPSJkZWZhdWx0IiBzcmM9Ii9pbWFnZXMvdGljb25zL2RlZmF1bHQuZ2lmIiB3aWR0aD0iMjYiIGhlaWdodD0iMjYiIGJvcmRlcj0iMCIgYWxpZ249ImxlZnQiPjxzcGFuIGNsYXNzPSJ0ZW1wbGF0ZU5hbWUiIGlkPSJBdXRvbW90aXZlIj7QotC10YXQvdC40LrQsDog0JDQstGC0L7QvNC+0LHQuNC70Lg8L3NwYW4+PHNwYW4gY2xhc3M9InRlbXBsYXRlRGVzY3RpcHRpb24iPtCi0LXRhdC90LjRh9C10YHQutC40Lkg0L/QtdGA0LXQstC+0LQ6INC+0L/QuNGB0LDQvdC40LUg0LDQstGC0L7QvNC+0LHQuNC70LXQuSwg0LjQvdGB0YLRgNGD0LrRhtC40LgsINC+0LHRitGP0LLQu9C10L3QuNGPINC+INC/0L7QutGD0L/QutC1L9C/0YDQvtC00LDQttC1INCw0LLRgtC+LCDQvdC+0LLQvtGB0YLQuCDQuNC3INCw0LLRgtC+0YHQsNC70L7QvdC+0LIuPC9zcGFuPjwvYT48L2Rpdj4NCiAgICA8ZGl2IGNsYXNzPSJidHdUZW1wbGF0ZSI+PC9kaXY+DQogICAgPGRpdiBjbGFzcz0iYWJvdXRUZW1wbGF0ZSI+PGEgb25jbGljaz0iamF2YXNjcmlwdDpyZXR1cm4gZmFsc2U7IiBocmVmPSIvdC9HYWRnZXQvIj48aW1nIHRtcGxuYW1lPSJkZWZhdWx0IiBzcmM9Ii9pbWFnZXMvdGljb25zL2RlZmF1bHQuZ2lmIiB3aWR0aD0iMjYiIGhlaWdodD0iMjYiIGJvcmRlcj0iMCIgYWxpZ249ImxlZnQiPjxzcGFuIGNsYXNzPSJ0ZW1wbGF0ZU5hbWUiIGlkPSJHYWRnZXQiPtCi0LXRhdC90LjQutCwOiDQk9Cw0LTQttC10YLRizwvc3Bhbj48c3BhbiBjbGFzcz0idGVtcGxhdGVEZXNjdGlwdGlvbiI+0KLQtdGF0L3QuNGH0LXRgdC60LjQuSDQv9C10YDQtdCy0L7QtDog0L7Qv9C40YHQsNC90LjQtSDQvdC+0LLQuNC90L7QuiDQv9C10YDRgdC+0L3QsNC70YzQvdGL0YUg0LzQvtCx0LjQu9GM0L3Ri9GFINGD0YHRgtGA0L7QudGB0YLQsiAo0YLQtdC70LXRhNC+0L3Riywg0L/Qu9Cw0L3RiNC10YLRiywg0Y3Qu9C10LrRgtGA0L7QvdC90YvQtSDQutC90LjQs9C4LCDQvdC10YLQsdGD0LrQuCwg0YPQu9GM0YLRgNCw0LHRg9C60LgsINC90LDQstC40LPQsNGC0L7RgNGLLCDQv9C+0YDRgtCw0YLQuNCy0L3Ri9C1INCw0YPQtNC40L4tINC4INCy0LjQtNC10L7Qv9GA0L7QuNCz0YDRi9Cy0LDRgtC10LvQuCkuPC9zcGFuPjwvYT48L2Rpdj4NCiAgICA8ZGl2IGNsYXNzPSJidHdUZW1wbGF0ZSI+PC9kaXY+DQogIDwvZGl2PjxzcGFuIGNsYXNzPSJibG9ja1RlbXBsYXRlTmFtZSBleHQiPtCi0LXRhdC90LjQutCwOiDQmtC+0LzQv9GM0Y7RgtC10YDRizwvc3Bhbj48L2Rpdj4NCjxkaXYgY2xhc3M9InRlbXBsYXRlSGVhZGVyIiBpZD0idHJhdmVsVGVtcGwiPg0KICA8ZGl2IGNsYXNzPSJ0ZW1wbGF0ZXNCbG9jayI+DQogICAgPGRpdiBjbGFzcz0iYWJvdXRUZW1wbGF0ZSI+PGEgb25jbGljaz0iamF2YXNjcmlwdDpyZXR1cm4gZmFsc2U7IiBocmVmPSIvdC9UcmF2ZWxzLyI+PGltZyB0bXBsbmFtZT0iZGVmYXVsdCIgc3JjPSIvaW1hZ2VzL3RpY29ucy9kZWZhdWx0LmdpZiIgd2lkdGg9IjI2IiBoZWlnaHQ9IjI2IiBib3JkZXI9IjAiIGFsaWduPSJsZWZ0Ij48c3BhbiBjbGFzcz0idGVtcGxhdGVOYW1lIiBpZD0iVHJhdmVscyI+0J/Rg9GC0LXRiNC10YHRgtCy0LjRjzwvc3Bhbj48c3BhbiBjbGFzcz0idGVtcGxhdGVEZXNjdGlwdGlvbiI+0JHRgNC+0L3QuNGA0L7QstCw0L3QuNC1INC+0YLQtdC70LXQuSwg0LDQstC40LAtINC4INC2L9C0INCx0LjQu9C10YLRiywg0LDQvdC60LXRgtGLINC90LAg0LLQuNC30YMsINC/0YDQuNCz0LvQsNGI0LXQvdC40Y8sINGE0L7RgNC80Yst0LfQsNGP0LLQu9C10L3QuNGPLjwvc3Bhbj48L2E+PC9kaXY+DQogICAgPGRpdiBjbGFzcz0iYnR3VGVtcGxhdGUiPjwvZGl2Pg0KICA8L2Rpdj48c3BhbiBjbGFzcz0iYmxvY2tUZW1wbGF0ZU5hbWUiPtCf0YPRgtC10YjQtdGB0YLQstC40Y88L3NwYW4+PC9kaXY+DQo8ZGl2IGNsYXNzPSJ0ZW1wbGF0ZUhlYWRlciIgaWQ9Im9ubGluZXNUZW1wbCI+DQogIDxkaXYgY2xhc3M9InRlbXBsYXRlc0Jsb2NrIj4NCiAgICA8ZGl2IGNsYXNzPSJhYm91dFRlbXBsYXRlIj48YSBvbmNsaWNrPSJqYXZhc2NyaXB0OnJldHVybiBmYWxzZTsiIGhyZWY9Ii90L09ubGluZXMvIj48aW1nIHRtcGxuYW1lPSJkZWZhdWx0IiBzcmM9Ii9pbWFnZXMvdGljb25zL2RlZmF1bHQuZ2lmIiB3aWR0aD0iMjYiIGhlaWdodD0iMjYiIGJvcmRlcj0iMCIgYWxpZ249ImxlZnQiPjxzcGFuIGNsYXNzPSJ0ZW1wbGF0ZU5hbWUiIGlkPSJPbmxpbmVzIj7QntC90LvQsNC50L0t0L/QvtC60YPQv9C60Lg8L3NwYW4+PHNwYW4gY2xhc3M9InRlbXBsYXRlRGVzY3RpcHRpb24iPtCe0L/QuNGB0LDQvdC40Y8g0YHQv9C+0YHQvtCx0L7QsiDQtNC+0YHRgtCw0LLQutC4INC4INC+0L/Qu9Cw0YLRiyDQsiDQuNC90YLQtdGA0L3QtdGCLdC80LDQs9Cw0LfQuNC90LDRhSwg0L/QuNGB0YzQvNCwINGBINGD0LLQtdC00L7QvNC70LXQvdC40Y/QvNC4LCDRgdC10YDQstC40YHQvdGL0LUg0YHQvtC+0LHRidC10L3QuNGPINC4INGN0LvQtdC80LXQvdGC0Ysg0LjQvdGC0LXRgNGE0LXQudGB0LAsINC+0L/QuNGB0LDQvdC40Y8g0YLQvtCy0LDRgNC+0LIuPC9zcGFuPjwvYT48L2Rpdj4NCiAgICA8ZGl2IGNsYXNzPSJidHdUZW1wbGF0ZSI+PC9kaXY+DQogIDwvZGl2PjxzcGFuIGNsYXNzPSJibG9ja1RlbXBsYXRlTmFtZSI+0J7QvdC70LDQudC9LdC/0L7QutGD0L/QutC4PC9zcGFuPjwvZGl2Pg0KPGRpdiBjbGFzcz0idGVtcGxhdGVIZWFkZXIiIGlkPSJvdGhlclRlbXBsIj4NCiAgPGRpdiBjbGFzcz0idGVtcGxhdGVzQmxvY2siPg0KICAgIDxkaXYgY2xhc3M9ImFib3V0VGVtcGxhdGUiPjxhIG9uY2xpY2s9ImphdmFzY3JpcHQ6cmV0dXJuIGZhbHNlOyIgaHJlZj0iL3QvQnVzaW5lc3MvIj48aW1nIHRtcGxuYW1lPSJkZWZhdWx0IiBzcmM9Ii9pbWFnZXMvdGljb25zL2RlZmF1bHQuZ2lmIiB3aWR0aD0iMjYiIGhlaWdodD0iMjYiIGJvcmRlcj0iMCIgYWxpZ249ImxlZnQiPjxzcGFuIGNsYXNzPSJ0ZW1wbGF0ZU5hbWUiIGlkPSJCdXNpbmVzcyI+0J/RgNC+0YfQtdC1OiDQkdC40LfQvdC10YE8L3NwYW4+PHNwYW4gY2xhc3M9InRlbXBsYXRlRGVzY3RpcHRpb24iPtCa0YDQtdC00LjRgtGLLCDQsdGD0YXRg9GH0LXRgiwg0LHQuNGA0LbQtdCy0YvQtSDQuCDRhNC40L3QsNC90YHQvtCy0YvQtSDQvtC/0LXRgNCw0YbQuNC4LCDQvdCw0LvQvtCz0L7QvtCx0LvQvtC20LXQvdC40LUsINC70L7Qs9C40YHRgtC40LrQsCwg0Y7RgNC40LTQuNGH0LXRgdC60LDRjyDQtNC+0LrRg9C80LXQvdGC0LDRhtC40Y8sINCx0LDQvdC60L7QstGB0LrQsNGPINC00LXRj9GC0LXQu9GM0L3QvtGB0YLRjC48L3NwYW4+PC9hPjwvZGl2Pg0KICAgIDxkaXYgY2xhc3M9ImJ0d1RlbXBsYXRlIj48L2Rpdj4NCiAgICA8ZGl2IGNsYXNzPSJhYm91dFRlbXBsYXRlIj48YSBvbmNsaWNrPSJqYXZhc2NyaXB0OnJldHVybiBmYWxzZTsiIGhyZWY9Ii90L1Nwb3J0LyI+PGltZyB0bXBsbmFtZT0iZGVmYXVsdCIgc3JjPSIvaW1hZ2VzL3RpY29ucy9kZWZhdWx0LmdpZiIgd2lkdGg9IjI2IiBoZWlnaHQ9IjI2IiBib3JkZXI9IjAiIGFsaWduPSJsZWZ0Ij48c3BhbiBjbGFzcz0idGVtcGxhdGVOYW1lIiBpZD0iU3BvcnQiPtCf0YDQvtGH0LXQtTog0KHQv9C+0YDRgjwvc3Bhbj48c3BhbiBjbGFzcz0idGVtcGxhdGVEZXNjdGlwdGlvbiI+0KHQv9C+0YDRgtC40LLQvdGL0LUg0L3QvtCy0L7RgdGC0LgsINCw0L3QsNC70LjRgtC40LrQsCDQviDRh9C10LzQv9C40L7QvdCw0YLQsNGFINC4INGB0L/QvtGA0YLQuNCy0L3Ri9GFINGB0L7QsdGL0YLQuNGP0YUsINGE0L7RgNGD0LzRiyDQuCDQsdC70L7Qs9C4Ljwvc3Bhbj48L2E+PC9kaXY+DQogICAgPGRpdiBjbGFzcz0iYnR3VGVtcGxhdGUiPjwvZGl2Pg0KICAgIDxkaXYgY2xhc3M9ImFib3V0VGVtcGxhdGUiPjxhIG9uY2xpY2s9ImphdmFzY3JpcHQ6cmV0dXJuIGZhbHNlOyIgaHJlZj0iL3QvRm9vdGJhbGwvIj48aW1nIHRtcGxuYW1lPSJkZWZhdWx0IiBzcmM9Ii9pbWFnZXMvdGljb25zL2RlZmF1bHQuZ2lmIiB3aWR0aD0iMjYiIGhlaWdodD0iMjYiIGJvcmRlcj0iMCIgYWxpZ249ImxlZnQiPjxzcGFuIGNsYXNzPSJ0ZW1wbGF0ZU5hbWUiIGlkPSJGb290YmFsbCI+0J/RgNC+0YfQtdC1OiDQpNGD0YLQsdC+0Ls8L3NwYW4+PHNwYW4gY2xhc3M9InRlbXBsYXRlRGVzY3RpcHRpb24iPtCk0YPRgtCx0L7Qu9GM0L3Ri9C1INGC0LXRgNC80LjQvdGLLCDQuNC80LXQvdCwINGD0YfQsNGB0YLQvdC40LrQvtCyINC4INGC0YDQtdC90LXRgNC+0LIsINC90LDQt9Cy0LDQvdC40Y8g0YHRgtCw0LTQuNC+0L3QvtCyINCn0JwtMjAxNC48L3NwYW4+PC9hPjwvZGl2Pg0KICAgIDxkaXYgY2xhc3M9ImJ0d1RlbXBsYXRlIj48L2Rpdj4NCiAgICA8ZGl2IGNsYXNzPSJhYm91dFRlbXBsYXRlIj48YSBvbmNsaWNrPSJqYXZhc2NyaXB0OnJldHVybiBmYWxzZTsiIGhyZWY9Ii90L0N1bGluYXJ5LyI+PGltZyB0bXBsbmFtZT0iZGVmYXVsdCIgc3JjPSIvaW1hZ2VzL3RpY29ucy9kZWZhdWx0LmdpZiIgd2lkdGg9IjI2IiBoZWlnaHQ9IjI2IiBib3JkZXI9IjAiIGFsaWduPSJsZWZ0Ij48c3BhbiBjbGFzcz0idGVtcGxhdGVOYW1lIiBpZD0iQ3VsaW5hcnkiPtCf0YDQvtGH0LXQtTog0JrRg9C70LjQvdCw0YDQuNGPPC9zcGFuPjxzcGFuIGNsYXNzPSJ0ZW1wbGF0ZURlc2N0aXB0aW9uIj7Qn9C10YDQtdCy0L7QtCDQutGD0LvQuNC90LDRgNC90YvRhSDRgNC10YbQtdC/0YLQvtCyLCDQvNC10L3RjiDRgNC10YHRgtC+0YDQsNC90L7Qsi48L3NwYW4+PC9hPjwvZGl2Pg0KICAgIDxkaXYgY2xhc3M9ImJ0d1RlbXBsYXRlIj48L2Rpdj4NCiAgICA8ZGl2IGNsYXNzPSJhYm91dFRlbXBsYXRlIj48YSBvbmNsaWNrPSJqYXZhc2NyaXB0OnJldHVybiBmYWxzZTsiIGhyZWY9Ii90L01lZGljaW5lLyI+PGltZyB0bXBsbmFtZT0iZGVmYXVsdCIgc3JjPSIvaW1hZ2VzL3RpY29ucy9kZWZhdWx0LmdpZiIgd2lkdGg9IjI2IiBoZWlnaHQ9IjI2IiBib3JkZXI9IjAiIGFsaWduPSJsZWZ0Ij48c3BhbiBjbGFzcz0idGVtcGxhdGVOYW1lIiBpZD0iTWVkaWNpbmUiPtCf0YDQvtGH0LXQtTog0JfQtNC+0YDQvtCy0YzQtTwvc3Bhbj48c3BhbiBjbGFzcz0idGVtcGxhdGVEZXNjdGlwdGlvbiI+0KHQuNC80L/RgtC+0LzRiyDQuCDQu9C10YfQtdC90LjQtSDQsdC+0LvQtdC30L3QtdC5LCDQuNC90YTQvtGA0LzQsNGG0LjRjyDQviDQvNC10LTQuNGG0LjQvdGB0LrQuNGFINGD0YfRgNC10LbQtNC10L3QuNGP0YUsINC70LjRgtC10YDQsNGC0YPRgNCwINC+INC30LTQvtGA0L7QstC+0Lwg0L7QsdGA0LDQt9C1INC20LjQt9C90LgsINGB0L/QtdGG0LjQsNC70YzQvdCw0Y8g0LvQuNGC0LXRgNCw0YLRg9GA0LAg0Lgg0L3QsNGD0YfQvdGL0LUg0YHRgtCw0YLRjNC4INC/0L4g0LzQtdC00LjRhtC40L3QtS48L3NwYW4+PC9hPjwvZGl2Pg0KICAgIDxkaXYgY2xhc3M9ImJ0d1RlbXBsYXRlIj48L2Rpdj4NCiAgICA8ZGl2IGNsYXNzPSJhYm91dFRlbXBsYXRlIj48YSBvbmNsaWNrPSJqYXZhc2NyaXB0OnJldHVybiBmYWxzZTsiIGhyZWY9Ii90L011c2ljLyI+PGltZyB0bXBsbmFtZT0iZGVmYXVsdCIgc3JjPSIvaW1hZ2VzL3RpY29ucy9kZWZhdWx0LmdpZiIgd2lkdGg9IjI2IiBoZWlnaHQ9IjI2IiBib3JkZXI9IjAiIGFsaWduPSJsZWZ0Ij48c3BhbiBjbGFzcz0idGVtcGxhdGVOYW1lIiBpZD0iTXVzaWMiPtCf0YDQvtGH0LXQtTog0J/QtdGB0L3QuDwvc3Bhbj48c3BhbiBjbGFzcz0idGVtcGxhdGVEZXNjdGlwdGlvbiI+0J/QtdGA0LXQstC+0LQg0L/QtdGB0LXQvSwg0YHRgtCw0YLQtdC5INC/0L4g0YLQtdC+0YDQuNC4INC80YPQt9GL0LrQuCDQuCDQvNGD0LfRi9C60LDQu9GM0L3Ri9GFINC20LDQvdGA0L7Qsi48L3NwYW4+PC9hPjwvZGl2Pg0KICAgIDxkaXYgY2xhc3M9ImJ0d1RlbXBsYXRlIj48L2Rpdj4NCiAgICA8ZGl2IGNsYXNzPSJhYm91dFRlbXBsYXRlIj48YSBvbmNsaWNrPSJqYXZhc2NyaXB0OnJldHVybiBmYWxzZTsiIGhyZWY9Ii90L0dlbmVyYWwvIj48aW1nIHRtcGxuYW1lPSJkZWZhdWx0IiBzcmM9Ii9pbWFnZXMvdGljb25zL2RlZmF1bHQuZ2lmIiB3aWR0aD0iMjYiIGhlaWdodD0iMjYiIGJvcmRlcj0iMCIgYWxpZ249ImxlZnQiPjxzcGFuIGNsYXNzPSJ0ZW1wbGF0ZU5hbWUiIGlkPSJHZW5lcmFsIj7Qn9GA0L7Rh9C10LU6INCR0LXQtyDRgtC10LzRizwvc3Bhbj48c3BhbiBjbGFzcz0idGVtcGxhdGVEZXNjdGlwdGlvbiI+0JLRgdC1INC+0YHRgtCw0LvRjNC90L7QtS48L3NwYW4+PC9hPjwvZGl2Pg0KICAgIDxkaXYgY2xhc3M9ImJ0d1RlbXBsYXRlIj48L2Rpdj4NCiAgPC9kaXY+PHNwYW4gY2xhc3M9ImJsb2NrVGVtcGxhdGVOYW1lIGV4dCI+0J/RgNC+0YfQtdC1OiDQkdC10Lcg0YLQtdC80Ys8L3NwYW4+PC9kaXY+DQo8ZGl2IHN0eWxlPSJjbGVhcjpib3RoOyI+PC9kaXY+PHNjcmlwdD4KICAgIAogICAgYnVpbGRBbGxUZW1wbGF0ZXNMaXN0KGNvdW50TGlzdFRlbXBsQ29sKTsKICAgIGluaXRUZW1wbGF0ZSgnR2VuZXJhbCcpOwogICAgCiAgICB2YXIgY3VyT3BlblRlbXBsYXRlID0gJyc7CgogICAgJCgiLmFib3V0VGVtcGxhdGUiKS5ob3ZlcihmdW5jdGlvbihldmVudCl7CiAgICAkKHRoaXMpLmZpbmQoJ2ltZycpLmF0dHIoJ3NyYycsICcvaW1hZ2VzL3RpY29ucy8nKyQodGhpcykuZmluZCgnaW1nJykuYXR0cigndG1wbG5hbWUnKSsnX2MuZ2lmJykKICAgIH0sCiAgICBmdW5jdGlvbihldmVudCl7CiAgICAkKHRoaXMpLmZpbmQoJ2ltZycpLmF0dHIoJ3NyYycsICcvaW1hZ2VzL3RpY29ucy8nKyQodGhpcykuZmluZCgnaW1nJykuYXR0cigndG1wbG5hbWUnKSsnLmdpZicpCiAgICB9CiAgICApCiAgICAgJCgiLmFib3V0VGVtcGxhdGVMIikuaG92ZXIoZnVuY3Rpb24oZXZlbnQpewogICAgJCh0aGlzKS5maW5kKCdpbWcnKS5hdHRyKCdzcmMnLCAnL2ltYWdlcy90aWNvbnMvJyskKHRoaXMpLmZpbmQoJ2ltZycpLmF0dHIoJ3RtcGxuYW1lJykrJ19jLmdpZicpCiAgICB9LAogICAgZnVuY3Rpb24oZXZlbnQpewogICAgJCh0aGlzKS5maW5kKCdpbWcnKS5hdHRyKCdzcmMnLCAnL2ltYWdlcy90aWNvbnMvJyskKHRoaXMpLmZpbmQoJ2ltZycpLmF0dHIoJ3RtcGxuYW1lJykrJy5naWYnKQogICAgfQogICAgKQoKLy8gICAgJCgiLnRlbXBsYXRlSGVhZGVyIikudG9nZ2xlKAovLyAgICBmdW5jdGlvbihldmVudCl7Ci8vICAgICQoIi50ZW1wbGF0ZXNCbG9jayIpLmhpZGUoKTsKLy8gICAgJCgiLnRlbXBsYXRlSGVhZGVyIikucmVtb3ZlQ2xhc3MoJ3RlbXBTZWxlY3RUZW1wbGF0ZScpOwovLyAgICAvLyQoIiNrZWVwQ2xpY2siKS5zaG93KCk7Ci8vICAgICQoIiNrZWVwQ2xpY2tUZW1wbGF0ZSIpLnNob3coKTsKLy8gICAgJCh0aGlzKS5maW5kKCIudGVtcGxhdGVzQmxvY2siKS5zaG93KCk7Ci8vICAgICQodGhpcykuYWRkQ2xhc3MoJ3RlbXBTZWxlY3RUZW1wbGF0ZScpOwovLyAgICB9LAovLyAgICBmdW5jdGlvbihldmVudCl7Ci8vICAgICQoIi50ZW1wbGF0ZXNCbG9jayIpLmhpZGUoKTsKLy8gICAgJCh0aGlzKS5yZW1vdmVDbGFzcygndGVtcFNlbGVjdFRlbXBsYXRlJyk7Ci8vICAgIC8vJCgiI2tlZXBDbGljayIpLmhpZGUoKTsKLy8gICAgJCgiI2tlZXBDbGlja1RlbXBsYXRlIikuaGlkZSgpOwogLy8gICB9KTsKIAogICAgJCgiLnRlbXBsYXRlSGVhZGVyIikuY2xpY2soCiAgICBmdW5jdGlvbihldmVudCl7CiAgICBpZiAoY3VyT3BlblRlbXBsYXRlID09ICcnKXsKICAgICAgICAgICQoIi50ZW1wbGF0ZUhlYWRlciIpLnJlbW92ZUNsYXNzKCd0ZW1wU2VsZWN0VGVtcGxhdGUnKTsKICAgICAgICAgICQoIiNrZWVwQ2xpY2tUZW1wbGF0ZSIpLnNob3coKTsKICAgICAgICAgIC8vYWxlcnQoJzEnKTsKICAgICAgICAgICQoIiNrZWVwQ2xpY2tUZW1wbGF0ZVRvcCIpLnNob3coKTsKICAgICAgICAgIC8vYWxlcnQoJzInKTsKICAgICAgICAgICQodGhpcykuZmluZCgiLnRlbXBsYXRlc0Jsb2NrIikuc2hvdygpOwogICAgICAgICAgJCh0aGlzKS5hZGRDbGFzcygndGVtcFNlbGVjdFRlbXBsYXRlJyk7CiAgICAgICAgICBjdXJPcGVuVGVtcGxhdGUgPSAkKHRoaXMpLmF0dHIoJ2lkJyk7CiAgICAgICAgICAvL2FsZXJ0KCQodGhpcykuYXR0cignaWQnKSk7CiAgICAgICAgICB9CiAgICBlbHNlIHsKICAgICAgICAgIGlmICgkKHRoaXMpLmF0dHIoJ2lkJyk9PSBjdXJPcGVuVGVtcGxhdGUpewogICAgICAgICAgICAgICAgJCgiLnRlbXBsYXRlc0Jsb2NrIikuaGlkZSgpOwogICAgICAgICAgICAgICAgJCgiI2tlZXBDbGlja1RlbXBsYXRlIikuaGlkZSgpOwogICAgICAgICAgICAgICAgJCgiI2tlZXBDbGlja1RlbXBsYXRlVG9wIikuaGlkZSgpOyAKICAgICAgICAgICAgICAgIGN1ck9wZW5UZW1wbGF0ZSA9ICcnOwogICAgICAgICAgICAgICAgICQoIi50ZW1wbGF0ZUhlYWRlciIpLnJlbW92ZUNsYXNzKCd0ZW1wU2VsZWN0VGVtcGxhdGUnKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgICQoIiMiK2N1ck9wZW5UZW1wbGF0ZSsiIikuZmluZCgiLnRlbXBsYXRlc0Jsb2NrIikuaGlkZSgpOwogICAgICAgICAgICAgICAgICQoIi50ZW1wbGF0ZUhlYWRlciIpLnJlbW92ZUNsYXNzKCd0ZW1wU2VsZWN0VGVtcGxhdGUnKTsKICAgICAgICAgICAgICAgICAkKHRoaXMpLmZpbmQoIi50ZW1wbGF0ZXNCbG9jayIpLnNob3coKTsKICAgICAgICAgICAgICAgICAkKHRoaXMpLmFkZENsYXNzKCd0ZW1wU2VsZWN0VGVtcGxhdGUnKTsKICAgICAgICAgICAgICAgICBjdXJPcGVuVGVtcGxhdGUgPSAkKHRoaXMpLmF0dHIoJ2lkJyk7CiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIH0KICAgICAgICAgIAogICAgICAgICAgfQogICAgfSk7CiAKIAogCgogICAgJCgiLmFib3V0VGVtcGxhdGUiKS5jbGljayhmdW5jdGlvbihldmVudCl7CiAgICBpZiAoJCgiI3RlbXBsYXRlIikudmFsKCkhPSQodGhpcykuZmluZCgnLnRlbXBsYXRlTmFtZScpLmF0dHIoJ2lkJykpIHtHQV9lVHJhY2soKTt9CiAgICAkKCIjdGVtcGxhdGUiKS52YWwoJCh0aGlzKS5maW5kKCcudGVtcGxhdGVOYW1lJykuYXR0cignaWQnKSk7CiAgICAkKHRoaXMpLnBhcmVudCgpLm5leHQoKS5odG1sKCQodGhpcykuZmluZCgnLnRlbXBsYXRlTmFtZScpLmh0bWwoKSk7CiAgICAkKCIudGVtcGxhdGVIZWFkZXIiKS5yZW1vdmVDbGFzcygnY3VyZW50QmxvY2tUZW1wbGF0ZScpCiAgICAkKHRoaXMpLnBhcmVudCgpLnBhcmVudCgpLmFkZENsYXNzKCdjdXJlbnRCbG9ja1RlbXBsYXRlJyk7CiAgICAkKCIuYWJvdXRUZW1wbGF0ZSIpLnJlbW92ZUNsYXNzKCdjdXJTZWxlY3RUZW1wbCcpOwogICAgJCgiLmFib3V0VGVtcGxhdGVMIikucmVtb3ZlQ2xhc3MoJ2N1clNlbGVjdFRlbXBsJyk7CiAgICAkKCIjYWJfIiskKHRoaXMpLmZpbmQoJy50ZW1wbGF0ZU5hbWUnKS5hdHRyKCdpZCcpKS5wYXJlbnQoKS5hZGRDbGFzcygnY3VyU2VsZWN0VGVtcGwnKTsKICAgICQodGhpcykuYWRkQ2xhc3MoJ2N1clNlbGVjdFRlbXBsJyk7CiAgICBpZiAobG9jYXRpb24ucGF0aG5hbWUuaW5kZXhPZigidC8iKT49MCl7CiAgICAgICAgaWYgKHJ0cmltKCQoIiNTaXRlQ29udGVudF9zb3VyY2VUZXh0IikudmFsKCkpIT0iIikge0dldFRyYW5zbGF0aW9uQ0JLKDEpO30KICAgICAgICBlbHNlIHtsb2NhdGlvbi5ocmVmPSJodHRwOi8vIitsb2NhdGlvbi5ob3N0bmFtZSsiLyMhLyIrJCh0aGlzKS5maW5kKCcudGVtcGxhdGVOYW1lJykuYXR0cignaWQnKSsiLyJ9CiAgICAgICAgfQogICAgZWxzZXsKICAgICAgICBzZXRIYXNoKCk7CiAgICAgICAgaWYgKHJ0cmltKCQoIiNTaXRlQ29udGVudF9zb3VyY2VUZXh0IikudmFsKCkpIT0iIikge0dldFRyYW5zbGF0aW9uQ0JLKDEpO30KICAgICAgICB9CiAgICAKICAgICAgCiAgICAgIAogICAgfSk7CiAgICAKICAgICQoIi5hYm91dFRlbXBsYXRlTCIpLmNsaWNrKGZ1bmN0aW9uKGV2ZW50KXsKICAgIGlmICgkKCIjdGVtcGxhdGUiKS52YWwoKSE9JCh0aGlzKS5maW5kKCcudGVtcGxhdGVOYW1lJykuYXR0cignaWQnKS5zdWJzdHIoMykpIHtHQV9lVHJhY2soKTt9CiAgICB2YXIgYUlkID0gJCh0aGlzKS5maW5kKCcudGVtcGxhdGVOYW1lJykuYXR0cignaWQnKS5zdWJzdHIoMyk7CiAgICAkKCIjdGVtcGxhdGUiKS52YWwoYUlkKTsKICAgICQoIi5hYm91dFRlbXBsYXRlIikucmVtb3ZlQ2xhc3MoJ2N1clNlbGVjdFRlbXBsJyk7CiAgICAkKCIuYWJvdXRUZW1wbGF0ZUwiKS5yZW1vdmVDbGFzcygnY3VyU2VsZWN0VGVtcGwnKTsKICAgICQoIi50ZW1wbGF0ZUhlYWRlciIpLnJlbW92ZUNsYXNzKCdjdXJlbnRCbG9ja1RlbXBsYXRlJyk7CiAgICBpbml0VGVtcGxhdGUoYUlkKTsKICAgICQodGhpcykuYWRkQ2xhc3MoJ2N1clNlbGVjdFRlbXBsJyk7CiAgICAkKCcuYWJvdXRUZW1wbGF0ZSAjJythSWQpLnBhcmVudCgpLmFkZENsYXNzKCdjdXJTZWxlY3RUZW1wbCcpOwogICAgaGlkZUFsbFRlbXBsYXRlcygpOwogICAgaWYgKGxvY2F0aW9uLnBhdGhuYW1lLmluZGV4T2YoInQvIik+PTApewogICAgICAgIGlmIChydHJpbSgkKCIjU2l0ZUNvbnRlbnRfc291cmNlVGV4dCIpLnZhbCgpKSE9IiIpIHtHZXRUcmFuc2xhdGlvbkNCSygxKTt9CiAgICAgICAgZWxzZSB7bG9jYXRpb24uaHJlZj0iaHR0cDovLyIrbG9jYXRpb24uaG9zdG5hbWUrIi8jIS8iK2FJZCsiLyJ9CiAgICAgICAgfQogICAgZWxzZXsKICAgICAgICBzZXRIYXNoKCk7CiAgICAgICAgaWYgKHJ0cmltKCQoIiNTaXRlQ29udGVudF9zb3VyY2VUZXh0IikudmFsKCkpIT0iIikge0dldFRyYW5zbGF0aW9uQ0JLKDEpO30KICAgICAgICB9CiAgICAKICAgIH0pOwogICAgCmZ1bmN0aW9uIGNoZWNrVGVtcGwoaW5fdG1wbFZhbCl7CnN3aXRjaCAoaW5fdG1wbFZhbC50b0xvd2VyQ2FzZSgpKXsgCiAgICAgICAgY2FzZSAic21zIjogCiAgICAgICAgICBpbl90bXBsVmFsID0gJ1BlcnNvbmFsQ29ycmVzcG9uZGVuY2UnOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgY2FzZSAicGVyc29uYWxpYSI6IAogICAgICAgICAgaW5fdG1wbFZhbCA9ICdHZW5lcmFsJzsKICAgICAgICBicmVhazsJIAogICAgICAgIGRlZmF1bHQ6IAogICAgICAgICAgIGluX3RtcGxWYWwgPSBpbl90bXBsVmFsOwogICAgfQpyZXR1cm4gaW5fdG1wbFZhbDsKfQoKICAgIGZ1bmN0aW9uIGluaXRUZW1wbGF0ZShjdGVtcCl7CiAgICBjdGVtcCA9IGNoZWNrVGVtcGwoY3RlbXApOwogICAgJCgnLmFib3V0VGVtcGxhdGUgIycrY3RlbXApLnBhcmVudCgpLnBhcmVudCgpLmFkZENsYXNzKCdjdXJTZWxlY3RUZW1wbCcpOwogICAgJCgnLmFib3V0VGVtcGxhdGVMICNhYl8nK2N0ZW1wKS5wYXJlbnQoKS5hZGRDbGFzcygnY3VyU2VsZWN0VGVtcGwnKTsKICAgICQoIiN0ZW1wbGF0ZSIpLnZhbChjdGVtcCk7CiAgICAkKCcuYWJvdXRUZW1wbGF0ZSAjJytjdGVtcCkucGFyZW50KCkucGFyZW50KCkucGFyZW50KCkucGFyZW50KCkuYWRkQ2xhc3MoJ2N1cmVudEJsb2NrVGVtcGxhdGUnKTsKICAgICQoJy5hYm91dFRlbXBsYXRlICMnK2N0ZW1wKS5wYXJlbnQoKS5wYXJlbnQoKS5wYXJlbnQoKS5uZXh0KCkuaHRtbCgkKCcuYWJvdXRUZW1wbGF0ZSAjJytjdGVtcCkuaHRtbCgpKTsKICAgIH0KCiAgICAKICAgIGZ1bmN0aW9uIEdBX2VUcmFjaygpewogICAgX2dhcS5wdXNoKFsnX3NldEN1c3RvbVZhcicsMSwnVGVtcGxhdGUnLCQoIiN0ZW1wbGF0ZSIpLnZhbCgpLDNdKTsKICAgIF9nYXEucHVzaChbJ19zZXRDdXN0b21WYXInLDIsJ1NyY0xhbmcnLGxhbmdDb252ZXJ0b3IoR2V0RGlyKClbMF0pLDNdKTsKICAgIF9nYXEucHVzaChbJ19zZXRDdXN0b21WYXInLDMsJ1RndExhbmcnLGxhbmdDb252ZXJ0b3IoR2V0RGlyKClbMV0pLDNdKTsgIAogICAgX2dhcS5wdXNoKFsnX3NldEN1c3RvbVZhcicsNCwnVXNlckxhbmcnLGxhbmdDb252ZXJ0b3IoR2V0RGlyKClbMF0pKyItIitsYW5nQ29udmVydG9yKEdldERpcigpWzFdKSwzXSk7CiAgICBfZ2FxLnB1c2goWydfdHJhY2tFdmVudCcsICdMaW5ndWlzdGljJywgJ1RlbXBsYXRlJywgJ0NoYW5nZSddKTsKICAgIH0KCiAgICBmdW5jdGlvbiBidWlsZEFsbFRlbXBsYXRlc0xpc3QoY2x0Yyl7CiAgICB2YXIgZWxlbWVudHMgPSAkKCcjYWxsTGlzdCAuYWJvdXRUZW1wbGF0ZUwnKTsKICAgIGZvcihpPTA7aTxjbHRjO2krKyl7ICQoJyNmQ29sJykuYXBwZW5kKGVsZW1lbnRzW2ldKTsgaWYgKGkhPWNsdGMtMSkgeyQoJyNmQ29sJykuYXBwZW5kKCc8ZGl2IGNsYXNzPSJidHdUZW1wbGF0ZSI+PC9kaXY+Jyk7fX0KICAgIGZvcihpPWNsdGM7aTxjbHRjKjI7aSsrKXsgJCgnI3NDb2wnKS5hcHBlbmQoZWxlbWVudHNbaV0pOyBpZiAoaSE9Y2x0YyoyLTEpIHsgJCgnI3NDb2wnKS5hcHBlbmQoJzxkaXYgY2xhc3M9ImJ0d1RlbXBsYXRlIj48L2Rpdj4nKTt9fQogICAgZm9yKGk9Y2x0YyoyO2k8ZWxlbWVudHMubGVuZ3RoO2krKyl7ICQoJyN0Q29sJykuYXBwZW5kKGVsZW1lbnRzW2ldKTsgICQoJyN0Q29sJykuYXBwZW5kKCc8ZGl2IGNsYXNzPSJidHdUZW1wbGF0ZSI+PC9kaXY+Jyk7fQogICAgfQoKIAogIDwvc2NyaXB0PmQCAQ9kFgZmDxBkEBUOFNCQ0L3Qs9C70LjQudGB0LrQuNC5F9CQ0YDQsNCx0YHQutC40LkgKGJldGEpGdCT0YDQtdGH0LXRgdC60LjQuSAoYmV0YSkS0JjRgdC/0LDQvdGB0LrQuNC5FtCY0YLQsNC70YzRj9C90YHQutC40LkZ0JrQsNC30LDRhdGB0LrQuNC5IChiZXRhKR3QmtCw0YLQsNC70LDQvdGB0LrQuNC5IChiZXRhKRDQndC10LzQtdGG0LrQuNC5GtCf0L7RgNGC0YPQs9Cw0LvRjNGB0LrQuNC5DtCg0YPRgdGB0LrQuNC5F9Ci0YPRgNC10YbQutC40LkgKGJldGEpDtCk0LjQvdGB0LrQuNC5FtCk0YDQsNC90YbRg9C30YHQutC40LkQ0K/Qv9C+0L3RgdC60LjQuRUOAmVuAmFyAmVsAmVzAml0AmtrAmNhAmRlAnB0AnJ1AnRyAmZpAmZyAmphFCsDDmdnZ2dnZ2dnZ2dnZ2dnZGQCAQ8QZBAVDx3QntC/0YDQtdC00LXQu9C40YLRjCDRj9C30YvQuhTQkNC90LPQu9C40LnRgdC60LjQuRfQkNGA0LDQsdGB0LrQuNC5IChiZXRhKRnQk9GA0LXRh9C10YHQutC40LkgKGJldGEpEtCY0YHQv9Cw0L3RgdC60LjQuRbQmNGC0LDQu9GM0Y/QvdGB0LrQuNC5GdCa0LDQt9Cw0YXRgdC60LjQuSAoYmV0YSkd0JrQsNGC0LDQu9Cw0L3RgdC60LjQuSAoYmV0YSkQ0J3QtdC80LXRhtC60LjQuRrQn9C+0YDRgtGD0LPQsNC70YzRgdC60LjQuQ7QoNGD0YHRgdC60LjQuRfQotGD0YDQtdGG0LrQuNC5IChiZXRhKQ7QpNC40L3RgdC60LjQuRbQpNGA0LDQvdGG0YPQt9GB0LrQuNC5ENCv0L/QvtC90YHQutC40LkVDwJhdQJlbgJhcgJlbAJlcwJpdAJrawJjYQJkZQJwdAJydQJ0cgJmaQJmcgJqYRQrAw9nZ2dnZ2dnZ2dnZ2dnZ2dkZAICDxBkEBUOFNCQ0L3Qs9C70LjQudGB0LrQuNC5F9CQ0YDQsNCx0YHQutC40LkgKGJldGEpGdCT0YDQtdGH0LXRgdC60LjQuSAoYmV0YSkS0JjRgdC/0LDQvdGB0LrQuNC5FtCY0YLQsNC70YzRj9C90YHQutC40LkZ0JrQsNC30LDRhdGB0LrQuNC5IChiZXRhKR3QmtCw0YLQsNC70LDQvdGB0LrQuNC5IChiZXRhKRDQndC10LzQtdGG0LrQuNC5GtCf0L7RgNGC0YPQs9Cw0LvRjNGB0LrQuNC5DtCg0YPRgdGB0LrQuNC5F9Ci0YPRgNC10YbQutC40LkgKGJldGEpDtCk0LjQvdGB0LrQuNC5FtCk0YDQsNC90YbRg9C30YHQutC40LkQ0K/Qv9C+0L3RgdC60LjQuRUOAmVuAmFyAmVsAmVzAml0AmtrAmNhAmRlAnB0AnJ1AnRyAmZpAmZyAmphFCsDDmdnZ2dnZ2dnZ2dnZ2dnZGQYAQUeX19Db250cm9sc1JlcXVpcmVQb3N0QmFja0tleV9fFgEFF2N0bDAwJGNiT3RwclRyYW5zbGF0aW9uWk6AMZxYQwWr16jE/j65A5si4uLhLHa9W7V9dk3YLHU=" />
</div>

<script type="text/javascript">
//<![CDATA[
var theForm = document.forms['aspnetForm'];
if (!theForm) {
    theForm = document.aspnetForm;
}
function __doPostBack(eventTarget, eventArgument) {
    if (!theForm.onsubmit || (theForm.onsubmit() != false)) {
        theForm.__EVENTTARGET.value = eventTarget;
        theForm.__EVENTARGUMENT.value = eventArgument;
        theForm.submit();
    }
}
//]]>
</script>


<script src="/WebResource.axd?d=Sv-XFoKDZjBrN7AJV1CsHDZAulc7b62FywvErNq7nCh0vM0cGUV2EzFXB8Qhe3edaB-XiKwHd1Hm9Y2iKGSZShDOdYdZp5jrwi5iSgTngfY1&amp;t=635944478622828253" type="text/javascript"></script>


<script type="text/javascript">
//<![CDATA[
function CallServerDTO(arg, context){ WebForm_DoCallback('ctl00$topUser1',arg,ReceiveServerDataDTO,context,null,false);}//]]>
</script>

<div class="aspNetHidden">

	<input type="hidden" name="__EVENTVALIDATION" id="__EVENTVALIDATION" value="/wEWDAKdmt+mDQKZx9S9AQKs+6fZBQKv+dXJCwKY1ZJUAsjX/88KAuagncYGAs653bgCAo3Qw9AKAruokZMNAruopdMMApy92uoLfDK4r/2phSurZpjpKL6QfMGM/un/MO9yID/3cf0M+ZM=" />
</div>
        <div id="topMenu"> 
    	<div id="tmOther">  
    	

<script language="Javascript"type="text/javascript">
    function showLangs() {
        if (topPopup == "flPU") { closeAllTopPopups(); return }
        else { closeAllTopPopups(); }
        $("#flags").slideDown(600); $("#keepClick").show(); topPopup = "flPU";
    }
    function hideLangs() { closeAllTopPopups(); } 
</script>

<span id="currentLang">
<a href="javascript:showLangs();">

          <img src="/images/common/flag_ru.gif" width="22px" height="13px" border="0" hspace="5" alt="Русский" title="Русский" />           
          Русский <img src="/images/common/ext_fff.gif" border="0" alt="изменить" title="изменить"/>
          
  </a>
  </span>
  <div id="flags" style="display:none; z-index:500;">
   <br/>
    <a href="/flags.aspx?prmtlang=ru&from=/Default.aspx"><img src="/images/common/flag_ru.gif" border="0" hspace="5" vspace="0" alt="Русский" align="absmiddle" title="Русский" /></a> <a href="/flags.aspx?prmtlang=ru&from=/Default.aspx">Русский</a><br/>
    <a href="/flags.aspx?prmtlang=en&from=/Default.aspx"><img src="/images/common/flag_en.gif" border="0" hspace="5" vspace="0" alt="English" align="absmiddle" title="English"/></a> <a href="/flags.aspx?prmtlang=en&from=/Default.aspx">English</a><br/>
    <a href="/flags.aspx?prmtlang=de&from=/Default.aspx"><img src="/images/common/flag_de.gif" border="0" hspace="5" vspace="0" alt="Deutsch" align="absmiddle" title="Deutsch"/></a> <a href="/flags.aspx?prmtlang=de&from=/Default.aspx">Deutsch</a><br/>
    <a href="/flags.aspx?prmtlang=fr&from=/Default.aspx"><img src="/images/common/flag_fr.gif" border="0" hspace="5" vspace="0" alt="Français"  align="absmiddle" title="Français"/></a> <a href="/flags.aspx?prmtlang=fr&from=/Default.aspx">Français</a><br/>
    <a href="/flags.aspx?prmtlang=es&from=/Default.aspx"><img src="/images/common/flag_es.gif" border="0" hspace="5" vspace="0" alt="Español" align="absmiddle" title="Español"/></a> <a href="/flags.aspx?prmtlang=es&from=/Default.aspx">Español</a><br/>
    <a href="/flags.aspx?prmtlang=pt&from=/Default.aspx"><img src="/images/common/flag_brpt.gif" border="0" hspace="5" vspace="0" alt="Português" align="absmiddle" title="Português"/></a> <a href="/flags.aspx?prmtlang=pt&from=/Default.aspx">Português</a>
      <br style=" line-height:10px;"/><br  style=" line-height:10px;"/>
      <span class="close1" style=" float:right;"><a href="javascript:hideLangs();">Закрыть</a></span><br/>

    <!---->
</div>
    	<div id="contactDiv"><span id="feedbackBlock"><a href="javascript:showFeedbackForm();"><img src="/images/common/mail_ico.gif" alt="Обратная связь" title="Обратная связь" width="19" height="12"  border="0"/></a></span>
    	<div id="feedbackForm">
    	<br />
    	<div id="pFeedBack1" style="overflow:hidden;">
    <span id="pFeedBack1_f1">
    <a href="javascript:hideFeedbackForm();"><span class="close"></span></a>

      <h4 id="handleFB"><span id="lFBHeader">Отправить отзыв разработчикам</span></h4>
        <span id="lOtpravleno" class="bigText" style="display:none;">Ваш отзыв отправлен.</span>
     
     
           <input name="ctl00$ignore" type="hidden" id="ignore" />
        <span id="fFeedbackFld">      
            <span id="lfbTextInfo">Ваш комментарий вместе с переводом и всеми параметрами будет доставлен разработчикам</span><br /><br />
            <label class="dt"><span id="lPochtAdr">Ваш E-mail:</span></label>
            <div class="input" style="width: 180px;">
            <input name="ctl00$tbPochtAdr" type="text" id="tbPochtAdr" onChange="changedField(&#39;0&#39;);" />
            </div>
            <input name="ctl00$tbEmail" type="text" id="tbEmail" />
            <label class="dt"><span id="lImya">Ваше имя: </span></label>
            <div class="input" style="width: 180px;">
            <input name="ctl00$tbImya" type="text" id="tbImya" onChange="changedField(&#39;1&#39;);" />
            </div>
            <label class="dt"><span id="lOtzyv">Отзыв: </span></label>
            <div class="input_txt" style="width: 380px;">
            <textarea name="ctl00$tbOtzyv" rows="2" cols="20" id="tbOtzyv" class="send_win" onChange="changedField(&#39;2&#39;);">
</textarea><br />
            </div>
                 </span>  
                 <!--
            <span class="checkLabel1">
            <span style="vertical-align: middle;"><input id="cbOtprTranslation" type="checkbox" name="ctl00$cbOtprTranslation" checked="checked" /></span>&nbsp;
            <span id="lOtprTranslation"></span></span>
                -->
           <p><input id="bAjaxFeedback" type="button" value=' Отправить' class="transit" style="width:110px;" onclick="javascript: SendFeedback();" /></p>
 
               <div id="loading" style="display:none; position:absolute; text-align:center; background:white; left:80px; top:50px; border:dotted 1px gray; height:30px; width:210px; padding:20px">
          Подождите...                 
                <img src="/images/common/al_fullWR.gif" width="15" height="15" />
            </div>                  
    </span>       
    </div>
    <input name="ctl00$changedField" type="hidden" id="changedField" />
    	
    	</div>
    	</div>
    	</div>
    	<div id="passportMenu">
    	    
<script>
 
</script>
<div id="topUser1_panelUnLoggedUserMenu">
	
<script language="javascript">
    function UserLogin() {
        if (topPopup == "passPU") { closeAllTopPopups(); return }
        else { closeAllTopPopups(); }
        $("#forLogin").slideDown(600);
        if (!loadLoginFrame) {
            document.getElementById("topUser1_LoginFrame").src = "http://passport.translate.ru/ru/loginform/509272812/rjlz2rsg3ugc5baibtgs1t2k/signin/?&backURL=http://www.translate.ru/";
        }
        $("#keepClick").show();
        topPopup = "passPU";
    }
    function closeLogin() {
        closeAllTopPopups();
        document.getElementById("topUser1_LoginFrame").src = "http://passport.translate.ru/ru/loginform/509272812/rjlz2rsg3ugc5baibtgs1t2k/signin/?&backURL=http://www.translate.ru/";
    }
</script>
       <span id="forLogin">
            <span id="forLoginTop" style="display:none; border:1px solid red; height:5px;"  ></span>
            
            <div id="forLoginMain">
            <div style="height:26px;"><a href="javascript:;" onclick="closeLogin();"><span class="close"></span></a></div>
            <iframe id="topUser1_LoginFrame" height="360" frameborder="0" scrolling="no" style="background: transparent!important" allowTransparency="true"></iframe>
            </div>
            
       </span>
    <span class="welcome">
        <a id="topUser1_hlRegister" href="http://passport.translate.ru/ru/Anketa/?backURL=http://www.translate.ru/&amp;aCode=509272812" target="_blank">Зарегистрироваться</a>
    <!--
        <span id="topUser1_labelWelcomeTitle">Welcome</span>
        -->
    </span>
    <span class="welcome">
     | <a href="javascript:;" onclick="javascript:UserLogin();"> 
        <span id="topUser1_hlSighIn">Вход</span>
       </a>
       
    </span>

</div>

<script type="text/ecmascript">
    function GETDTO() {
        dateObj = new Date();
        var tmp = dateObj.getTimezoneOffset();
        tmp = tmp * (-1);
        var hlp = "notOk";
        if (hlp != "ok") { CallServerDTO(tmp, ""); }
    }
    function ReceiveServerDataDTO(rValue) {
    }
</script>
    	</div>
    </div>
    
    
   

    <div id="topAdvert" style=" padding-top:3px;">
    <script>
        var urlLocalPath = "/default.aspx"
    </script>
      
            <script type='text/javascript'>
                //GA_googleFillSlot("Translate.Ru_TopLine_inPage");
            </script>
            
            <!-- новые рекламные коды BestSeller и ЯЗнаю 04.2014 -->
            <!-- брендирование подложки -->
            <!--<div id="adriver_banner_brandirovanie"></div>
            <script type="text/javascript">
               // new adriver("adriver_banner_brandirovanie", {sid:196839, bt:52, bn:3, pz:ar_duo1, keyword: encodeURIComponent(typeof crtg_content !== 'undefined' && crtg_content ? crtg_content : '')});
            </script>
            -->
            <center><div id="adriver_banner_312813489"></div>
            
            <!--script>                g_rtb_yandex_page_id = "R-127030-1"</script-->
            <!--div id="yandex_ad_R-127030-1"></div-->
            </center>
            
            <script>
                //(function () {
                   // if (!window.yandex_rtb_is_displayed) {
                        render_alternative4RTB()
                   // } // else was show RTB already
                //})();
                // show other BS
                function render_alternative4RTB() {
                    //alert("Please insert site AD 100%х90 code!");
                    //document.getElementById("adriver_banner_312813489").style.border="1px solid red";
                    new adriver("adriver_banner_312813489", { sid: 196839, bt: 52, bn: 1, pz: ar_duo1, keyword: encodeURIComponent(typeof crtg_content !== 'undefined' && crtg_content ? crtg_content : '') });
                    // Here show site ad 
                    //		e.t.c.
                    //		var addiv = document.getElementById('yandex_ad_' + g_rtb_yandex_page_id);
                    //		addiv.innerHTML = ...
                }
            </script>
          
            <!--<iframe name="topAdvF" id="topAdvF" width="100%" height="90px" scrolling="no" style="border:0;background: transparent!important" allowtransparency="true" src="/Components/advertTop.html" scrolling="no" frameborder="0" ></iframe>-->
    </div>
    <script>        if (document.getElementById('google_ads_div_Translate.Ru_TopLine_inPage_ad_container')) { setTimeout("document.getElementById('google_ads_div_Translate.Ru_TopLine_inPage_ad_container').style.display='block';", 1); }
    </script>
    <div id="wpTO" style="background-color:green; height: 100%!important; left: 0; margin: 0; padding: 0; position: absolute; top: 0; width: 100%; display:none;"></div>
<div style="display:none">

<!-- Translate.Ru_Wallpaper -->
    <script type='text/javascript'>
        GA_googleFillSlot("Translate.Ru_Wallpaper");
    </script>

</div>
 
 
    <!-- содержимое -->

    <!--[if lt IE 9]>
        <div style="margin:20px auto 0 auto; max-width: 1000px; min-width: 1000px;">
            <div style="float:right; height:19px; width:18px; background:url(/images/ie/mw_rtc.png) repeat-x;"></div>
            <div style="float:left; height:19px; width:16px; background:url(/images/ie/mw_ltc.png) repeat-x; "></div>
            <div style="background:url(/images/ie/mw_tbg.png) repeat-x; height:19px; margin:0 16px;"></div>
        </div>
<![endif]-->

<script>
    TS = "MainSite";
    theForm.setAttribute("action", "/default.aspx");
    if ("" == "1") { needReloadAdv = false };
</script> 

<style>
#topAdvert{min-height:95px;}
#morePhrases, #topPhrasesBlock,#topSamplesBlock, #phrases_loader,#topPhrases, #allPhrases, #PhrasesBlock, #explanatoryBLock {display:none;}

#logotext h2 {margin-left:110px;}
 </style>
<div id="contentBlock">
    <header>
    
    <!--<a href="http://weclever.translate.ru" style="text-decoration:none; color:white" target="_blank">
       <div id="wecleverAnons" style="float:right; background:url(/images/advert/wc_tbanner1.gif); height:27px; width:158px; text-align:center; padding-top:7px; margin-top:10px; padding-left:0px"><b>СКИДКИ ДО 90%</b>
       </div>
    </a>-->
        <div id="likes" style="display:none;float:right; text-align:right; padding-top:2px; margin-top:0px; padding-left:0px">
        <style type="text/css" media="screen">
              #custom-tweet-button a {display: block;padding: 2px 5px 2px 20px; background: url('http://a4.twimg.com/images/favicon.ico') 1px center no-repeat; border: 1px solid #ccc;}        
         </style>
           <div style="float:right;">
                   <!-- Place this tag where you want the +1 button to render -->
                    <g:plusone size="medium" href="http://www.translate.ru"></g:plusone>

                    <!-- Place this render call where appropriate -->
                    <script type="text/javascript">
                        window.___gcfg = { lang: 'ru' };

                        (function () {
                            var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true;
                            po.src = 'https://apis.google.com/js/plusone.js';
                            var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
                        })();
                    </script>
           </div>
           
           <div style="float:right;">
           <!--<div id="vk_api_transport"></div>
           <script src="//vk.com/js/api/openapi.js" type="text/javascript"></script>
            <script type="text/javascript">VK.init({apiId: 2957355, onlyWidgets: true});</script>-->
            <div id="vk_api_transport"></div>
<script type="text/javascript">    window.vkAsyncInit = function () { VK.init({ apiId: 2957355, onlyWidgets: true }); };
    setTimeout(function () {
        var el = document.createElement("script");
        el.type = "text/javascript";
        el.src = "//vk.com/js/api/openapi.js";
        el.async = true;
        document.getElementById("vk_api_transport").appendChild(el);
    }, 0);
</script>

                    <div id="vk_like" style="width:160px;"></div>
                    <script type="text/javascript">
                        setTimeout(function () { VK.Widgets.Like("vk_like", { type: "mini", height: 20 }); }, 1000);
                    </script>
                   
           </div>
           
            <script type="text/javascript">
                $(document).ready(function () { setTimeout('$("#likes").fadeIn("slow");', 2000); });
           </script>
           <div style="float:right;width: 120px;">
                       <!--twitter-share-button -->
                        <a href="https://twitter.com/share" class="twitter-share-button" data-url="http://www.translate.ru" data-text="Переводчик и словарь онлайн от PROMT" data-via="translate_ru" data-lang="ru">tweet</a>
                        <script>                            !function (d, s, id) { var js, fjs = d.getElementsByTagName(s)[0]; if (!d.getElementById(id)) { js = d.createElement(s); js.id = id; js.src = "//platform.twitter.com/widgets.js"; fjs.parentNode.insertBefore(js, fjs); } } (document, "script", "twitter-wjs");</script>

            </div>
           <div style="float:right;">
           			    <iframe src="//www.facebook.com/plugins/like.php?locale=ru_RU&href=http%3A%2F%2Fwww.translate.ru&amp;send=false&amp;layout=button_count&amp;width=165&amp;show_faces=false&amp;action=like&amp;colorscheme=light&amp;font&amp;height=21" scrolling="no" frameborder="0" style="border:none; overflow:hidden; width:165px; height:21px;" allowTransparency="true"></iframe>
            </div>
       </div>
       
        <a href="/" id="goHome"><img src="/images/common/logo.gif" border="0" align="left" /></a><div id="hat"></div>
        <div style="display:inline-block;" id="logotext"> <h1>Translate.Ru</h1><h2>Переводчик  <a onclick="javascript:linkToDict('Top_link');" href="/dictionary/" id="dictLink">Перейти в словарь</a></h2> 
        </div>
    </header>
   <section id="templatesSection">
       <div id="SiteContent_templatesBlock" onclick="cancel_bubbling(event)" onmouseup="cancel_bubbling(event)" onmousedown="cancel_bubbling(event)"><div id="shAllTmpl" style="float:right; margin:7px; line-height: 10px;"><a href="javascript:;" onclick="javascript:showAllTemplates();"><img src="/images/common/all_tmpl.gif" border="0" alt="Все тематики" title="Все тематики"></a></div>
<div id="keepClickTemplate"></div>
<div id="allTemplatesBlock"><a href="javascript:;" onclick="javascript:hideAllTemplates();"><div class="close"></div></a><div id="allList">
    <div class="aboutTemplateL"><a onclick="javascript:return false;" href="/t/School/"><img tmplname="default" src="/images/ticons/default.gif" width="26" height="26" border="0" align="left"><span class="templateName" id="ab_School">Образование: Языки</span><span class="templateDesctiption">Перевод материалов по грамматике, диалогов, топиков, упражнений из учебников.</span></a></div>
    <div class="aboutTemplateL"><a onclick="javascript:return false;" href="/t/Humanities/"><img tmplname="default" src="/images/ticons/default.gif" width="26" height="26" border="0" align="left"><span class="templateName" id="ab_Humanities">Образование: Гуманитарные науки</span><span class="templateDesctiption">Право, история, литература, экономика, религия.</span></a></div>
    <div class="aboutTemplateL"><a onclick="javascript:return false;" href="/t/Natural/"><img tmplname="default" src="/images/ticons/default.gif" width="26" height="26" border="0" align="left"><span class="templateName" id="ab_Natural">Образование: Естественные науки</span><span class="templateDesctiption">Химия, физика, медицина, биология, экология.</span></a></div>
    <div class="aboutTemplateL"><a onclick="javascript:return false;" href="/t/PersonalCorrespondence/"><img tmplname="default" src="/images/ticons/default.gif" width="26" height="26" border="0" align="left"><span class="templateName" id="ab_PersonalCorrespondence">Общение: Личная переписка</span><span class="templateDesctiption">Общение в мессенджерах, чатах, личная переписка.</span></a></div>
    <div class="aboutTemplateL"><a onclick="javascript:return false;" href="/t/BusinessCorrespondence/"><img tmplname="default" src="/images/ticons/default.gif" width="26" height="26" border="0" align="left"><span class="templateName" id="ab_BusinessCorrespondence">Общение: Деловая переписка</span><span class="templateDesctiption">Официальная переписка по вопросам бизнеса.</span></a></div>
    <div class="aboutTemplateL"><a onclick="javascript:return false;" href="/t/LoveAndDating/"><img tmplname="default" src="/images/ticons/default.gif" width="26" height="26" border="0" align="left"><span class="templateName" id="ab_LoveAndDating">Общение: Знакомства</span><span class="templateDesctiption">Поиск пары на сайтах знакомств, переписка, любовь и дружба.</span></a></div>
    <div class="aboutTemplateL"><a onclick="javascript:return false;" href="/t/Social/"><img tmplname="default" src="/images/ticons/default.gif" width="26" height="26" border="0" align="left"><span class="templateName" id="ab_Social">Общение: Социальные сети</span><span class="templateDesctiption">Интерфейс социальных сетей Twitter, Facebook, Google+. Общение в них.</span></a></div>
    <div class="aboutTemplateL"><a onclick="javascript:return false;" href="/t/Computer/"><img tmplname="default" src="/images/ticons/default.gif" width="26" height="26" border="0" align="left"><span class="templateName" id="ab_Computer">Техника: Компьютеры</span><span class="templateDesctiption">Технический перевод: программирование, структура ПК, интернет, продукты Microsoft и документация Windows, электроника, цифровая бытовая техника.</span></a></div>
    <div class="aboutTemplateL"><a onclick="javascript:return false;" href="/t/Automotive/"><img tmplname="default" src="/images/ticons/default.gif" width="26" height="26" border="0" align="left"><span class="templateName" id="ab_Automotive">Техника: Автомобили</span><span class="templateDesctiption">Технический перевод: описание автомобилей, инструкции, объявления о покупке/продаже авто, новости из автосалонов.</span></a></div>
    <div class="aboutTemplateL"><a onclick="javascript:return false;" href="/t/Gadget/"><img tmplname="default" src="/images/ticons/default.gif" width="26" height="26" border="0" align="left"><span class="templateName" id="ab_Gadget">Техника: Гаджеты</span><span class="templateDesctiption">Технический перевод: описание новинок персональных мобильных устройств (телефоны, планшеты, электронные книги, нетбуки, ультрабуки, навигаторы, портативные аудио- и видеопроигрыватели).</span></a></div>
    <div class="aboutTemplateL"><a onclick="javascript:return false;" href="/t/Travels/"><img tmplname="default" src="/images/ticons/default.gif" width="26" height="26" border="0" align="left"><span class="templateName" id="ab_Travels">Путешествия</span><span class="templateDesctiption">Бронирование отелей, авиа- и ж/д билеты, анкеты на визу, приглашения, формы-заявления.</span></a></div>
    <div class="aboutTemplateL"><a onclick="javascript:return false;" href="/t/Onlines/"><img tmplname="default" src="/images/ticons/default.gif" width="26" height="26" border="0" align="left"><span class="templateName" id="ab_Onlines">Онлайн-покупки</span><span class="templateDesctiption">Описания способов доставки и оплаты в интернет-магазинах, письма с уведомлениями, сервисные сообщения и элементы интерфейса, описания товаров.</span></a></div>
    <div class="aboutTemplateL"><a onclick="javascript:return false;" href="/t/Business/"><img tmplname="default" src="/images/ticons/default.gif" width="26" height="26" border="0" align="left"><span class="templateName" id="ab_Business">Прочее: Бизнес</span><span class="templateDesctiption">Кредиты, бухучет, биржевые и финансовые операции, налогообложение, логистика, юридическая документация, банковская деятельность.</span></a></div>
    <div class="aboutTemplateL"><a onclick="javascript:return false;" href="/t/Sport/"><img tmplname="default" src="/images/ticons/default.gif" width="26" height="26" border="0" align="left"><span class="templateName" id="ab_Sport">Прочее: Спорт</span><span class="templateDesctiption">Спортивные новости, аналитика о чемпионатах и спортивных событиях, форумы и блоги.</span></a></div>
    <div class="aboutTemplateL"><a onclick="javascript:return false;" href="/t/Football/"><img tmplname="default" src="/images/ticons/default.gif" width="26" height="26" border="0" align="left"><span class="templateName" id="ab_Football">Прочее: Футбол</span><span class="templateDesctiption">Футбольные термины, имена участников и тренеров, названия стадионов ЧМ-2014.</span></a></div>
    <div class="aboutTemplateL"><a onclick="javascript:return false;" href="/t/Culinary/"><img tmplname="default" src="/images/ticons/default.gif" width="26" height="26" border="0" align="left"><span class="templateName" id="ab_Culinary">Прочее: Кулинария</span><span class="templateDesctiption">Перевод кулинарных рецептов, меню ресторанов.</span></a></div>
    <div class="aboutTemplateL"><a onclick="javascript:return false;" href="/t/Medicine/"><img tmplname="default" src="/images/ticons/default.gif" width="26" height="26" border="0" align="left"><span class="templateName" id="ab_Medicine">Прочее: Здоровье</span><span class="templateDesctiption">Симптомы и лечение болезней, информация о медицинских учреждениях, литература о здоровом образе жизни, специальная литература и научные статьи по медицине.</span></a></div>
    <div class="aboutTemplateL"><a onclick="javascript:return false;" href="/t/Music/"><img tmplname="default" src="/images/ticons/default.gif" width="26" height="26" border="0" align="left"><span class="templateName" id="ab_Music">Прочее: Песни</span><span class="templateDesctiption">Перевод песен, статей по теории музыки и музыкальных жанров.</span></a></div>
    <div class="aboutTemplateL"><a onclick="javascript:return false;" href="/t/General/"><img tmplname="default" src="/images/ticons/default.gif" width="26" height="26" border="0" align="left"><span class="templateName" id="ab_General">Прочее: Без темы</span><span class="templateDesctiption">Все остальное.</span></a></div>
  </div>
  <div id="fCol"></div>
  <div id="sCol"></div>
  <div id="tCol"></div>
  <div id="user_template_span">
    <h3>Предложите свою тематику</h3>
    <p>Самые востребованные варианты будут подключены в новых версиях сайта.</p><span style="display:none;"><script>
          //createUserTemplatesBlockT();
        </script></span><label for="utemplates_u">Своя тематика</label><br><span style="display:block;"><div class="input1" style="width: 180px;"><input type="text" name="utemplatesi" id="utemplatesi" value="" onfocus="javascript:checkedUT();" style="background-color:White;" maxlength="50"></div><br><input name="Ok" id="addUTBttmId" type="button" value="Отправить" onclick="javascript:saveUTemplates();" class="addUTBttm"></span></div>
</div>
<div class="templateHeader" id="schoolTempl">
  <div class="templatesBlock">
    <div class="aboutTemplate"><a onclick="javascript:return false;" href="/t/School/"><img tmplname="default" src="/images/ticons/default.gif" width="26" height="26" border="0" align="left"><span class="templateName" id="School">Образование: Языки</span><span class="templateDesctiption">Перевод материалов по грамматике, диалогов, топиков, упражнений из учебников.</span></a></div>
    <div class="btwTemplate"></div>
    <div class="aboutTemplate"><a onclick="javascript:return false;" href="/t/Humanities/"><img tmplname="default" src="/images/ticons/default.gif" width="26" height="26" border="0" align="left"><span class="templateName" id="Humanities">Образование: Гуманитарные науки</span><span class="templateDesctiption">Право, история, литература, экономика, религия.</span></a></div>
    <div class="btwTemplate"></div>
    <div class="aboutTemplate"><a onclick="javascript:return false;" href="/t/Natural/"><img tmplname="default" src="/images/ticons/default.gif" width="26" height="26" border="0" align="left"><span class="templateName" id="Natural">Образование: Естественные науки</span><span class="templateDesctiption">Химия, физика, медицина, биология, экология.</span></a></div>
    <div class="btwTemplate"></div>
  </div><span class="blockTemplateName ext">Образование: Языки</span></div>
<div class="templateHeader" id="relationsTempl">
  <div class="templatesBlock">
    <div class="aboutTemplate"><a onclick="javascript:return false;" href="/t/PersonalCorrespondence/"><img tmplname="default" src="/images/ticons/default.gif" width="26" height="26" border="0" align="left"><span class="templateName" id="PersonalCorrespondence">Общение: Личная переписка</span><span class="templateDesctiption">Общение в мессенджерах, чатах, личная переписка.</span></a></div>
    <div class="btwTemplate"></div>
    <div class="aboutTemplate"><a onclick="javascript:return false;" href="/t/BusinessCorrespondence/"><img tmplname="default" src="/images/ticons/default.gif" width="26" height="26" border="0" align="left"><span class="templateName" id="BusinessCorrespondence">Общение: Деловая переписка</span><span class="templateDesctiption">Официальная переписка по вопросам бизнеса.</span></a></div>
    <div class="btwTemplate"></div>
    <div class="aboutTemplate"><a onclick="javascript:return false;" href="/t/LoveAndDating/"><img tmplname="default" src="/images/ticons/default.gif" width="26" height="26" border="0" align="left"><span class="templateName" id="LoveAndDating">Общение: Знакомства</span><span class="templateDesctiption">Поиск пары на сайтах знакомств, переписка, любовь и дружба.</span></a></div>
    <div class="btwTemplate"></div>
    <div class="aboutTemplate"><a onclick="javascript:return false;" href="/t/Social/"><img tmplname="default" src="/images/ticons/default.gif" width="26" height="26" border="0" align="left"><span class="templateName" id="Social">Общение: Социальные сети</span><span class="templateDesctiption">Интерфейс социальных сетей Twitter, Facebook, Google+. Общение в них.</span></a></div>
    <div class="btwTemplate"></div>
  </div><span class="blockTemplateName ext">Общение: Личная переписка</span></div>
<div class="templateHeader" id="technicsTempl">
  <div class="templatesBlock">
    <div class="aboutTemplate"><a onclick="javascript:return false;" href="/t/Computer/"><img tmplname="default" src="/images/ticons/default.gif" width="26" height="26" border="0" align="left"><span class="templateName" id="Computer">Техника: Компьютеры</span><span class="templateDesctiption">Технический перевод: программирование, структура ПК, интернет, продукты Microsoft и документация Windows, электроника, цифровая бытовая техника.</span></a></div>
    <div class="btwTemplate"></div>
    <div class="aboutTemplate"><a onclick="javascript:return false;" href="/t/Automotive/"><img tmplname="default" src="/images/ticons/default.gif" width="26" height="26" border="0" align="left"><span class="templateName" id="Automotive">Техника: Автомобили</span><span class="templateDesctiption">Технический перевод: описание автомобилей, инструкции, объявления о покупке/продаже авто, новости из автосалонов.</span></a></div>
    <div class="btwTemplate"></div>
    <div class="aboutTemplate"><a onclick="javascript:return false;" href="/t/Gadget/"><img tmplname="default" src="/images/ticons/default.gif" width="26" height="26" border="0" align="left"><span class="templateName" id="Gadget">Техника: Гаджеты</span><span class="templateDesctiption">Технический перевод: описание новинок персональных мобильных устройств (телефоны, планшеты, электронные книги, нетбуки, ультрабуки, навигаторы, портативные аудио- и видеопроигрыватели).</span></a></div>
    <div class="btwTemplate"></div>
  </div><span class="blockTemplateName ext">Техника: Компьютеры</span></div>
<div class="templateHeader" id="travelTempl">
  <div class="templatesBlock">
    <div class="aboutTemplate"><a onclick="javascript:return false;" href="/t/Travels/"><img tmplname="default" src="/images/ticons/default.gif" width="26" height="26" border="0" align="left"><span class="templateName" id="Travels">Путешествия</span><span class="templateDesctiption">Бронирование отелей, авиа- и ж/д билеты, анкеты на визу, приглашения, формы-заявления.</span></a></div>
    <div class="btwTemplate"></div>
  </div><span class="blockTemplateName">Путешествия</span></div>
<div class="templateHeader" id="onlinesTempl">
  <div class="templatesBlock">
    <div class="aboutTemplate"><a onclick="javascript:return false;" href="/t/Onlines/"><img tmplname="default" src="/images/ticons/default.gif" width="26" height="26" border="0" align="left"><span class="templateName" id="Onlines">Онлайн-покупки</span><span class="templateDesctiption">Описания способов доставки и оплаты в интернет-магазинах, письма с уведомлениями, сервисные сообщения и элементы интерфейса, описания товаров.</span></a></div>
    <div class="btwTemplate"></div>
  </div><span class="blockTemplateName">Онлайн-покупки</span></div>
<div class="templateHeader" id="otherTempl">
  <div class="templatesBlock">
    <div class="aboutTemplate"><a onclick="javascript:return false;" href="/t/Business/"><img tmplname="default" src="/images/ticons/default.gif" width="26" height="26" border="0" align="left"><span class="templateName" id="Business">Прочее: Бизнес</span><span class="templateDesctiption">Кредиты, бухучет, биржевые и финансовые операции, налогообложение, логистика, юридическая документация, банковская деятельность.</span></a></div>
    <div class="btwTemplate"></div>
    <div class="aboutTemplate"><a onclick="javascript:return false;" href="/t/Sport/"><img tmplname="default" src="/images/ticons/default.gif" width="26" height="26" border="0" align="left"><span class="templateName" id="Sport">Прочее: Спорт</span><span class="templateDesctiption">Спортивные новости, аналитика о чемпионатах и спортивных событиях, форумы и блоги.</span></a></div>
    <div class="btwTemplate"></div>
    <div class="aboutTemplate"><a onclick="javascript:return false;" href="/t/Football/"><img tmplname="default" src="/images/ticons/default.gif" width="26" height="26" border="0" align="left"><span class="templateName" id="Football">Прочее: Футбол</span><span class="templateDesctiption">Футбольные термины, имена участников и тренеров, названия стадионов ЧМ-2014.</span></a></div>
    <div class="btwTemplate"></div>
    <div class="aboutTemplate"><a onclick="javascript:return false;" href="/t/Culinary/"><img tmplname="default" src="/images/ticons/default.gif" width="26" height="26" border="0" align="left"><span class="templateName" id="Culinary">Прочее: Кулинария</span><span class="templateDesctiption">Перевод кулинарных рецептов, меню ресторанов.</span></a></div>
    <div class="btwTemplate"></div>
    <div class="aboutTemplate"><a onclick="javascript:return false;" href="/t/Medicine/"><img tmplname="default" src="/images/ticons/default.gif" width="26" height="26" border="0" align="left"><span class="templateName" id="Medicine">Прочее: Здоровье</span><span class="templateDesctiption">Симптомы и лечение болезней, информация о медицинских учреждениях, литература о здоровом образе жизни, специальная литература и научные статьи по медицине.</span></a></div>
    <div class="btwTemplate"></div>
    <div class="aboutTemplate"><a onclick="javascript:return false;" href="/t/Music/"><img tmplname="default" src="/images/ticons/default.gif" width="26" height="26" border="0" align="left"><span class="templateName" id="Music">Прочее: Песни</span><span class="templateDesctiption">Перевод песен, статей по теории музыки и музыкальных жанров.</span></a></div>
    <div class="btwTemplate"></div>
    <div class="aboutTemplate"><a onclick="javascript:return false;" href="/t/General/"><img tmplname="default" src="/images/ticons/default.gif" width="26" height="26" border="0" align="left"><span class="templateName" id="General">Прочее: Без темы</span><span class="templateDesctiption">Все остальное.</span></a></div>
    <div class="btwTemplate"></div>
  </div><span class="blockTemplateName ext">Прочее: Без темы</span></div>
<div style="clear:both;"></div><script>
    
    buildAllTemplatesList(countListTemplCol);
    initTemplate('General');
    
    var curOpenTemplate = '';

    $(".aboutTemplate").hover(function(event){
    $(this).find('img').attr('src', '/images/ticons/'+$(this).find('img').attr('tmplname')+'_c.gif')
    },
    function(event){
    $(this).find('img').attr('src', '/images/ticons/'+$(this).find('img').attr('tmplname')+'.gif')
    }
    )
     $(".aboutTemplateL").hover(function(event){
    $(this).find('img').attr('src', '/images/ticons/'+$(this).find('img').attr('tmplname')+'_c.gif')
    },
    function(event){
    $(this).find('img').attr('src', '/images/ticons/'+$(this).find('img').attr('tmplname')+'.gif')
    }
    )

//    $(".templateHeader").toggle(
//    function(event){
//    $(".templatesBlock").hide();
//    $(".templateHeader").removeClass('tempSelectTemplate');
//    //$("#keepClick").show();
//    $("#keepClickTemplate").show();
//    $(this).find(".templatesBlock").show();
//    $(this).addClass('tempSelectTemplate');
//    },
//    function(event){
//    $(".templatesBlock").hide();
//    $(this).removeClass('tempSelectTemplate');
//    //$("#keepClick").hide();
//    $("#keepClickTemplate").hide();
 //   });
 
    $(".templateHeader").click(
    function(event){
    if (curOpenTemplate == ''){
          $(".templateHeader").removeClass('tempSelectTemplate');
          $("#keepClickTemplate").show();
          //alert('1');
          $("#keepClickTemplateTop").show();
          //alert('2');
          $(this).find(".templatesBlock").show();
          $(this).addClass('tempSelectTemplate');
          curOpenTemplate = $(this).attr('id');
          //alert($(this).attr('id'));
          }
    else {
          if ($(this).attr('id')== curOpenTemplate){
                $(".templatesBlock").hide();
                $("#keepClickTemplate").hide();
                $("#keepClickTemplateTop").hide(); 
                curOpenTemplate = '';
                 $(".templateHeader").removeClass('tempSelectTemplate');
                }
          else {
                 $("#"+curOpenTemplate+"").find(".templatesBlock").hide();
                 $(".templateHeader").removeClass('tempSelectTemplate');
                 $(this).find(".templatesBlock").show();
                 $(this).addClass('tempSelectTemplate');
                 curOpenTemplate = $(this).attr('id');
                
                }
          
          }
    });
 
 
 

    $(".aboutTemplate").click(function(event){
    if ($("#template").val()!=$(this).find('.templateName').attr('id')) {GA_eTrack();}
    $("#template").val($(this).find('.templateName').attr('id'));
    $(this).parent().next().html($(this).find('.templateName').html());
    $(".templateHeader").removeClass('curentBlockTemplate')
    $(this).parent().parent().addClass('curentBlockTemplate');
    $(".aboutTemplate").removeClass('curSelectTempl');
    $(".aboutTemplateL").removeClass('curSelectTempl');
    $("#ab_"+$(this).find('.templateName').attr('id')).parent().addClass('curSelectTempl');
    $(this).addClass('curSelectTempl');
    if (location.pathname.indexOf("t/")>=0){
        if (rtrim($("#SiteContent_sourceText").val())!="") {GetTranslationCBK(1);}
        else {location.href="http://"+location.hostname+"/#!/"+$(this).find('.templateName').attr('id')+"/"}
        }
    else{
        setHash();
        if (rtrim($("#SiteContent_sourceText").val())!="") {GetTranslationCBK(1);}
        }
    
      
      
    });
    
    $(".aboutTemplateL").click(function(event){
    if ($("#template").val()!=$(this).find('.templateName').attr('id').substr(3)) {GA_eTrack();}
    var aId = $(this).find('.templateName').attr('id').substr(3);
    $("#template").val(aId);
    $(".aboutTemplate").removeClass('curSelectTempl');
    $(".aboutTemplateL").removeClass('curSelectTempl');
    $(".templateHeader").removeClass('curentBlockTemplate');
    initTemplate(aId);
    $(this).addClass('curSelectTempl');
    $('.aboutTemplate #'+aId).parent().addClass('curSelectTempl');
    hideAllTemplates();
    if (location.pathname.indexOf("t/")>=0){
        if (rtrim($("#SiteContent_sourceText").val())!="") {GetTranslationCBK(1);}
        else {location.href="http://"+location.hostname+"/#!/"+aId+"/"}
        }
    else{
        setHash();
        if (rtrim($("#SiteContent_sourceText").val())!="") {GetTranslationCBK(1);}
        }
    
    });
    
function checkTempl(in_tmplVal){
switch (in_tmplVal.toLowerCase()){ 
        case "sms": 
          in_tmplVal = 'PersonalCorrespondence';
          break;
        case "personalia": 
          in_tmplVal = 'General';
        break;	 
        default: 
           in_tmplVal = in_tmplVal;
    }
return in_tmplVal;
}

    function initTemplate(ctemp){
    ctemp = checkTempl(ctemp);
    $('.aboutTemplate #'+ctemp).parent().parent().addClass('curSelectTempl');
    $('.aboutTemplateL #ab_'+ctemp).parent().addClass('curSelectTempl');
    $("#template").val(ctemp);
    $('.aboutTemplate #'+ctemp).parent().parent().parent().parent().addClass('curentBlockTemplate');
    $('.aboutTemplate #'+ctemp).parent().parent().parent().next().html($('.aboutTemplate #'+ctemp).html());
    }

    
    function GA_eTrack(){
    _gaq.push(['_setCustomVar',1,'Template',$("#template").val(),3]);
    _gaq.push(['_setCustomVar',2,'SrcLang',langConvertor(GetDir()[0]),3]);
    _gaq.push(['_setCustomVar',3,'TgtLang',langConvertor(GetDir()[1]),3]);  
    _gaq.push(['_setCustomVar',4,'UserLang',langConvertor(GetDir()[0])+"-"+langConvertor(GetDir()[1]),3]);
    _gaq.push(['_trackEvent', 'Linguistic', 'Template', 'Change']);
    }

    function buildAllTemplatesList(cltc){
    var elements = $('#allList .aboutTemplateL');
    for(i=0;i<cltc;i++){ $('#fCol').append(elements[i]); if (i!=cltc-1) {$('#fCol').append('<div class="btwTemplate"></div>');}}
    for(i=cltc;i<cltc*2;i++){ $('#sCol').append(elements[i]); if (i!=cltc*2-1) { $('#sCol').append('<div class="btwTemplate"></div>');}}
    for(i=cltc*2;i<elements.length;i++){ $('#tCol').append(elements[i]);  $('#tCol').append('<div class="btwTemplate"></div>');}
    }

 
  </script></div>
       <input type="hidden" name="template" id="template" value="General" />
       <script>
           //var lnkText = $("#transLink").text(); $("#transLink").remove(); $("<span>" + lnkText + "</span>").prependTo("header h2");
           
           function templateFromCookies() {
               var tmplCookie = "General";
               var cString = getCookie('selDirText');
               if (cString) {
                   //alert(cString);
                   //var cString="selectedDir=ar&selectedTpl=General&selectedOtherTpl=General";
                   var allCookie = cString.split("&");
                   for (i = 0; i < allCookie.length; i++) {
                       if (allCookie[i].substring(0, 11) == 'selectedTpl') tmplCookie = allCookie[i].substring(12);
                   }
                   SetTemplates(tmplCookie);
               }
           }


           function SetTemplates(tmplVal) {
               tmplVal = checkTempl(tmplVal);
               $(".aboutTemplate").removeClass('curSelectTempl');
               $(".aboutTemplateL").removeClass('curSelectTempl');
               $(".templateHeader").removeClass('curentBlockTemplate');
               initTemplate(tmplVal);
               $(this).addClass('curSelectTempl');
               $('.aboutTemplate #' + tmplVal).parent().addClass('curSelectTempl');
               $("#ab_" + tmplVal).parent().addClass('curSelectTempl');
           } //SetTemplates




           if ("" != '') { SetTemplates(""); }
           else {
               if (decodeURIComponent(location.hash) == '') { templateFromCookies(); } 
           }
   

</script>
    </section>
    <section id="directionSection">
    

      <div id="dir_set">
      <div class="trop_site"> 

        <select name="ctl00$SiteContent$dirs$rLangReserv" id="SiteContent_dirs_rLangReserv" style="display:none;">
	<option value="en" class="au ru de fr es pt it ja el ar ca tr">Английский</option>
	<option value="ar" class="au en ru">Арабский (beta)</option>
	<option value="el" class="au en ru">Греческий (beta)</option>
	<option value="es" class="au en ru de fr">Испанский</option>
	<option value="it" class="au en ru de">Итальянский</option>
	<option value="kk" class="au ru">Казахский (beta)</option>
	<option value="ca" class="au en ru">Каталанский (beta)</option>
	<option value="de" class="au en ru fr es it pt">Немецкий</option>
	<option value="pt" class="au en ru de">Португальский</option>
	<option selected="selected" value="ru" class="au en de fr es pt it ja fi el ar ca tr kk">Русский</option>
	<option value="tr" class="au en ru">Турецкий (beta)</option>
	<option value="fi" class="au ru">Финский</option>
	<option value="fr" class="au en ru de es">Французский</option>
	<option value="ja" class="au en ru">Японский</option>
</select>

      <span style="float: left;" id="dmenu" onclick="cancel_bubbling(event)" onmouseup="cancel_bubbling(event)" onmousedown="cancel_bubbling(event)"> 
      <span class="selDiv" > 
     <div style="border:1px solid #ffffff; overflow: hidden; float:left;">
        <select name="ctl00$SiteContent$dirs$sLang" id="SiteContent_dirs_sLang">
	<option value="au" class="ru">Определить язык</option>
	<option value="en" class="ru">Английский</option>
	<option value="ar" class="ru">Арабский (beta)</option>
	<option value="el" class="ru">Греческий (beta)</option>
	<option value="es" class="ru">Испанский</option>
	<option value="it" class="ru">Итальянский</option>
	<option value="kk" class="ru">Казахский (beta)</option>
	<option value="ca" class="ru">Каталанский (beta)</option>
	<option value="de" class="ru">Немецкий</option>
	<option value="pt" class="ru">Португальский</option>
	<option value="ru" class="en">Русский</option>
	<option value="tr" class="ru">Турецкий (beta)</option>
	<option value="fi" class="ru">Финский</option>
	<option value="fr" class="ru">Французский</option>
	<option value="ja" class="ru">Японский</option>
</select>
     </div>
        </span> 
        <span style="padding: 4px; display: inline; float: left;"> <a href="javascript:;" onclick="javascript:RevertDir('SiteContent_dirs_sLang','SiteContent_dirs_rLang');" id="chBtt_a"><img src="/images/common/ch_ico_16_d.gif" alt="Поменять языки местами" name="ch_bttn" width="22" height="23" border="0" align="top" id="ch_bttn" title="Поменять языки местами"/> </a> </span> 
        <span id="rLang_span" class="selDiv">
        <div style="border:1px solid #ffffff; overflow: hidden; float:left;">
        <select name="ctl00$SiteContent$dirs$rLang" id="SiteContent_dirs_rLang" onchange="ChangedLang();">
	<option value="en" class="au ru de fr es pt it ja el ar ca tr">Английский</option>
	<option value="ar" class="au en ru">Арабский (beta)</option>
	<option value="el" class="au en ru">Греческий (beta)</option>
	<option value="es" class="au en ru de fr">Испанский</option>
	<option value="it" class="au en ru de">Итальянский</option>
	<option value="kk" class="au ru">Казахский (beta)</option>
	<option value="ca" class="au en ru">Каталанский (beta)</option>
	<option value="de" class="au en ru fr es it pt">Немецкий</option>
	<option value="pt" class="au en ru de">Португальский</option>
	<option selected="selected" value="ru" class="au en de fr es pt it ja fi el ar ca tr kk">Русский</option>
	<option value="tr" class="au en ru">Турецкий (beta)</option>
	<option value="fi" class="au ru">Финский</option>
	<option value="fr" class="au en ru de es">Французский</option>
	<option value="ja" class="au en ru">Японский</option>
</select>
        </div>
    <input type="hidden" id="chLangs" name="chLangs" value="false" />

        </span> 
        </span>


 

        <div id="btr_web">
          <input type="button" class="translit" id="bTranslate" onclick="javascript:GetTranslationCBK(1);" value="перевести" name="bTranslate">
        </div>
      </div>
    </div>
    </section> 
    
    <section id="rightSection">
        <div id="Adv240">
       
            <script type='text/javascript'>
                //GA_googleFillSlot("Translate.Ru_240x400_inPage");
            </script>
            
             <!-- новые рекламные коды BestSeller и ЯЗнаю 04.2014 -->
             <div id="adriver_banner_399488126"></div>
             
                <script>
                    (function () {
                        //if (!window.yandex_rtb_is_displayed) {
                            render_alternative4RTB_240();
                        //} // else was show RTB already
                    })();

                    // show other BS
                    function render_alternative4RTB_240() {
                        //alert("Please insert site AD 240х400 code!");
                        //document.getElementById("adriver_banner_399488126").style.border="1px solid green";
                        new adriver("adriver_banner_399488126", { sid: 196839, bt: 52, bn: 2, pz: ar_duo1, keyword: encodeURIComponent(typeof crtg_content !== 'undefined' && crtg_content ? crtg_content : '') });
                        // Here show site ad 
                        //		e.t.c.
                        //		var addiv = document.getElementById('yandex_ad_' + g_rtb_yandex_page_id);
                        //		addiv.innerHTML = ...
                    }
             </script>
           
                   
        </div>
        <div id="blogRSSRight" class="rightBlog"></div>
    </section>
    
    <div id="viewModeBlock">
    
        <div class="viewModeList">
            <div class="viewModeEl curSelectTempl">
              <img src="/images/common/vm_vert_ico_sh.png" width="32" height="29" border="0" align="left" />
              <span class="viewModeName" id="vertBl">Слева направо</span>
              <span class="viewModeDesctiption">Результат перевода отображается справа от окна с исходным текстом</span>
            </div>
            <div class="btwTemplate"></div>
            <div class="viewModeEl">
              <img src="/images/common/vm_horiz_ico_sh.png" width="32" height="29" border="0" align="left" />
              <span class="viewModeName" id="horizBl">Сверху вниз</span>
              <span class="viewModeDesctiption">Результат перевода отображается ниже окна с исходным текстом </span>
            </div>
            <div class="btwTemplate"></div>
            <div class="viewModeEl">
              <img src="/images/common/vm_auto_ico_sh.png" width="32" height="29" border="0" align="left" />
              <span class="viewModeName" id="autoBl">(определен автоматически)</span>
              <span class="viewModeDesctiption">Режим отображения переключается в зависимости от разрешения экрана</span>
            </div>
	    </div>
	    <span id="viewModeStatus">
            <img src="/images/common/vm_vert_ico.png" height="26" width="26" align="right" hspace="5" border="0" />
            Режим просмотра <br/>
            <span id="vmDes"></span>
        </span> 
     
     </div>
     
     
    <section id="mainSection">
    
      <div id="sourceBlock" class="vert">
        <div id="source" onclick="cancel_bubbling(event)" onmouseup="cancel_bubbling(event)" onmousedown="cancel_bubbling(event)">
            <div id="ttSourceText">Введите слово, текст или адрес сайта для перевода
            </div><div id="btt"></div>
            <!--<div id="sourceTextBrdr">-->
            <textarea name="ctl00$SiteContent$sourceText" id="SiteContent_sourceText" onkeyup="textLimit();" spellcheck="false" onchange="textLimit();" onselect="javascript:captureRefers();" class="expand101-2400" onfocus="javascript:hideToolTip();"></textarea>
            <!--</div>-->
             <!-- speech -->
            <div id="disMicro"><img id="dis_mic" src="/images/speech/mic_dis.png"><span class="speech_info"><p>Выберите язык входного текста.</p></span></div>
            <button type="button" id="start_button" onclick="addGAEvent(); startButton(event);" style="display:none;">
            <!--<img id="start_img" src="/images/speech/mic.gif" alt="Start">--><img id="start_img" src="/images/speech/mic.png" alt="Start">
            <span class="speech_info" id="info">
                <p id="info_start"></p>
                <p id="info_speak_now"></p>
                <p id="info_no_speech"></p>
                <p id="info_no_microphone" style="display:none"></p>
                <p id="info_allow"></p>
                <p id="info_denied"></p>
                <p id="info_blocked"></p>
                <p id="info_upgrade"></p>
            </span></button>

           

        </div>
        <div id="editBttns">
            <span class="editBttn" id="copyBttn" ><a href="javascript:Copy1();"><img src="/images/common/copy_ico25.gif" border="0"  alt="Копировать текст" title="Копировать текст"/></a></span>
            <span class="editBttn" id="pasteBttn"><a href="javascript:Paste1();" ><img src="/images/common/paste_ico25.gif" border="0"  alt="Вставить текст " title="Вставить текст "/></a></span>
            <span class="editBttn" id="clearBttn"><a href="javascript:Delete1();" ><img src="/images/common/clear_ico25.gif" border="0"  alt="Очистить " title="Очистить"/></a></span>
            <span class="editBttn" id="spellBttn"><a href="javascript:Spelling();"><img src="/images/common/spell_ico25.gif" border="0"  alt="Проверить орфографию" title="Проверить орфографию"/></a></span>
            <span class="editBttn" id="dictBttn"><a href="javascript:showRefers();"><img src="/images/common/dict_ico25.gif" border="0"  alt="Словарь" title="Словарь"/></a></span>
            <span class="editBttn" id="vkBttn" style="padding-left:30px;"><a href="javascript:callVK();"><img src="/images/common/keyboard_ico25.gif" border="0" alt="Виртуальная клавиатура" title="Виртуальная клавиатура" /></a></span>

        </div>
      </div>
       <script>
           function hideToolTip() {

               $('#btt').slideUp(300); $('#ttSourceText').slideUp(300);
           }
           $('#SiteContent_sourceText').focus();
           setTimeout('if ((blogPos == "top")&&(tt_count<11)){$("#btt").slideDown(100);$("#ttSourceText").slideDown(100);}', 500);
       </script>
     
      <div id="resultBlock" class="vert">  
        <div id="result">
          <div id="blurResult"><img src="/images/common/ajax-loader.gif" border="0" /></div>
     
    
     
          <div id="blogRSS" class="topBlog">
            <a href="http://blog.translate.ru/2016/05/prover-svoj-anglijskij/"><div class="blogHeader">Проверь свой английский</div><div class="blogData">06.05.2016</div><div class="blogPost">Мы начинаем новую рубрику «Проверь свой английский», где пару раз в неделю будем размещать запись с забавными и полезными фразами на английском языке и вариантами ответа.</div></a>          
            <div id="moreBlog">Читать больше: 
                    <a target="_blank" href="http://blog.translate.ru"   rel="alternate" type="application/rss+xml"><img border="0" align="absmiddle" alt="RSS" title="RSS" src="/images/common/rss_ico28.gif"></a>
                    <a target="_blank" href="http://twitter.com/translate_ru"><img border="0" align="absmiddle" title="Follow Translate.Ru on Twitter" src="/images/common/twitter_ico28.gif"></a>
                    <a target="_blank" href="http://www.facebook.com/Translate.Ru"><img border="0" align="absmiddle" title="Translate.Ru на Facebook" src="/images/common/fb_ico28.gif"></a>
                    <a target="_blank" href="http://vk.com/translateru"><img  border="0" align="absmiddle" title="В Контакте" alt="В Контакте" src="/images/common/vk_ico28.gif"></a>
                    <a target="_blank" href="http://translateru.livejournal.com/"><img   border="0" align="absmiddle" alt="[info]" title="ЖЖ" src="/images/common/lj_ico28.gif"></a>
            </div>
         </div>
         
        
         
         <div id="editResultWin_test">
         <textarea spellcheck="false" id="editResult_test" onfocus="javascript:showEditTranslationWin(1);" ></textarea>
         <div id="spellBttms_test" style="text-align:center; padding:10px">
            <input type="button" onclick="javascript:hideEditTranslationWin(1);sendGAEditEvents('ok')" value="Готово! " class="transit_">
            &nbsp;&nbsp;&nbsp;&nbsp; 
            <input type="button" onclick="javascript:hideEditTranslationWin(0);sendGAEditEvents('cancel')" value="Отмена " class="cancelBtt"></div>
         </div>
         

         <div id="translationResult"></div>
         <div id="divFullWordResult"></div>

         <div id="topPhrasesBlock">
            <div id="PhrasesBlock">
                <h3 class="dictBlockHeader">Словосочетания <span id="totalPhrCount10"></span></h3>
                <div id="topPhrases" class="js-expandtxt"></div>
                <div id="morePhrases" class="morePhrases"><a href="javascript:;" id="linkMorePhrases" onclick="ShowFullDictPhr();">Весь список</a></div>
            </div>
          </div>

          <div id="topSamplesBlock">
            <div id="SamplesBlock">
                <h3 class="dictBlockHeader">Примеры использования <span id="totalSmplCount10"></span></h3>
                <div id="topSamples" class="js-expandtxt"></div>
                <div id="moreSamples" class="morePhrases"><a href="javascript:;" id="linkMoreSamples" onclick="ShowFullDictSampl();">Весь список</a></div>
            </div>
          </div>


          <div id="explanatoryBLock">
            <h3 class="dictBlockHeader">В толковых словарях</h3>
    
          </div>

         <div id="autoInfo">Перевод выполнен </div>
         <div id="adviseIconDiv" style="display:none;position:relative;"><!--<a href="javascript:;"  id="adviseIcon"><img src="/images/common/yellwar_icon16.gif" border="0"/></a>--></div>
         <div id="adviseWindow" style="display: none;">
                <img src="/images/common/yellwar_icon.gif" align="left" style=" padding:5px 18px 40px 5px;">
                <span id="adviseText"></span>
         </div>
         
         <div id="socialServices">
         <div id="ttt"></div>
          <div id="AdvInResult">
            <div><iframe id="inResultlFrame" name="inResultlFrame" width="400px" height="200px" scrolling="no" style="border:0px" src="" scrolling="no" frameborder="0" ></iframe>
        <script>
           // var myObj3 = new function(){
	         //     this.handler = function(data){$("#inResultlFrame").attr('src', '/Components/advert_ir.html');};
	         //     customEvents.subscribe("onTranslate", this.handler);
	        //}
	        </script>
      </div>
            <!--<iframe id="inResultlFrame" name="testIA" width="400px" height="200px" scrolling="no" style="border:0px solid red " src="" scrolling="no" frameborder="0" ></iframe>-->
        </div>
        <!-- edit translation result-->
        <div id="resultFunction">
            <span class="editBttn" id="clearResBtt"><a href="javascript:Delete2();" ><img src="/images/common/clear_ico25.gif" border="0"  alt="Очистить" title="Очистить"/></a></span>
            <span class="editBttn" id="editResBtt" ><a href="javascript:;" onclick="javascript:showEditTranslationWin(1);" title="Редактировать перевод"><img src="/images/common/edit_ico25.gif" border="0" alt="Редактировать перевод"/></a></span>
            <span class="editBttn" id="printResBtt" ><a href="javascript:;" onclick="javascript:showPrintWin();" title="Распечатать перевод"><img src="/images/common/print_ico25.gif" border="0" alt="Распечатать перевод"/></a></span>
        </div>
        <!-- -->
         <!-- rating-->
         <div id="rating">
            <span id="trest">Оценить перевод: </span><img src="/images/common/starblank.gif" border="0"  align="absmiddle" id="rst1" onmouseout="javascript:clRating();" onclick="javascript:sendRating(1);" onmouseover="javascript:shRating(1);" class="vt" /><img src="/images/common/starblank.gif" border="0"  align="absmiddle" id="rst2" onmouseout="javascript:clRating();" onclick="javascript:sendRating(2);" onmouseover="javascript:shRating(2);" class="vt"/><img src="/images/common/starblank.gif" border="0" align="absmiddle" id="rst3" onmouseout="javascript:clRating();" onclick="javascript:sendRating(3);" onmouseover="javascript:shRating(3);"  class="vt" /><img src="/images/common/starblank.gif" border="0" align="absmiddle" id="rst4" onmouseout="javascript:clRating();" onclick="sendRating(4)" onmouseover="javascript:shRating(4);" class="vt"  /><img src="/images/common/starblank.gif" border="0"  align="absmiddle" id="rst5" onmouseout="javascript:clRating();" onclick="javascript:sendRating(5);" onmouseover="javascript:shRating(5);" class="vt" /><br/>
         </div>
          <!---->  
          
          
         <!-- saveLink-->
            <a id="linkGL" href="javascript:;" onclick="javascript:getTranslationLinks();">Поделиться переводом</a> <a href="javascript:;" onclick="javascript:getTranslationLinks();"><img id="linkGL_img"  src="/images/common/ss_icns_bt.png" height="16" border="0"  align="top" /></a>
            
            <span id="getLinkSpan">
             <br /><div><a href="javascript:closeTranslationLinks();" class="close_"><img src="/images/common/closer.png" border="0" id="Img2"  align="right"/></a><br/></div>               
                <div id="loadingLink">
                        <img src="/images/common/al_fullWR.gif" width="15" height="15" /> Подождите, пожалуйста... 
                </div>
                
                <span id="saveLinkResult">
                
                
                <b style="clear:both;padding-right:30px;"> Прямая ссылка на перевод: </b><br/>
                 <div class="input_txt1" style="width: 100%;  max-width: 335px; float:right;">
                <input type="text"  id="dTrLink" name="dTrLink" value="http://www.translate.ru/"  onfocus="this.select()" readonly="readonly"/>
                </div>
                
                <!--<div style=" clear:both; height:1px; overflow:hidden;">&nbsp;</div>-->
                <div id="t_likes"></div>
                <div style=" clear:both; height:1px; overflow:hidden;"></div>
                <b style="padding-right:9px;">Код для вставки на сайт или в блог: </b>
                <div class="input_txt1" style="width: 100%;  max-width: 335px; height:120px; float:right;">
                <textarea style="" rows="3" id="fTrLink" name="fTrLink" onfocus="this.select()" readonly="readonly"> </textarea><br/>
                </div>
                <p style="text-align:right; padding-right:10px; margin-top:-13px; clear:both; display:none;" id="VLspan" ><span><img src="/images/common/eye.gif" align="absmiddle" hspace="5">&nbsp;<a href="javascript:;" onclick="javascript:getViewTranslationLinks();">Как это будет выглядеть </a></span></p>
                    <div id="getViewLinkSpan" style=" display:none; clear:both">
                    <a href="http://www.translate.ru"><img src="http://www.translate.ru/images/ru/logo88x31.gif" width="88" height="31" border="0" hspace="4" alt="Translate.Ru" title="Онлайн-переводчик и словарь Translate.Ru" align="absmiddle"/></a> Перевести на русский "" с помощью Translate.Ru.
                    </div>
                            
                
                
                 
                <br/>
                </span>
            </span>
            <br/>
           <!----> 
           
         <!-- addTranslation-->
         <a id="linkAT" href="javascript:;" onclick="javascript:showwAddTranslation();">Предложите свой перевод </a> <img src="/images/common/at_ico.gif" border="0"  align="top" id="linkATPic" />
            <span id="ATSpan">
            <div><a href="javascript:closewAddTranslation();" class="close_"><img src="/images/common/closer.png" border="0" id="Img4" align="right"/></a></div><br/>
            
            <div style="display:none;" id="servATText"><b><img hspace="10" align="middle" src="/images/common/al_fullWR.gif"/>Сохраняем перевод </b></div> 
            <div style="margin-top:10px;" id="ATForm"><b>Ваш вариант перевода: </b><br/>
            <div class="input_txt2" style="width: 100%;  max-width: 335px; height:107px; float:right;">
                <textarea rows="3" id="addTranslationText" name="addTranslationText" ></textarea>
            </div>
                <span id="errAddTranslation" style="color:red;height:10px; display:block; width:320px; clear: right;"></span><br/>
                <input type="button" value="Отправить" id="addTranslationBttn" onclick="javascript:saveUTranslation();"/></div>
            </span>
            
            
            <!---->
            <br/>
         </div>
         
         
        </div>
      </div>

     
      <div style="clear:left">&nbsp;</div>
    </section> 
    
    <!-- new adv 728x200 06.2014  -->
    
         <div id="adv_middle" style="width:728px; min-height:1px; background-color:#ffffff; margin-right:260px;">
          <div id="adriver_banner_728x200" ></div>
         </div>
    <script type="text/javascript">
        //new adriver("adriver_banner_728x200", {sid:196839, bt:52, bn:6, pz:ar_duo1, keyword: encodeURIComponent(typeof crtg_content !== 'undefined' && crtg_content ? crtg_content : '')});
    </script>
    
    <section id="4advSection">
    <div id="adv4Blocks">
        <div class="adv4ElGr">
           <div id="advBlock1" class="bottom_sBlock1 advElem3">
        <div class="adv4El" id="adv4El2">
                <div class="adv4ElTop"><a href="/Tools/">Разработчикам</a></div>
                <div class="adv4ElImg"><a href="/Tools/"><img src="/images/advico/advico2.gif" title="Интеграция в офисные решения и API для разработчиков." /></a></div>
                <div class="adv4ElText"><a href="/Tools/">Интеграция в офисные решения и API для разработчиков.</a></div>
                <div class="adv4ElFoot"></div>
            </div>
      </div>
        </div>
        <div class="vLineDiv"></div>
        <div class="adv4ElGr">
            <div id="advBlock2" class="bottom_sBlock2 advElem3">
			<div class="adv4El"  id="adv4El4">
                <div class="adv4ElTop"><a href="http://www.onehourtranslation.ru/affiliate/promt_trru" target="_blank">Ручной перевод</a></div>
                <div class="adv4ElImg"><a href="http://www.onehourtranslation.ru/affiliate/promt_trru" target="_blank"><img src="/images/advico/advico4a.gif" title="Закажи профессиональный перевод, выполненный вручную." /></a></div>
                <div class="adv4ElText"><a href="http://www.onehourtranslation.ru/affiliate/promt_trru" target="_blank"><b>OneHourTranslation.Ru</b><br/>Закажи профессиональный перевод, выполненный вручную.</a></div>
                <div class="adv4ElFoot"></div>
            </div>
      </div>           
        </div>
    
        <div class="vLineDiv"></div>
        <div class="adv4ElGr">
            <div id="advBlock3" class="bottom_sBlock3 advElem3">
        <div class="adv4El" id="adv4El1">
                <div class="adv4ElTop"><a href="/Download/">Скачать</a></div>
                <div class="adv4ElImg"><a href="/Download/"><img src="/images/advico/advico1.gif" title="Скачай программу-переводчик для своего компьютера!" alt="Где и как скачать переводчик на компьютер" /></a></div>
                <div class="adv4ElText"><a href="/Download/">Выбери программу-переводчик для своего компьютера!</a></div>
                <div class="adv4ElFoot"></div>
      </div>
        </div>
        </div>
        <div class="vLineDiv"></div>
        <div class="adv4ElGr">
            <div id="advBlock4" class="bottom_sBlock4 advElem3">
        <div class="adv4El" id="adv4El3">
                <div class="adv4ElTop"><a href="/Mobile/">Для мобильных</a></div>
                <div class="adv4ElImg"><a href="/Mobile/"><img src="/images/advico/advico3.gif" title="Мобильные приложения Translate.Ru"  alt="Где и как скачать переводчик на телефон"  /></a></div>
                <div class="adv4ElText"><a href="/Mobile/">Мобильные приложения Translate.Ru. Узнай, как пользоваться нашим переводчиком с мобильного устройства.</a></div>
                <div class="adv4ElFoot"></div>
      </div>
        </div>
        </div>
        
        
    </div>
    </section>
    <section id="bottomAdvSection">
        <div id="bottomAdv">
        <div><!-- 2011.03.04  -->
           <!-- Translate.Ru_bottom -->
          <script type='text/javascript'>
          GA_googleFillSlot("Translate.Ru_bottom");
          </script>
        </div>                       
        
        </div>
    </section>
     <div style="clear:both">&nbsp;</div>
     <!--<a href="javascript:;" onclick="javascript:setHash();">test</a>
     <br/>
    <a href="javascript:;" onclick="javascript:getParams();">getParams</a>
    <br />
    <a href="javascript:;" onclick="javascript:reloadBottomAdv();">reloadTranslate.Ru_bottom</a>-->
    </div>
       <div id="serviceErrorSFr"  style="display:none;">
                <img src="/images/common/yellwar_icon.gif" align="left" style=" padding:5px 18px 40px 5px;">
                <span id="Span2">Сервис временно недоступен. Если ошибка повторится, сообщите о ней разработчикам через форму обратной связи.</span>
    </div>
    <div id="serviceErrorSFl"  style="display:none;">
                <img src="/images/common/yellwar_icon.gif" align="left" style=" padding:5px 18px 40px 5px;">
                <span id="Span1">Сервис временно недоступен. Если ошибка повторится, сообщите о ней разработчикам через форму обратной связи.</span>
    </div>
    <div id="serviceErrorSFt"  style="display:none;">
                <img src="/images/common/yellwar_icon.gif" align="left" style=" padding:5px 18px 40px 5px;">
                <span id="alertTxt">Сервис временно недоступен. Если ошибка повторится, сообщите о ней разработчикам через форму обратной связи.</span>
    </div>
<script type="text/javascript">
    $(document).ready(function () {
        //if (""!='') {SetTemplates("");}    
        //else{
        //    if (decodeURIComponent(location.hash)==''){templateFromCookies();}}
        if ("" == "1") { location.hash = ""; GetTranslationCBK(0); }
    });





    function setHash() {
        var strHash = "!/" + $("#template").val() + "/";
        //if (rtrim($("#SiteContent_sourceText").val())!="") {strHash = strHash + "/#"+rtrim($("#SiteContent_sourceText").val())}
        location.hash = strHash;
        GetNewAdvert();
    }

    function getDir4Hash() {
        var nameSDir = "";
        var nameRDir = "";
        var dirCode = GetDir();
        switch (dirCode.charAt(0)) {
            case "r":
                nameSDir = 'ru';
                break;
            case "e":
                nameSDir = 'en';
                break;
            case "g":
                nameSDir = 'de';
                break;
            case "f":
                nameSDir = 'fr';
                break;
            case "s":
                nameSDir = 'es';
                break;
            case "i":
                nameSDir = 'it';
                break;
            case "p":
                nameSDir = 'pt';
                break;
            case "o":
                nameSDir = 'fi';
                break;
            case "a":
                nameSDir = 'au';
                break;
            case "j":
                nameSDir = 'jp';
                break;
            default:
                nameSDir = '';
        }
        switch (dirCode.charAt(1)) {
            case "r":
                nameRDir = 'ru';
                break;
            case "e":
                nameRDir = 'en';
                break;
            case "g":
                nameRDir = 'de';
                break;
            case "f":
                nameRDir = 'fr';
                break;
            case "s":
                nameRDir = 'es';
                break;
            case "i":
                nameRDir = 'it';
                break;
            case "p":
                nameRDir = 'pt';
                break;
            case "o":
                nameRDir = 'fi';
                break;
            case "j":
                nameRDir = 'jp';
                break;
            default:
                nameRDir = '';
        }

        return nameSDir + "-" + nameRDir
    }

    function getParams4SavedLink(trid) {
        //$("#blurResult").show();
        $.ajax({
            type: "POST",
            contentType: "application/json; charset=utf-8",
            url: "/services/TranslationService.asmx/GetSavedTranslation",
            data: "{ trid:'" + trid + "'}",
            dataType: "json",
            success: function (res) {
                var result = GetAjaxResult(res);
                trUID = result.uid;
                //alert('getParams4SavedLink')
                //устанавливаем языки
                //setDirFromParam('a','r');
                //alert(result.dirCode);
                setDirFromParam(result.dirCode.charAt(0), result.dirCode.charAt(1));
                //исходный текст
                $("#SiteContent_sourceText").val(decodeURIComponent(result.source));
                //устанавливаем тематику
                $(".aboutTemplate").removeClass('curSelectTempl');
                $(".aboutTemplateL").removeClass('curSelectTempl');
                $(".templateHeader").removeClass('curentBlockTemplate');
                initTemplate(result.template);
                $(this).addClass('curSelectTempl');
                $('.aboutTemplate #' + result.template).parent().addClass('curSelectTempl');
                $("#ab_" + result.template).parent().addClass('curSelectTempl');
                //переводим текст     
                GetTranslationCBK(1);
                GetNewAdvert();
                //$("#blurResult").hide();
            },
            error: function (XMLHttpRequest, textStatus, errorThrown) {
                alert("GetSavedTranslation Error!");
            }
        });


    }


    function getTemplatesList() {
        $("#allTemplatesBlock .aboutTemplateL .templateName").each(function (n) { templList[n] = $(this).attr('id').substring(3); })
    }

    getTemplatesList();

    function getParams() {
        var curSource = '';
        var curTemplParam = '';
        var curDirParam = '';
        var curSLang = '';
        var curRLang = '';
        var strParam = decodeURIComponent(location.hash);
        if (strParam != '') { //  в хеше стопка параметров, обрабатываем
            strParam = strParam.substring(1)
            if (strParam.substring(0, 2) == "!/") {
                strParam = strParam.substring(2);
                var params = strParam.split('/');
                if (params[0] == 'links') { //это сохраненный перевод
                    //alert("Это сохранненая ссылка на перевод"+localtion.href);
                    // берем данные из базы
                    getParams4SavedLink(params[1]);

                }
                else {//это не из базы. Парсим параметры дальше

                    for (var i = 0; i < params.length; i++) {
                        //Это текст?  
                        if (params[i].substring(0, 1) == "#") {//если есть # - это тект для перевода
                            curSource = params[i].substring(1);

                            $("#SiteContent_sourceText").val(curSource);
                            //alert('Есть текст для перевода');                          
                        }
                        else {
                            //Это направление?  
                            if ((params[i].length == 5) && (params[i].charAt(2) == '-')) {//5 символов, 3-ий = "-", плюс надо проверить наличие напарвлений
                                switch (params[i].substring(0, 2)) {
                                    case "ru":
                                        curSLang = 'r';
                                        break;
                                    case "en":
                                        curSLang = 'e';
                                        break;
                                    case "de":
                                        curSLang = 'g';
                                        break;
                                    case "fr":
                                        curSLang = 'f';
                                        break;
                                    case "es":
                                        curSLang = 's';
                                        break;
                                    case "it":
                                        curSLang = 'i';
                                        break;
                                    case "pt":
                                        curSLang = 'p';
                                        break;
                                    case "au":
                                        curSLang = 'a';
                                        break;
                                    case "jp":
                                        curSLang = 'j';
                                        break;
                                    case "fi":
                                        curSLang = 'o';
                                        break;
                                    default:
                                        curSLang = '';
                                }
                                switch (params[i].substring(3, 5)) {
                                    case "ru":
                                        curRLang = 'r';
                                        break;
                                    case "en":
                                        curRLang = 'e';
                                        break;
                                    case "de":
                                        curRLang = 'g';
                                        break;
                                    case "fr":
                                        curRLang = 'f';
                                        break;
                                    case "es":
                                        curRLang = 's';
                                        break;
                                    case "it":
                                        curRLang = 'i';
                                        break;
                                    case "pt":
                                        curRLang = 'p';
                                        break;
                                    case "jp":
                                        curRLang = 'j';
                                        break;
                                    case "fi":
                                        curSLang = 'o';
                                        break;
                                    default:
                                        curRLang = '';
                                }
                                if ((curSLang != '') && (curRLang != '')) {
                                    //alert("у нас есть направление перевода  :  " + curSLang+curRLang); 
                                    //TODO устанавливаем направление перевода
                                    //setDirFromParam('a','r');
                                    setDirFromParam(curSLang, curRLang);

                                }
                            }
                            else {
                                //Это тематика?  
                                params[i] = checkTempl(params[i]);
                                for (k = 0; k < templList.length; k++) {
                                    if (params[i] == templList[k]) { curTemplParam = params[i]; }
                                }
                                if (curTemplParam != "") {//если есть совпадения с массивом тематик
                                    //alert("Тематика:" + curTemplParam);
                                    $(".aboutTemplate").removeClass('curSelectTempl');
                                    $(".aboutTemplateL").removeClass('curSelectTempl');
                                    $(".templateHeader").removeClass('curentBlockTemplate');
                                    initTemplate(curTemplParam);
                                    $(this).addClass('curSelectTempl');
                                    $('.aboutTemplate #' + curTemplParam).parent().addClass('curSelectTempl');
                                    $("#ab_" + curTemplParam).parent().addClass('curSelectTempl');
                                    GetNewAdvert();
                                }
                                else {
                                    //alert("Это не параметр, а какая-то лажа... Игнорируем");
                                    // TODO почистить этот параметр
                                }
                            }
                        }
                    }
                }
            }
            else {//  в хеше только текст для перевода           
                if ("" == "1") { location.hash = ""; } //старые формы перевода посылают в хеше всякое разное не то.
                else { curSource = strParam; $("#SiteContent_sourceText").val(curSource); }
            }
            //если есть текст для перевода выполняем перевод
            if (curSource != '') { GetTranslationCBK(1); }
        }
        else {
            //alert("нет параметров");
        }
    } //getParams()

    function setDirFromParam(slang, rlang) {
        //dynamicSelect1("SiteContent_dirs_sLang", "SiteContent_dirs_rLang");
        var selct1 = document.getElementById("SiteContent_dirs_sLang");
        var selct2 = document.getElementById("SiteContent_dirs_rLang");
        // alert(slang);
        // alert(rlang);
        for (i = 0; i < selct1.options.length; i++) {
            if (selct1.options[i].value == slang) { selct1.selectedIndex = i; }
        }

        var langRes = document.getElementById("SiteContent_dirs_rLangReserv");
        var cloneDir = langRes.cloneNode(true);
        var clonedDirOptions = cloneDir.getElementsByTagName("option");
        //alert("клонировали "+ clonedDirOptions)

        refreshDynamicSelectOptions(selct1, selct2, clonedDirOptions, 0);
        if ((selct1.options[selct1.selectedIndex].value == "i") && (selct2.options[selct2.selectedIndex].value == "r")) { revDir = false; document.getElementById('ch_bttn').src = "/images/common/ch_ico_16_d.gif"; $('#chBtt_a').hover(function () { rollover_img('ch_bttn', '/images/common/ch_ico_16_d.gif'); }, function () { rollover_img('ch_bttn', '/images/common/ch_ico_16_d.gif'); }); };
        if ((selct1.options[selct1.selectedIndex].value == "i") && (selct2.options[selct2.selectedIndex].value == "e")) { revDir = true; document.getElementById('ch_bttn').src = "/images/common/ch_ico_16.gif"; $('#chBtt_a').hover(function () { rollover_img('ch_bttn', '/images/common/ch_ico_16_h.gif'); }, function () { rollover_img('ch_bttn', '/images/common/ch_ico_16.gif'); }); };
        //if (location.hash=='') setHash();
        if (Show_vkb) { set_kbLang(); changeVKL(kbLang); for (var i = 0; i < document.getElementById("langKeyboard").options.length; i++) { if (document.getElementById("langKeyboard").options[i].value == kbLang) { document.getElementById("langKeyboard").selectedIndex = i; } } }; var pattern4 = new RegExp("( |^)(" + selct1.options[selct1.selectedIndex].value + ")( |$)");
        revDirNow = false;
        //setHash();

        ChangedLang();
        for (j = 0; j < selct2.options.length; j++) {
            if (selct2.options[j].value == rlang) { selct2.selectedIndex = j; }
        }
        //dynamicSelect1("SiteContent_dirs_sLang", "SiteContent_dirs_rLang");
        ChangedLang();
    }



    var prevJsonParams = "";
    function GetNewAdvert() {
        wasTr = (uTrType != '') ? true : false;
        var jsonStr = '{ "wasTranslation":"' + ((wasTr) ? 'true' : 'false') + '", ';
        jsonStr += '"trType":"' + uTrType + '", ';
        jsonStr += '"trSource":"' + TS + '", ';
        jsonStr += '"dirCode":"' + GetDir() + '", ';
        jsonStr += '"template":"' + $("#template").val().toLowerCase() + '", ';
        //jsonStr += '"template":"school", ';
        jsonStr += '"lang":"ru", ';

        var id = "";
        var arrDiv = $("div[id^=advBlock]");
        jsonStr += '"bannerIDs":[';

        for (i = 0; i < arrDiv.length; i++) {
            var classes = $(arrDiv[i]).attr("class");
            sp = classes.indexOf("_");
            if (sp > 0) {
                var place = classes.substring(0, sp);
                var format = classes.substring(sp + 1, classes.length);
                sp = format.indexOf(" ");
                jsonStr += '{ "id":"';
                if (sp > 0) {
                    id = format.substring(sp + 1, format.length);
                    format = format.substring(0, sp);
                    jsonStr += id;
                }
                jsonStr += '", "place":"' + place + '", "format":"' + format + '" },';
            }
        }
        jsonStr = jsonStr.substr(0, jsonStr.length - 1);
        jsonStr += '] }';
        $.ajax({
            type: "POST",
            contentType: "application/json; charset=utf-8",
            url: "/servicesHL/LoadAdv.asmx/ReloadAdvert",
            data: "{ prevParams:'" + escape(prevJsonParams) + "', currParams:'" + escape(jsonStr) + "'}",
            dataType: "json",
            timeout: 5000,
            success: function (result) {
                var res = GetAjaxResult(result);      
                prevJsonParams = jsonStr;
                if ((res.needUpdate == true) && (res.banners != 'undefined')) {
                    for (j = 0; j < res.banners.length; j++) {
                        var clName = "div ." + res.banners[j].place + "_" + res.banners[j].format;
                        $(clName).removeClass(id); $(clName).addClass(res.banners[j].bannerID);
                        if ($(clName).html() != 'undefined') { $(clName).html(res.banners[j].code); }
                    }
                }
            },
            error: function (XMLHttpRequest, textStatus, errorThrown) { }
        });
    }

    function GetTopPhrases() {
        //var source = rtrim($("#SiteContent_sourceText").val());
        var source = lastTranslationWrd;
        //console.log(source);
        if (source == "") return;
        var text = source;
        //var dir = GetDir() ;
        var dir = curPtsDirCode;
        //$("#blurResult").show();
        $.ajax({
            type: "POST",
            contentType: "application/json; charset=utf-8",
            url: "/services/TranslationService.asmx/GetPhrases",
            //data: "{ dirCode:'" + dir + "', text:'" + text + "', isPrep:'" + isPrep + "'}",
            data: "{ dirCode:'" + dir + "', text:'" + text + "', page:0, pageSize:10 }",
            dataType: "json",
            timeout: 60000,
            success: function (res) {
                var result = GetAjaxResult(res);
                if ((result != "") && (result.Totals != 0)) {
                    $("#topPhrasesBlock").show();
                    var tmp = "";
                    //for (i = 0; i < result.Phrases.length; i++) {
                    var maxTopPhraseLength = 5;
                    if (result.Phrases.length < 5) { maxTopPhraseLength = result.Phrases.length }
                   
                    for (var i = 0; i < maxTopPhraseLength; i++) {
                        
                        //tmp += "<p class='phrList'><a href='/dictionary/" + langConvertor(dir[0]) + "-" + langConvertor(dir[1]) + "/" + result.Phrases[i].K + "/'>" + result.Phrases[i].K + "</a> - " + result.Phrases[i].T + "</p>";
                        tmp += "<p class='phrList'><a href='/dictionary/" + dir + "/" + result.Phrases[i].K + "/'>" + result.Phrases[i].K + "</a> - " + result.Phrases[i].T + "</p>";
                    }
                    //$("#blurResult").hide();
                    $("#totalPhrCount10").html("(" + result.Totals + ")");
                    $("#topPhrases").html(tmp).show();
                    $("#PhrasesBlock").show();
                    $("#PhrasesBlock").click(function () { ShowFullDictPhr(); });
                    if (result.Totals > 5) {
                        $("#morePhrases").show();
                        //$("#linkMorePhrases").attr("href", result.fdLink+"#phrases");
                    }
                    else { $("#morePhrases").hide(); }
                }
                $("#blurResult").hide();
            },
            error: function (XMLHttpRequest, textStatus, errorThrown) { }
        });
    }

    function GetTopSamples() {

        //var source = rtrim($("#SiteContent_sourceText").val());
        source = lastTranslationWrd;
        if (source == "") return;

        $("#topSamples").html('').removeClass('js-expandtxt');
        
        var text = source;
        var dir = curPtsDirCode;

        $.ajax({
            type: "POST",
            contentType: "application/json; charset=utf-8",
            url: "/services/TranslationService.asmx/FindSamples",
            data: "{ dirCode:'" + dir + "', text:'" + text + "', page: 0, pageSize: 10 }",
            dataType: "json",
            timeout: 60000,
            success: function (res) {
                isLoading = false;

                var result = GetAjaxResult(res);
                if ((result != "") && (result.Totals != 0)) {

                    allExamplesTotal = result.Totals;
                    var tmp = "";
                    var maxSamplLength = (result.Totals < 11) ? result.Totals : 10 ;
                    for (i = 0; i < maxSamplLength; i++) {
                        if (result.Samples[i].Translations.length > 1) {
                            for (j = 0; j < result.Samples[i].Translations.length; j++) {
                                tmp += "<div class='samplesList'><span class='samSource'>" + result.Samples[i].Source + "</span>  <span class='samTranslation'>" + result.Samples[i].Translations[j] + "</span></div>";
                            }

                        }
                        else {
                            tmp += "<div class='samplesList'><span class='samSource'>" + result.Samples[i].Source + "</span>  <span class='samTranslation'>" + result.Samples[i].Translations + "</span></div>";
                        }
                    }


                    //$("#topSamplesBlock").show();
                    $("#totalSmplCount10").html("(" + result.Totals + ")");
                    $("#topSamples").html(tmp);
                    

                    $("#SamplesBlock").click(function () { ShowFullDictSampl(); });
                    if (result.Totals > 2) {
                    //if ($('#topSamples').height() > 150) {
                        $("#topSamples").addClass('js-expandtxt');
                        $("#moreSamples").show();

                    }
                    else {
                         $("#moreSamples").hide();
                     }
                    $("#topSamples").show();
                    $("#SamplesBlock").show();
                    
                    $("#topSamplesBlock").show();
                }
                $("#blurResult").hide();
            },
            error: function (XMLHttpRequest, textStatus, errorThrown) { }
        });
    }


    function ShowFullDictPhr() {
        setCookie("show", "phrases", "", "/");
        linkToDict('Phrases');
        location.href = trFdLnk;
        
    }

    function ShowFullDictSampl() {
        setCookie("show", "sampl", "", "/");
        linkToDict('Samples');
        location.href = trFdLnk + "#s3";
    }


    function createDefLinks() {
        var curLang = curPtsDirCode,
        countDifCForms = $(".source_only").length;
        
        var allCForms = [], cFormsUniq = [];
        for (i = 0; i < countDifCForms; i++) { allCForms[i] = $("#cforms_result" + (i + 1) + " .source_only").text(); }
        cFormsUniq = Unique(allCForms);
        $("#explanatoryBLock .difLinkBlock").remove();
        for (i = 0; i < cFormsUniq.length; i++) { createDictLink(cFormsUniq[i], curPtsDirCode.substring(0, 2)); }
        if (countDifCForms != 0) $("#explanatoryBLock").show();
       
    }

    function Unique(A) {
        var n = A.length, k = 0, B = [];
        for (var i = 0; i < n; i++) {
            var j = 0;
            while (j < k && B[j] !== A[i]) j++;
            if (j == k) B[k++] = A[i];
        }
        return B;
    }

    function createDictLink(cform, sourceLang) {
        var foundInStr = 'на сайте';
        switch (sourceLang) {
            case "en":
                createWikiLinks(cform, sourceLang, foundInStr);
                createDictionaryLinks(cform, sourceLang, foundInStr);
                createWebsterLinks(cform, sourceLang, foundInStr);
                break;
            case "ru":
                createWikiLinks(cform, sourceLang, foundInStr);
                createGramotaLinks(cform, sourceLang, foundInStr);
                createAcademicLinks(cform, sourceLang, foundInStr);
                break;
            case "de":
                createWikiLinks(cform, sourceLang, foundInStr);
                createDwdsLinks(cform, sourceLang, foundInStr);
                createWissenLinks(cform, sourceLang, foundInStr);
                break;
            default:
                createWikiLinks(cform, sourceLang, foundInStr);
        }

    }

    function createWikiLinks(lem, sourceLang, foundInTxt) {
        var dictLink = "<span class='difLinkBlock'><a href='https://" + sourceLang + ".wikipedia.org/wiki/" + lem + "' class='difLink' target='_blank'><b>" + lem + "</b></a> - " + foundInTxt + " <a href='https://" + sourceLang + ".wikipedia.org/'  target='_blank'>" + sourceLang + ".wikipedia.org</a></span>";
        $(dictLink).appendTo("#explanatoryBLock");
    }
    function createDictionaryLinks(lem, sourceLang, foundInTxt) {
        var dictLink = "<span class='difLinkBlock'><a href='http://" + "dictionary.reference.com/browse/" + lem + "' class='difLink' target='_blank'><b>" + lem + "</b></a> - " + foundInTxt + " <a href='http://dictionary.reference.com/'  target='_blank'>Dictionary.com</a></span>"
        $(dictLink).appendTo("#explanatoryBLock");
    }
    function createWebsterLinks(lem, sourceLang, foundInTxt) {
        var dictLink = "<span class='difLinkBlock'><a href='http://" + "www.merriam-webster.com/dictionary/" + lem + "' class='difLink' target='_blank'><b>" + lem + "</b></a> - " + foundInTxt + " <a href='http://www.merriam-webster.com/'  target='_blank'>Merriam-Webster.com/</a></span>"
        $(dictLink).appendTo("#explanatoryBLock");
    }
    function createGramotaLinks(lem, sourceLang, foundInTxt) {
        var dictLink = "<span class='difLinkBlock'><a href='http://" + "www.gramota.ru/slovari/dic/?word=" + lem + "&all=x' class='difLink' target='_blank'><b>" + lem + "</b></a> - " + foundInTxt + " <a href='http://www.gramota.ru/'  target='_blank'>Грамота.Ру</a></span>"
        $(dictLink).appendTo("#explanatoryBLock");
    }
    function createAcademicLinks(lem, sourceLang, foundInTxt) {
        var dictLink = "<span class='difLinkBlock'><a href='http://" + "dic.academic.ru/searchall.php?SWord=" + lem + "' class='difLink' target='_blank'><b>" + lem + "</b></a> - " + foundInTxt + " <a href='http://dic.academic.ru/'  target='_blank'>Академик</a></span>"
        $(dictLink).appendTo("#explanatoryBLock");
    }
    function createDwdsLinks(lem, sourceLang, foundInTxt) {
        var dictLink = "<span class='difLinkBlock'><a href='http://" + "www.dwds.de/?qu=" + lem + "' class='difLink' target='_blank'><b>" + lem + "</b></a> - " + foundInTxt + " <a href='http://www.dwds.de/'  target='_blank'>DWDS.de</a></span>"
        $(dictLink).appendTo("#explanatoryBLock");
    }
    function createWissenLinks(lem, sourceLang, foundInTxt) {
        var dictLink = "<span class='difLinkBlock'><a href='http://" + "www.wissen.de/rechtschreibung/" + lem + "' class='difLink' target='_blank'><b>" + lem + "</b></a> - " + foundInTxt + " <a href='http://www.wissen.de/'  target='_blank'>Wissen.de</a></span>"
        $(dictLink).appendTo("#explanatoryBLock");
    }



</script>
    
<script type="text/javascript">
    function CheckFlash() {
        var flashinstalled = "no flash";
        MSDetect = "false";
        if (navigator.mimeTypes && navigator.mimeTypes.length) {
            x = navigator.mimeTypes['application/x-shockwave-flash'];
            if (x && x.enabledPlugin) flashinstalled = "installed";
            else flashinstalled = "no plugin";
        }
        else { MSDetect = "true"; }
        //alert(flashinstalled+" "+MSDetect);
    } //end checkFlash


    function closeSubscribe() {
        visSForm = 740; $("#ssBody").hide(); $("#ssHead a").hide(); if (!getCookie('subscibeFormOpen')) setCookie('subscibeFormOpen', 'open', 30);
        setTimeout('$("#ssHead").bind("click",function(){$("#ssBody").slideDown(300);$("#ssHead a").show();$("#ssHead").unbind("click");visSForm = 880;})', 100);

    }


    $(document).ready(function () {

        if (!getCookie('subscibeFormOpen')) { visSForm = 880; var dl_open_delay = setTimeout("$('#ssBody').slideDown(300);", 2000); }
        else { $("#ssHead a").hide(); visSForm = 740; $("#ssHead").bind("click", function () { $("#ssBody").slideDown(300); $("#ssHead a").show(); $("#ssHead").unbind("click"); visSForm = 880; }) }

        $('#ssAddr')
  .focus(function () { if ($(this).val() == 'Ваш адрес e-mail') { $(this).val(''); } })
  .blur(function () { if ($(this).val() == '') { $(this).val('Ваш адрес e-mail'); } });
        $('#ssSubmit').bind('click', function () { closeSubscribe(); setCookie('subscibeFormOpen', 'open', 3000); window.open("http://subscribe.translate.ru/subscriber/ru/subscribe/?site_id=4&campaign_id=11&email=" + $('#ssAddr').val()); })

    });

</script>

<span id="vkb_f2" style="z-index:1002; display:none;">
    <div id="loadingVK" style="display:none; position:absolute; text-align:center; background:white; left:80px; top:30px; height:30px; width:210px; padding:20px">
            <span id="SiteContent_LoadVKText">Please wait ...</span>             
            <img src="/images/common/al_fullWR.gif" width="15" height="15" />
        </div>
    </span>

    <div id="subscribeForm" style=" display:none;">
        <div id="ssHead">
            <a onclick="closeSubscribe();" href="javascript:;"><span class="close"></span></a>
          Подписка 
        </div>
        <div id="ssBody">
            <div id="ssMain">
                <h4>    Рассылка Translate.Ru </h4>
                <input id="ssAddr" type="text" value="Ваш адрес e-mail" />
            </div>
            <span><a href="http://subscribe.translate.ru/subscriber/ru/subscribe/?site_id=4&campaign_id=11" target="_blank">подробнее</a></span>
            <input id="ssSubmit" type="button" value="Подписаться" />
        </div>
    </div>  

<!-- speech -->    

<script>
    showInfo('info_start');
    var googleLang = "en-US";

    function CheckLang() {
        if (recognizing) { recognition.stop(); }
        val = SiteContent_dirs_sLang.value;
        //val = $("#SiteContent_dirs_sLang").val();
        if (val == 'a') { start_button.style.display = 'none'; disMicro.style.display = 'inline-block'; }
        else {
            start_button.style.display = 'inline-block'; disMicro.style.display = "none"; start_button.style.float = "right";
            switch (val) {
                case 'r': googleLang = "ru-RU"; break;
                case 'g': googleLang = "de-DE"; break;
                case 'f': googleLang = "fr-FR"; break;
                case 's': googleLang = "es-ES"; break;
                case 'i': googleLang = "it-IT"; break;
                case 'p': googleLang = "pt-BR"; break;
                case 'j': googleLang = "ja-JP"; break;
                case 'e': googleLang = "en-EN"; break;
                case 'o': googleLang = "fi-FI"; break;
                default: googleLang = "en-EN"; break;
            }
        }
        // alert("2.  "+googleLang);
    }

    showInfo('info_start');
    var final_transcript = '';
    var recognizing = false;
    var ignore_onend;
    var start_timestamp;
    if (!('webkitSpeechRecognition' in window)) {
        $("#start_button").css("visibility", "hidden");
        $("#disMicro").css("visibility", "hidden");
    } else {
        CheckLang();
        var recognition = new webkitSpeechRecognition();
        recognition.continuous = true;
        recognition.interimResults = true;
        recognition.onstart = function () {
            recognizing = true;
            showInfo('info_speak_now');
            start_img.src = '/images/speech/mic-animate_.gif';
        };
        recognition.onerror = function (event) {
            if (event.error == 'no-speech') {
                start_img.src = '/images/speech/mic.png';
                showInfo('info_no_speech');
                ignore_onend = true;
            }
            if (event.error == 'audio-capture') {
                start_img.src = '/images/speech/mic.png';
                showInfo('info_no_microphone');
                ignore_onend = true;
            }
            if (event.error == 'not-allowed') {
                if (event.timeStamp - start_timestamp < 100) {
                    showInfo('info_blocked');
                } else {
                    showInfo('info_denied');
                }
                ignore_onend = true;
            }
        };
        recognition.onend = function () {
            recognizing = false;
            if (ignore_onend) {
                return;
            }
            start_img.src = '/images/speech/mic.png';
            hideToolTip();
            _gaq.push(['_setCustomVar', 1, 'SrcLang', googleLang]);
            _gaq.push(['_trackEvent', 'Services', 'Voice', 'Input', rtrim($("#SiteContent_sourceText").val()).length]);

            if (!final_transcript) {
                showInfo('info_start');
                return;
            }
            showInfo('');
        };

        recognition.onresult = function (event) {
            var interim_transcript = '';
            for (var i = event.resultIndex; i < event.results.length; ++i) {
                if (event.results[i].isFinal) {
                    final_transcript += event.results[i][0].transcript;
                } else {
                    interim_transcript += event.results[i][0].transcript;

                }
            }
            final_transcript = capitalize(final_transcript);
            //sourceText.value = final_transcript + interim_transcript;
            //if (interim_transcript == '') { sourceText.value = final_transcript; }
            SiteContent_sourceText.value = final_transcript + interim_transcript;
            if (interim_transcript == '') { SiteContent_sourceText.value = final_transcript; }

        };
    }
    var two_line = /\n\n/g;
    var one_line = /\n/g;
    function linebreak(s) {
        return s.replace(two_line, '<p></p>').replace(one_line, '<br>');
    }
    var first_char = /\S/;
    function capitalize(s) {
        return s.replace(first_char, function (m) { return m.toUpperCase(); });
    }
    function createEmail() {
        var n = final_transcript.indexOf('\n');
        if (n < 0 || n >= 80) {
            n = 40 + final_transcript.substring(40).indexOf(' ');
        }
        var subject = encodeURI(final_transcript.substring(0, n));
        var body = encodeURI(final_transcript.substring(n + 1));
        window.location.href = 'mailto:?subject=' + subject + '&body=' + body;
    }

    function startButton(event) {
        if (recognizing) {
            recognition.stop();
            return;
        }
        final_transcript = '';
        recognition.lang = googleLang;
        recognition.start();
        ignore_onend = false;
        start_img.src = '/images/speech/mic-slash.png';
        showInfo('info_allow');

        start_timestamp = event.timeStamp;
    }

    function addGAEvent() {
        _gaq.push(['_setCustomVar', 1, 'SrcLang', googleLang]);
        _gaq.push(['_trackEvent', 'Services', 'Voice', 'Start', 0]);
    }


    function showInfo(s) {
        if (s) {
            for (var child = info.firstChild; child; child = child.nextSibling) {
                if (child.style) {
                    child.style.display = child.id == s ? 'inline' : 'none';
                }
            }
            info.style.visibility = 'visible';
        } else {
            info.style.visibility = 'hidden';
        }
        return;
    }
</script>



    
     <!--[if lt IE 9]>
        <div style="margin:0px auto; max-width: 1000px; min-width: 1000px;">
            <div style="float:right; height:19px; width:18px; background:url(/images/ie/mw_rbc.png) repeat-x;"></div>
            <div style="float:left; height:19px; width:16px; background:url(/images/ie/mw_lbc.png) repeat-x; "></div>
            <div style="background:url(/images/ie/mw_bbg.png) repeat-x; height:19px; margin:0 16px;"></div>
        </div>
<![endif]-->



    
    <footer>
    
    <!-- Kavanga.AdEngine START -->
<!-- Translate.ru - Online-переводчик компании ПРОМТ. -->
<!-- ZeroPixel sid=3131-->
<script language="JavaScript">
<!--
    var kref = '';
    try { kref = escape(document.referrer); } catch (e) { };
    var d = document, b = document.body;
    var img = d.createElement('IMG');
    with (img.style) { position = 'absolute'; width = '0px'; height = '0px'; }
    img.src = ('https:' == document.location.protocol ? 'https://' : 'http://') + 'b.kavanga.ru/exp?sid=3131&bt=3&bn=1&ct=8&prr=' + kref + '&rnd=' + Math.round(Math.random() * 1000000);
    b.insertBefore(img, b.firstChild);
//-->
</script>
<noscript><img src="b.kavanga.ru/exp?sid=3131&bt=3&bn=1&ct=8" border="0" width="1" height="1"></noscript>

<!-- ZeroPixel sid=1442-->
<script language="JavaScript">
<!--
    var kref = '';
    try { kref = escape(document.referrer); } catch (e) { };
    var d = document, b = document.body;
    var img = d.createElement('IMG');
    with (img.style) { position = 'absolute'; width = '0px'; height = '0px'; }
    img.src = ('https:' == document.location.protocol ? 'https://' : 'http://') + 'b.kavanga.ru/exp?sid=1442&bt=3&bn=1&ct=8&prr=' + kref + '&rnd=' + Math.round(Math.random() * 1000000);
    b.insertBefore(img, b.firstChild);
//-->
</script>
<noscript><img src="http://b.kavanga.ru/exp?sid=1442&bt=3&bn=1&ct=8" border="0" width="1" height="1"></noscript>
<!-- Kavanga.AdEngine END -->




       <div id="bott_link">
       <span id="rambler" style="margin:10px; float:left;">
      <span style="display:none;"><a href="http://top100.rambler.ru/top100/" id="r_c"><img src="http://counter.rambler.ru/top100.cnt?259198" alt="" width="1" height="1" border="0"></a></span>
        <a href="http://top100.rambler.ru/top100/"><img src="http://top100-images.rambler.ru/top100/banner-88x31-rambler-gray2.gif" alt="Rambler's Top100" width="88" height="31" border="0"></a>
      </span><span id="btt_links"><a href="/About/">О сервисе</a> | <a href="/About/Terms/">Условия использования</a> | <a href="/About/Cookies/">Cookies</a> | <a href="/About/Advertise/">Реклама на Translate.Ru</a>  | <a href="/Help/">Помощь</a> | <a href="/Tools/">Разработчикам</a> | <a href="/HumanTranslation/">Ручной перевод</a></span><br/>
      
      
           &copy; <a href="http://www.translate.ru/About/">ООО «ПРОМТ Сервис»</a>, 2010-2016<br/>
            <a href="http://www.promt.ru">Разработчик PROMT</a>
       
        </div>
    </footer>  
    
    
    
    
    <div id="megaFullInfo" style="display:none;">
        <div id="mfi_translate">
            <span id="al_fullWR1" style="display:inline;"><img hspace="10" align="middle" src="/images/common/al_fullWR.gif"> Загружаем информацию...</span>
        </div>
        <div id="mfi_grammInfoDiv">
            <div id="mfi_grammInfo">
                <span id="al_fullWR2" style="display: inline;"><img hspace="10" align="middle" src="/images/common/al_fullWR.gif">  Загружаем информацию...</span>
            </div>
        </div>
        <div id="megaFullInfoAdv">
            Сервис работает на базе программных продуктов PROMT<br/>
            <a href="http://www.promt.ru/translation_software/download/" target="_blank">Скачать полную версию переводчика PROMT 11.0 »»</a>
        </div>
    </div>
    
   <div id="spellInfo" style="display: none;">
   <div id="spellLoadDiv">
            <span id="spellLoad" style="display:inline;"><img hspace="10" align="middle" src="/images/common/al_fullWR.gif">  Загружаем информацию...</span>
   </div>
   <div id="sumSpell">
        <div id="errSpellDescr">В тексте найдены ошибки</div>
        <div id="okSpellDescr">В тексте ошибок не найдено</div>
   </div>
   <div id="spellEditor"></div>
   <div style="text-align:center; padding:10px" id="spellBttms"><input type="button" class="transit_" value="Готово!"  onclick="javascript:$('#spellEditor .suggs').remove();$('#SiteContent_sourceText').val($('#spellEditor').text());$('#spellInfo').dialog('close');"/>&nbsp;&nbsp;&nbsp;&nbsp; <input type="button" class="cancelBtt" value="Отмена" onclick="javascript:$('#spellInfo').dialog('close');"/></div>
       
           <div style="font-size:11px; border-top:1px solid #7f9db9; padding:5px;">
               <a target="_blank" href="http://www.orfo.ru/"><img border="0" src="/images/common/logo_informatic.gif" align="middle"/></a> 
              Проверка орфографии выполняется системой <a target="_blank" href="http://www.orfo.ru/" ><b>ОРФО</b></a> &copy;ЗАО "ИНФОРМАТИК" 
           </div>
   </div>

    <div id="keepClick"></div><div id="keepClickVM"></div><div id="keepClickSS"></div>
        <div id="keepClickTemplateTop"></div>
        <div id="keepClickEditor"></div>
    <!-- скрипты для фидбека -->
<script type="text/javascript">
    //document.getElementById("tbEmail").style.display="none";//document.getElementById("tbEmail").value="";
    $("#tbEmail").hide(); $("#tbEmail").val("");
    function clearFeedback() {
        $("#tbOtzyv").val("");
        $("#ignore").val("");
    }
    function changedField(a) {
        var val = $("#changedField").val();
        $("#changedField").val(val + a);
    }

    function SendFeedback() {
        var hp = false;
        if ((location.pathname.toLowerCase() == "/") || (location.pathname.toLowerCase() == "/default.aspx")) { hp = true; }
        var message = $("#tbOtzyv").val();
        var name = encodeURI($("#tbImya").val()).split("'").join("\\'");
        var from = $("#tbEmail").val();
        var tmp = $("#tbPochtAdr").val();
        if (tmp == "") { return; }
        var changed = $("#changedField").val();
        var ignored = $("#ignore").val();
        if (ignored != "") { errTexts = "true"; /*boolSend="true";*/changed += "2"; }

        templ = ""; text = ""; rslt = "";
        if (hp) {
            if (trDirCode == "") { trDirCode = GetDir(); }
            templ = $("#template").val();
            text = rtrim($("#SiteContent_sourceText").val()); text = encodeURIComponent(text).split("'").join("\\'");
            rslt = (uTrType == 'text') ? $("#translationResult").text() : ""; rslt = encodeURIComponent(rslt).split("'").join("\\'");
        }

        message = encodeURIComponent(message).split("'").join("\\'");
        $("#loading").ajaxStart(function () { $(this).show(); });
        $("#loading").ajaxStop(function () { $(this).hide(); });
        $("#load_text").ajaxStart(function () { $(this).hide(); });
        $("#load_text").ajaxStop(function () { $(this).hide(); });
        $.ajax(
    { type: "POST", contentType: "application/json; charset=utf-8",
        url: "/services/UtilsService.asmx/Feedback",
        data: "{lang:'ru', email:'" + from + "',tmpAddr:'" + tmp + "', name:'" + name + "', message:'" + message + "', changed:'" + changed + "', err:'" + wasErr + "', dir:'" + trDirCode + "', tpl:'" + templ + "', source:'" + text + "', result:'" + rslt + "'}",
        dataType: "json",
        success: function (result) {
            var res = GetAjaxResult(result);

            $("#lOtpravleno").show();
            $("#fFeedbackFld").hide(); $(".checkLabel1").hide(); $("#bAjaxFeedback").hide();
            $("#tbOtzyv").val("");
            $("#feedbackForm").height(100);
        },
        error: function (XMLHttpRequest, textStatus, errorThrown) { alert("К сожалению, сервис временно недоступен. Попробуйте повторить запрос позже."); hideFeedbackForm(); }
    });
    } //FeedbackClick

    function MakeAnotherTranslate(key, dir) {
        $("#editResultWin_test").hide();
        hideEditTranslationWin(0);
        $("#editResult_test").val('');
        $("#editResult_test").css('height', '');

        $("#socialServices").hide();
        $("#AdvInResult").hide();
        $("#AdvInResult").removeAttr('style');
        $("#linkAT").show(); $("#linkATPic").show();
        visitLink = false;
        $("#addTranslationText").unbind('keypress');
        closewAddTranslation();
        closeTranslationLinks();
        $("#divFullWordResult").hide();
        $("#adviseIconDiv").hide();

        $("#blurResult").show();
        if (rtrim($("#SiteContent_sourceText").val()) == "") { $("#SiteContent_sourceText").val(''); $("#SiteContent_sourceText").focus(); return false; }
        var text = rtrim($("#SiteContent_sourceText").val());
        text = encodeURIComponent(text).split("'").join("\\'");
        var templ = $("#template").val();
        //RefreshAdv();
        var dirArr = dir.split('-');
        if (dirArr[0] != 'ar') { $('#SiteContent_sourceText').css('direction', 'ltr'); }
        if (dirArr[1] != 'ar') { $('#translationResult').css('direction', 'ltr'); $('#editResult_test').css('direction', 'ltr'); }
        $.ajax({
            type: "POST",
            contentType: "application/json; charset=utf-8",
            url: "/services/TranslationService.asmx/GetTranslateNew",
            data: "{ dirCode:'" + dir + "', template:'" + templ + "', text:'" + text + "', lang:'ru', limit:" + maxlen + ",useAutoDetect:false, key:'" + key + "',  ts:'" + TS + "', tid:'" + tmpID + "',IsMobile:false}",
            dataType: "json",
            success: function (result) {
                var res = GetAjaxResult(result);
                SetValsAfterTr(res);
                trFdLnk = res.fdLink;
                curPtsDirCode = res.ptsDirCode;
                var curPtsDirCodeArr = curPtsDirCode.split('-')
                if (res.isWord && rtrim($('#SiteContent_sourceText').val()) != '') { GetTopPhrases(); GetTopSamples(); createDefLinks(); }
                //added 28.10.13 
                RefreshAdv_inRes();
                //-----//------

            },
            error: function (XMLHttpRequest, textStatus, errorThrown) {
                GetErrMsg("К сожалению, сервис временно недоступен. Попробуйте повторить запрос позже.");
            }
        });
    } //mkAnotherTr

    function MakeAnotherTranslateCBK(trlID, advDirCode) {
        TranslType = "advise"; tmpID = trlID; tmpDirCode = advDirCode; ReceiveServerData(""); /*CallServer(advDirCode, "");*/
    }

    function GetFullWordCBK(pos, type) {
        setCookie("show", "item" + pos, "", "/");
        if (pos == '0') linkToDict('More') 
        else linkToDict('Declination');
        location.href = trFdLnk;
    }

    function GetFullWordCBK_old(pos, type) {
        TranslType = type; tmpPos = pos;
        //tmpDirCode =((type=='dictWordER')||(type=='dictWord'))? GetDir(): trDirCode;
        tmpDirCode = trDirCode;
        ReceiveServerData(""); /*CallServer(tmpDirCode, "");*/
    }

    function closeAdviseWindow() { document.getElementById("adviseText").style.display = "none"; }
    function showAdviseWindow() { document.getElementById("adviseText").style.display = "block"; }
    function InsertAdvise(atext) {
        $('#adviseIconDiv').show();
        $('#adviseIconDiv').html('');
        $('#adviseIconDiv').html(atext).addClass('warning');
        $('#adviseText').show();
        $('#blurResult').hide();
    }

    function AddAdvise(atext) {

        $('#adviseIconDiv').html($('#adviseIconDiv').html() + '<br><br>' + atext).addClass('warning');

    }

    function SaveSocial(value, stype) {
        var dir = GetDir();
        if (trDirCode == "") { trDirCode = dir; }
        var templ = ($("#template").length>0) ? $("#template").val() : 'General';
        //var text = rtrim($("#SiteContent_sourceText").val()); 
        var  text = ($("#SiteContent_sourceText").length>0) ? $("#SiteContent_sourceText").val() : $("#SiteContent_sourceTextDict").val();
        text = rtrim(text);  text = encodeURIComponent(text).split("'").join("\\'");
        var rslt = (uTrType == 'text') ? $("#translationResult").text() : ""; rslt = encodeURIComponent(rslt).split("'").join("\\'");

        switch (stype) {
            case "link": $("#loadingLink").ajaxStart(function () { $(this).show(); }); break;
            case "vrnt": $("#ATForm").hide(); $("#servATText").show(); if (thisDict) { $("#ATForm_bt").hide(); $("#servATText_bt").show(); } break;
        }
        if (!(thisDict && stype=='link')) {
        $.ajax({
            type: "POST",
            contentType: "application/json; charset=utf-8",
            url: "/servicesHL/SocialServices.asmx/DoSocial",
            data: "{ value:'" + value + "', type:'" + stype + "', trUID:'" + trUID + "', dirCode:'" + trDirCode + "', template:'" + templ + "',source:'" + text + "', result:'" + rslt + "', sourceType:'" + uTrType + "', lang:'ru' }",
            dataType: "json",
            success: function (res) {
                var result = GetAjaxResult(res);

                if (result.errCode != 1) {
                    switch (stype) {//экшн в зависимости от stype
                        case "link":
                            $("#loadingLink").hide();
                            $("#saveLinkResult").show();
                            //thisTranslationLink=result.link+result.uid;
                            thisTranslationLink = result.link;
                            saveTranslation = true;
                            GenerateTexts(thisTranslationLink);
                            break;
                        case "tmpl":
                            alert('Самые востребованные варианты будут подключены в новых версиях сайта.');
                            break;
                        case "vrnt":
                            $("#servATText").html('<b>Самые востребованные варианты будут подключены в новых версиях сайта.<br/></b><span style="font-size:9px">Спасибо, так гораздо лучше! :)</span>');
                            var hideUTBttn = setTimeout("$('#keepClick').fadeOut('slow');closewAddTranslation();", 3000);
                            if (thisDict) {
                                $("#servATText_bt").html('<b>Самые востребованные варианты будут подключены в новых версиях сайта.<br/></b><span style="font-size:9px">Спасибо, так гораздо лучше! :)</span>');
                                var hideUTBttn = setTimeout("$('#keepClick').fadeOut('slow');closewAddTranslation();", 3000);
                            }
                            break;
                        case "rate":
                            closeTranslationLinks();
                            $("#trest").html('Ваша оценка: ');
                            setVote(value); stopVote();
                            break;
                    }
                    if (result.uid != '') { trUID = result.uid; }
                }
                else {
                    switch (stype) {
                        case "link":
                            $("#serviceErrorSFl").dialog({ dialogClass: 'alert', title: '', width: 400, minHeight: 50, resizable: false, draggable: false, close: function () { closeTranslationLinks(); } });
                            saveTranslation = false; $("#serviceErrorSFl").dialog('open');
                            break;
                        case "tmpl":
                            alert('Тематика не сохранилась!');
                            break;
                        case "vrnt":
                            $("#servATText").html("<b style='color:red;'>Сервис временно недоступен. <br/>Если ошибка повторится, сообщите, пожалуйста, о ней разработчикам через форму обратной связи. Спасибо за понимание!</b>");
                            var hideUTBttn = setTimeout("$('#keepClick').fadeOut('slow');closewAddTranslation();", 5000);
                            break;
                        case "rate":
                            $("#serviceErrorSFr").dialog({ dialogClass: 'alert', title: '', width: 400, minHeight: 50, resizable: false, draggable: false });
                            $("#serviceErrorSFr").dialog('open');
                            myVote = 0; clRating();
                            break;
                    }
                }
            },
            error: function (XMLHttpRequest, textStatus, errorThrown) {
                switch (stype) {
                    case "link":
                        $("#serviceErrorSFl").dialog({ dialogClass: 'alert', title: '', width: 400, minHeight: 50, resizable: false, draggable: false, close: function () { closeTranslationLinks(); } });
                        closeTranslationLinks(); saveTranslation = false; $("#serviceErrorSFl").dialog('open');
                        break;
                    case "tmpl":
                        $("#serviceErrorSFt").dialog({ dialogClass: 'alert', title: '', width: 400, minHeight: 50, resizable: false, draggable: false });
                        $("#serviceErrorSFt").dialog('open');
                        break;
                    case "vrnt":
                        $("#servATText").html("<b style='color:red;'>Сервис временно недоступен. <br/>Если ошибка повторится, сообщите, пожалуйста, о ней разработчикам через форму обратной связи. Спасибо за понимание!</b>");
                        var hideUTBttn = setTimeout("$('#keepClick').fadeOut('slow');closewAddTranslation();", 5000);
                        break;
                    case "rate":
                        $("#serviceErrorSFr").dialog({ dialogClass: 'alert', title: '', width: 400, minHeight: 50, resizable: false, draggable: false });
                        $("#serviceErrorSFr").dialog('open'); myVote = 0; clRating();
                        break;
                }
            }
        });
        }
        else {
            $("#loadingLink").hide();
            $("#saveLinkResult").show();
            //thisTranslationLink=result.link+result.uid;
            thisTranslationLink = window.location.href;
            saveTranslation = true;
            GenerateTexts(thisTranslationLink);
                           
        }
    } //end savesocial

    function saveUTemplates() {
        uTpl = $("#utemplatesi").val(); if (uTpl == "") return;
        SaveSocial(uTpl, 'tmpl');
        $("#utemplatesi").val('');
    } //end saveUTemplate

    function reloadBottomAdv() {
        GA_googleFetchAds();
        //alert("!!!");
        GA_googleFillSlot("Translate.Ru_bottom");
        //GA_googleSetAdContentsBySlotForSync({"Translate.Ru_Top":{"_type_":"html","_expandable_":true,"_html_":"\x3cscript type=\"text/javascript\"\x3e\nvar begun_auto_pad = 146267711;\nvar begun_block_id = 248733256;\n\nvar begRnd = Math.random();\n\nvar begun_self_keywords = \"\"; \n\nif (begRnd\x3c=0.5) {begun_self_keywords = \"курсы обучение, курс mba, мба, вузы Москвы, бюро-перевод, английский с носителем, перевод документов, курсы, егэ подготовка, заработать деньги, кредит без залога, диски шины, мазда 3, дверь межкомнатная, автоломбард\";}\nelse {begun_self_keywords = \"курсы обучение, курс mba, мба, вузы Москвы, бюро-перевод, английский с носителем, перевод документов, курсы, егэ подготовка, продажа квартир в москве, outlook mobile, лингвистика, элитная недвижимость в европе ипотека\";}\n\n// жесткий список, как было давно:\n\nvar begun_self_keywords = \"элитная недвижимость за рубежом, элитный отдых в австрии, аренда катера, отель 4, отель 5, отель с бассейном, олл инклюзив, all inclusive, индивидуальный тур, экзотик тур, сафари тур, автомобильный тур, знакомства с иностранцами, замуж за иностранца, международный клуб знакомств, образование за рубежом, образование за границей, обучение за рубежом, обучение за границей, синхронный перевод, перевод нотариус, бюро переводов, агенство перевода, обучение языку, курсы языка, дистанционное обучение иностранным языкам\";\n\n\x3c/script\x3e\n\x3cscript src=\"http://autocontext.begun.ru/autocontext2.js\" type=\"text/javascript\"\x3e\x3c/script\x3e\n","_snippet_":true,"_height_":90,"_width_":728,"_empty_":false,"_is_afc_":false,"_is_psa_":false,"_is_3pas_":true,"_cids_":["zDQKF8"],"_a2ids_":["B_wPw"],"_pstok_":"d8N0FETH4UYKDAoKCL_gfxDf0MCGMw"}});
    }



    $(document).ready(function () {
        $(".wrapp").css('background', 'url(/images/common/bttm_bg.png) bottom center repeat-x transparent');
        //$("#logotext").click(function(){location.href="http://"+location.hostname+"?prmtlang=ru";});
        $("#logotext h1").click(function () { location.href = "http://" + location.hostname; });
        setTimeout("$('div').has('#panelBig').hide();", 3000);

    });
    //setBackground('oboi2.jpg');  
    lastTranslation = $("#SiteContent_sourceText").val();  
</script>


 
<!-- Translate.Ru_bottom_line -->
<script type='text/javascript'>
    GA_googleFillSlot("Translate.Ru_bottom_line");
</script>


<script type="text/javascript">
//<![CDATA[

WebForm_InitCallback();//]]>
</script>
</form>
  </div>

</body>
</html>
