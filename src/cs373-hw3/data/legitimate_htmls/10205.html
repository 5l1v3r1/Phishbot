<!DOCTYPE html>
<html lang="zh-cn">
<head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8"> 
<meta charset="utf-8">
<base target="_top"/>
<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
<meta name="renderer" content="webkit">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="apple-touch-icon" href="/apple-touch-icon.png" />
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black">
<meta http-equiv="x-rim-auto-match" content="none">
<title>135编辑器官网-一键秒刷,微信排版编辑器,微信图文排版,公众号图文编辑器,内容编辑器，无需下载</title>
<meta name="Keywords" content="135编辑器，微信编辑器，微信图文编辑器，微信图文美化编辑器，135编辑器下载,微信排版工具，微信公众号内容编辑，图文排版工具，最方便的微信编辑器，135编辑器官网" />
<meta name="Description" content="135编辑器，微信图文素材排版编辑器提供美化微信文章排版，微信公众号内容编辑的功能，样式丰富，“秒刷”一键排版，轻松编辑非常美观的微信图文消息。支持收藏样式、收藏颜色、图片素材编辑，图片水印等个性化功能。135编辑器无需下载,直接在线使用即可。网上下载的为欺骗的病毒程序。" />

<link href="http://static.135editor.com/cache/40de74e5fd-v63.css" rel="stylesheet" type="text/css" ><link href="http://static.135editor.com/css/bootstrap_2.css" rel="stylesheet" type="text/css" >
<link rel="stylesheet" type="text/css" href="http://static.135editor.com/fonts/icon135/iconfont.css" />
<link rel="stylesheet" type="text/css" href="http://static.135editor.com/css/font-awesome.min.css" />

<!--[if lt IE 9]>
    <script src="//html5shim.googlecode.com/svn/trunk/html5.js"></script>
<![endif]-->
<script src="http://static.135editor.com/cache/0d46f20dfa-v63.js" type="text/javascript"></script><style>
* {margin:0;padding:0;box-sizing: border-box!important;-webkit-box-sizing: border-box!important;word-wrap: break-word!important;}
body,h1, h2, h3, h4, h5, h6, .h1, .h2, .h3, .h4, .h5, .h6{font-family: "Helvetica Neue",Helvetica,"Hiragino Sans GB","Microsoft YaHei","微软雅黑",Arial,sans-serif !important;}
body{margin: 0 0;font-size:14px;background-image:none;background-color:#C9B3A5;background-size: cover;background-repeat: no-repeat;line-height:inherit}
.135editor{max-width:100% !important;}
h1,h2,h3,h4,h5,h6{font-weight:400;font-size:18px}

#edui_fixedlayer{z-index:1000000 !important;}
p{clear:both;margin:0 0;min-height:1em;}

table.noBorderTable td,table.noBorderTable th,table.noBorderTable caption{border:1px dashed #ddd!important}
table{margin-bottom:10px;border-collapse:collapse;display:table;width:100%!important}
td,th{word-wrap:break-word;word-break:break-all;padding:5px 10px;border:1px solid #DDD}
.edui-default td,.edui-default th{border:0 none;padding:0 0;}
caption{border:1px dashed #DDD;border-bottom:0;padding:3px;text-align:center}
th{border-top:2px solid #BBB;background:#f7f7f7}
.ue-table-interlace-color-single{background-color:#fcfcfc}
.ue-table-interlace-color-double{background-color:#f7faff}
 td p{margin:0;padding:0;width:auto;height:auto;}

ul{padding-left: 0;}
ul li{
	list-style: none;
}
h1,h2,h3,h4,h5,h6{font-weight:400;font-size:18px}
a,a:hover, a:focus {text-decoration: none;}
.otf-poptools{width:auto;}
.otf-poptools span{margin:0 5px;cursor:pointer;}
::-webkit-scrollbar {   width:5px;height:5px;}
::-webkit-scrollbar-thumb {-webkit-box-shadow: inset 0 0 16px #645654; /*rgba(60,60,60,0.5)*/}
::-webkit-input-placeholder { /* WebKit browsers */   color:    #ddd;}
:-moz-placeholder { /* Mozilla Firefox 4 to 18 */color:    #ddd;}
::-moz-placeholder { /* Mozilla Firefox 19+ */ color:    #ddd;}
:-ms-input-placeholder { /* Internet Explorer 10+ */  color:    #ddd;}
.popover{max-width:360px;}
.modal-backdrop.in {opacity: 0.8;}
#insert-style-list .alert-warning {background-color: #fafafa;border: 0 none;margin:0;color: #3a3332;}
a {color: #2fa4e7;text-decoration: none;}
#header-breadcrumb{display: none;}
.footer-bottom{padding:2px;font-size:80%;}
#maincontent {margin:0;padding:0;}

#left-sidebar .ui-portlet{margin:0px;}
#left-side-affix{box-shadow:0 0 3px rgba(0, 0, 0, 0.15);}
#left-sidebar .btn-group .btn{padding:4px 16px;}
.modal-backdrop{z-index: 1000000;}
.modal-open .modal,.modal{z-index: 1000050;}
.mix{display: none;}

.cke_reset_all, .cke_reset_all *{
	position: initial;
}
.affix{top:0px;background-color:#FFF;z-index:100;position: fixed;}
.col-xs-6 {width: 49%;}
.color-swatch{width:20px;height:20px;border-radius:3px;cursor: pointer;float:left;margin:4px 2px;}

#all-style-color-panel .all-color-swatch{width:30px;height:30px;border-radius:50%;cursor: pointer;float:left;margin:4px 2px;}

.color-box {width:16px;height:16px;cursor: pointer;border:solid 1px #ddd;margin-top:3px;float: left;margin-right:5px;}
.color-swatch:hover,.color-swatch.active {	
	-webkit-transform:scale(1.1);-moz-transform:scale(1.1);-ms-transform:scale(1.1);
	-o-transform:scale(1.1);transform:scale(1.1);
	-webkit-box-shadow:inset 1px 1px 1px #5b616d,0 0 5px #45bcda;
	-moz-box-shadow:inset 1px 1px 1px #5b616d,0 0 5px #45bcda;
	box-shadow:inset 1px 1px 1px #5b616d,0 0 5px #45bcda;
}
.n1-1 > li {width: 100%;color: #dad9d8;text-align: center;}
.n1-1 ul.dropdown-menu > li {width: 100%;}
.n1-1 > li > a{display:block;line-height:36px;color:#dad9d8;text-decoration:none;font-size:14px;border-bottom: 1px solid rgba(255,255,255,0.06);}
.n1-1 > li.active,.n1-1 > li > a:hover{background:#4c4342;text-decoration:none}
.col-sm-4,.col-sm-6,.col-sm-2{padding-right: 5px;padding-left: 5px;}
#params-setting ul{padding:0;}
#params-setting .title{font-size:16px;font-weight:bold;padding-bottom:3px;margin-bottom:5px;margin-top:15px;border-bottom:1px solid #DDD;}
#params-setting li{list-style:none;}
#params-setting label{display:block;line-height:18px;font-weight:normal;}
#params-setting input{margin-right:5px;margin-top:3px;float:left;}
.cke_button__source_label{display:none;}
.cke_combo__font .cke_combo_text{padding-left:5px;width:60px;}
.cke_combo__styles .cke_combo_text{width:80px;}
.cke_chrome {border: none;box-shadow: 0 0 1px 1px rgba(172,181,194,0.56);}
#editor-styles .nav > li > a{padding:10px 5px;text-align:center;}

#insert-style-list{background:rgba(255,255,255,1);}

#tpl-tab-content .style-list .pr{position:relative;}
#tpl-tab-content .style-list .tpl-mask{position:absolute;background:rgba(60,60,60,0.5);top:0px;left:0px;    width: 100%;height: 100%;color: #FFF;display: table-cell;text-align: center;}
#tpl-tab-content .style-list .pr:hover .tpl-mask{display:block !important;}
#tpl-tab-content .style-list .tpl-mask .fa{font-size:32px;cursor:pointer;}

#tpl-tab-content .editor-style-content{cursor:pointer;}

#tpl-tab-content .style-list{margin-top:20px;position: relative;}
#tpl-tab-content .style-list .user-style-toolbar{position:absolute;right:5px;bottom:5px;display:none;color:#157ab5;}
#tpl-tab-content .style-list .user-style-toolbar .fa {cursor:pointer;}
#tpl-tab-content .style-list:hover .user-style-toolbar{display:block;}
#tpl-tab-content .style-list .content, #template-modal-body .style-list .content{cursor: pointer;padding: 0 5px;overflow-x:hidden;overflow-y:hidden;box-shadow: 0 0 3px rgb(170, 170, 170);}
#tpl-tab-content .style-list .tools,#template-modal-body .style-list .tools{display:none;}
#tpl-tab-content .row{margin:0 -5px;}
.popover-content .btn{margin-top:3px;padding: 1px 5px;}
#more-popover .popover-content{padding: 5px 5px;width:160px;max-width:360px;height:160px;}

/* */
#color-plan {right:0px  !important;width:120px;top:100px  !important;left:auto !important;display:block !important;position:fixed;text-align: center;}
#color-plan .nav-tabs > li > a{padding:5px;color: #efefef;border: 0 none;}
#color-plan .nav-tabs > li > a:hover{background:transparent;color:#FFF;}
#color-plan .nav-tabs > li.active > a,#color-plan  .nav-tabs > li.active > a:hover,#color-plan  .nav-tabs > li.active > a:focus {background-color: #000;color: #FFF;border: 0 none;}


#insert-style-list li .btn{display:none;}
#insert-style-list li:hover .btn{display:inline;}
#insert-style-list li {position:relative;background: #FFF;border-bottom: 1px dotted #ddd;padding: 10px 15px;cursor:pointer;}
#insert-style-list li.active a,#insert-style-list li.active a:focus{background:transparent;}
#insert-style-list img{max-width: 100%;}
#insert-style-list li:hover{background: #f0f0f0;}

#insert-style-list .nav > li {padding:0 0;}

#preview-msg-content *,#insert-style-list .ui-portlet-list > li *{max-width: 100%!important;box-sizing: border-box!important;-webkit-box-sizing: border-box!important;word-wrap: break-word!important;}
#insert-style-list .ui-portlet-list > li p{clear:both;margin:0 0;line-height: 1.6;}
#insert-style-list .origin{position:absolute;top:5px;right:5px;height:20px;color:#FFF;font-weight:bold;font-size:12px;padding:2px}

#insert-style-list iframe,#insert-style-list .video_iframe {background-color: #000000;width: 100% !important;position: static;}

img {vertical-align: baseline;max-width: 100%;}
/* fix Firefox - max-width images not working within fieldset */
fieldset img{width: 100%;max-width: -moz-fit-content;max-width: -webkit-fit-content;}

#editor-tpls-navtab > li,#editor-my-msgs > .nav-tabs > li {padding:0 0;}

.editor-nav .fa{width:18px;text-align:center;margin:0 auto;}

.w2 .col-md-4 {width:100%;}
#editor-my-msgs #wechat-article-list .col-md-4 .submsg-title {clear:both;}
#editor-my-msgs #wechat-article-list .col-md-4 .submsg-title .title{font-size:14px;font-weight: normal;}
#style-operate-area .col-md-4,#editor-msg-list .col-md-4{width:100%;}
#my-article-list .col-xs-4 {width:auto;padding: 5px;}

#html-parsers-items .col-md-4 {width:50%;}
#html-parsers-items .col-md-4  img{height:200px;text-align:center;max-width:100%;}
#html-parsers-items .appmsg{box-shadow: 0 0 3px rgb(170, 170, 170);margin: 10px 0;padding: 10px 0;}

#bg-choose .default,#bg-choose .chooser{width:20px;height:20px;margin:5px;cursor:pointer;border-radius:2px;}
#nav-header .nav>li>a{color:#FFF}
#nav-header .nav .open > a{background-color: inherit;}
#nav-header .nav>li>a:hover,#nav-header .nav>li>a:focus{color:#FFF;background-color: rgba(255,255,255,0.2);}

.small-height #nav-header{position:absolute;width:140px;background:RGBA(255,255,255,0.3); margin-left:5px;padding:10px 10px; }
.small-height #nav-header .nav>li>a{width:120px;text-align: right;}
.small-height .open > .dropdown-menu {display: block;top: 0;left:99%;}
.small-height #login-menus ,.small-height #login-links{margin-top:20px;}
.small-height #nav-header:hover{z-index:1000;}
#favor-colors .color-swatch{position:relative;}
#favor-colors .color-swatch .fa{position:absolute;right:-5px;top:-5px;display:none;}
#favor-colors .color-swatch:hover .fa{position:absolute;right:-5px;top:-5px;display:block;}
#favor-colors .color-swatch .fa:hover{color:red;}


.nav > li> a .user-unread-msgnum{background: #ff9900;color:#FFF;line-height:16px;display:none;text-align:center;padding:2px 3px;margin-left:2px;}



.editorslide {right:-80px;width:80px;bottom:30%;top: initial;}
.editorslide:hover{z-index:10;}
.editorslide li {width: 80px;}
#WxMsgContent{width:100%;}
#feedsModal {clear:none;}
#nav-header{margin-left:90px;}
.edui-default .edui-toolbar:nth-child(3) { background: none !important;border-bottom: 1px solid #DDD;}
@media (max-width: 1360px) {
	.editorBox{margin-left:10%;width:450px;}
	.editorslide{bottom:15%;top: initial;}
	.show-edui-more .edui-default .edui-toolbar:nth-child(3){max-width:450px;}
}
@media (max-width: 1180px) {
	.editorBox{margin-left:30px;}
}

@media (max-width: 1100px) {
	#nav-header{margin-left:80px;}
	.w1{width:80px !important;}
	.w2{width:324px;}
	.w3{margin-left:404px !important;}
	.editorBox{margin-left:5px;width:360px;}
	.editorslide{bottom:5%;top: initial;}
	.show-edui-more .edui-default .edui-toolbar:nth-child(3){max-width:360px;}
}
#full-page {min-width:930px;}
.modal-header h3{margin:0 10px;}
.tpl-brush-helper{margin-bottom:10px;}
#image-list .col-sm-4{margin-bottom:20px;position: relative; height: 128px;}
#image-list .appmsg{height: 128px;max-width: 110px;width: 110px;cursor:pointer;width: 120px; position:relative;   text-align: center;background-color:rgba(237,229,224,0.95);padding: 3px;}
#image-list .appmsg .img-opr{ position: absolute;text-align: center;width: 100%;bottom: 3px;}
#image-list .appmsg .cover {height:100px;width:100px;vertical-align: middle;display: table-cell;}
#image-list .appmsg img{max-height:100px;cursor:pointer;}

#image-preview {position:absolute;left:0px;width:100%;z-index: 100;color:red;text-align:center;overflow:hidden;background-color:#FFF;border:10px solid #f3f3f3;display:none; top:60px;padding: 20px 0;}
#image-preview img{height:auto;width:auto;max-width:100%;padding:10px 10px;background-color:#fff;}
/*
#image-list .appmsg:hover {z-index:10;position: absolute;max-width:360px;width:360px;padding:5px 10px;display: table-cell;}
#image-list .appmsg:hover img{max-width:360px;}

#favor-image-li .col-sm-4:nth-child(3n+1) .appmsg:hover,#split-image-list-li .col-sm-4:nth-child(3n+1) .appmsg:hover ,#guide-image-list-li .col-sm-4:nth-child(3n+1) .appmsg:hover ,#upload-image-list-li .col-sm-4:nth-child(3n+1) .appmsg:hover  {
	left:0;text-align:left;
}
#favor-image-li .col-sm-4:nth-child(3n+2) .appmsg:hover,#split-image-list-li .col-sm-4:nth-child(3n+2) .appmsg:hover ,#guide-image-list-li .col-sm-4:nth-child(3n+2) .appmsg:hover ,#upload-image-list-li .col-sm-4:nth-child(3n+2) .appmsg:hover  {
	left:-100%;text-align:center;
}
#favor-image-li .col-sm-4:nth-child(3n+3) .appmsg:hover,#split-image-list-li .col-sm-4:nth-child(3n+0) .appmsg:hover ,#guide-image-list-li .col-sm-4:nth-child(3n+0) .appmsg:hover ,#upload-image-list-li .col-sm-4:nth-child(3n+0) .appmsg:hover  {
	right:0;text-align:right;
}*/

ol.sync-article-list { list-style-type: none;}
ol.sync-article-list li{cursor: pointer;}
body.dragging, body.dragging * {cursor: move !important;}
.dragged { position: absolute;top: 0; opacity: 0.5;  z-index: 2000;}
ol.sync-article-list li.placeholder { position: relative;margin: 0; padding: 0;border: none;}
ol.sync-article-list li.placeholder:before {  position: absolute;content:" ";width: 0; height: 0;margin-top: -5px;left: 0px; top: -4px; border: 8px solid transparent;border-left-color: red;border-right: none;}

.appmsg_opr {text-align: center;}
.appmsg_opr a {   display: block;   padding: 8px 0;font-size:20px;}
.article-msg{
	border-bottom: 1px solid #aaa;
	padding: 10px 0;
	cursor:pointer;position:relative;
	line-height:1.8em;
}
.article-msg .title{font-size:16px;font-weight:bold;}
.article-msg .opr-edit{display:none !important;}
.article-msg .cover{float:right;margin-left:15px;}
.article-msg img{width:60px;height:60px;}
.article-msg .summary{clear:none;}
.article-msg  p {min-height:0;clear:none;}

#wechat-msg-mine-list .article-msg {cursor: default;}
#wechat-msg-mine-list .appmsg_content{position:relative;}
#wechat-msg-mine-list .appmsg_content img{width:100%;height:150px;}
#wechat-msg-mine-list .appmsg_content p{position: absolute;bottom: 0px;padding: 5px 10px;width: 100%;background-color: rgba(55,55,55,0.6);}
#wechat-msg-mine-list .appmsg_content p a,#wechat-msg-mine-list .appmsg_content p a:hover{color:#FFF;text-decoration: none;cursor:pointer;}
#wechat-msg-mine-list .article-msg p .wechat-edit{display:block !important;float:left;height:60px;visibility: visible !important;cursor:pointer;font-size: 32px;width: 40px;}
#wechat-msg-mine-list .appmsg_content p.appmsg_desc{display:none;}
#wechat-msg-mine-list .submsg-title{clear:both;padding:2px;}
#wechat-msg-mine-list .appmsg_opr {border-top: 1px solid #ddd;}
#wechat-msg-mine-list .article-msg{border-bottom:0 none;padding-bottom:0px;}


#style_search_list ul > li {border-bottom:1px solid #DDD;padding: 10px 15px;cursor: pointer;}

#style-categories >li > ul > li{padding:0 0;}
#style-categories .open > .dropdown-menu{display:block;padding:0 0;background: RGBA(0,0,0,0.6);left:0;top:99%; padding: 0;}
#style-categories .open > .dropdown-menu a{color:#333;line-height: 29px;padding: 0 20px;}

#style-categories .open > .dropdown-menu a.active,#style-categories .open > .dropdown-menu a:hover{
	background: #2fa4e7;text-decoration: none;
}


#editor-msg-list .delete-pop{padding-left:0px;}
.edui-default .edui-editor {background-color:transparent !important;width: 100% !important;border:0 none !important;}
.edui-default .edui-dialog-content{margin:10px 5px;}
.edui-default .edui-editor-toolbarbox,.edui-default .edui-editor-toolbarboxouter{width: 500px;z-index: 1000;border: 0 none !important;-webkit-box-shadow: none !important;box-shadow: none !important;background: transparent !important;}
.edui-default .edui-editor-toolbarboxinner{padding:0 !important;}

.edui-default .show-edui-more .edui-editor-toolbarbox{height:58px;}
.edui-default .edui-editor-iframeholder{width:80% !important;background: #FFF;}

.show-edui-more .edui-editor-iframeholder{padding-top:30px !important;}


.edui-for-paragraph .edui-button-body{width:40px !important;}
.edui-for-fontfamily .edui-button-body{width:50px !important;}
.edui-for-fontsize .edui-button-body{width:32px !important;}

.CodeMirror{background-color: #FFF;}
.edui-default .edui-toolbar .edui-combox .edui-combox-body{background-color: rgba(255,255,255,0.3) !important;}
.edui-default .edui-editor-bottomContainer{display:none;}
.cp-app {z-index:10000;}
/*.S .cp-panel .cp-ctrl {display:none;}  .S .cp-panel .cp-col1*/
.cp-panel .cp-bres{display:none;}
.cp-panel .cp-bsav{width:100% !important;}
.cp-app .cp-raster{opacity: 1 !important;background: rgb(51,51,51) !important;}
.cp-panel .cp-disp {background-color: #FFF;color: #333;background-image:none !important;}
.S .hsv-h .cp-rgb{display: block !important;}
.S .cp-hsv {display:none;}

#right-fix-tab li{background:rgba(58,51,50,0.8);border:0 none;color:#FFF;font-size:15px;float: none;}

.nav-toolbars{display:inline-block;margin:0px auto;border-bottom:0 none !important;height:60px;}
.nav-toolbars > li {background:transparent !important;padding: 0 0 !important;border-bottom:0 none !important;}
.nav-toolbars > li > a{border:0 none !important;padding: 5px 15px;}
.nav-toolbars .open >a,.nav-toolbars .open >a:hover,.nav-toolbars .open >a:focus,.nav-toolbars > li > a.active,.nav-toolbars > li > a:hover,.nav-toolbars > li > a:focus{border:0 none !important;background:transparent !important;padding: 5px 15px;color:#ff8124 !important;opacity:1;}
.nav-toolbars > li > a .icon135{font-size:22px;}
.tooltip-inner{padding:5px 10px;font-size:12px;text-align: left;line-height:20px;color:#fff;background-color: rgba(35, 35, 35, 0.85);word-wrap:break-word;word-break:break-all}
#style-sorts .active{color:#ff8124;}

#colors-tab-content .style-list{margin: 15px 3px 20px;box-shadow: 0 0 3px rgba(172,165,150,0.5);background:#ede8de;padding:0px;position:relative;border-radius:2px;}
#colors-tab-content .style-list:hover{z-index:20;box-shadow: 0 0 5px rgba(172,165,150,0.5);}
#colors-tab-content .style-list:hover .tools{display:block;}
#colors-tab-content .style-list .content{background:#fefefe;padding:13px;}
#colors-tab-content .style-list .tools{text-align:left;width:100%;padding:15px;color:#FFF;}
#colors-tab-content .style-list .tools a,.style-list .tools a:hover{text-decoration: none;color:#3a3332;font-size:16px;}
#colors-tab-content .style-list .tools .title{height:24px;line-height:24px;}

#WxMsgViewForm .popover{padding:0px;background:transparent;}
#WxMsgViewForm .popover-content{   background: rgba(58,51,50,0.9);} 
#WxMsgViewForm .popover-content .btn{margin:5px;}
#WxMsgViewForm .popover.right > .arrow{border-right-color:transparent;}
#WxMsgViewForm .popover.left > .arrow{border-left-color:transparent;}
#WxMsgViewForm .popover.right > .arrow:after{border-right-color: rgba(58,51,50,0.9);}
#WxMsgViewForm .popover.left > .arrow:after{border-left-color: rgba(58,51,50,0.9);}
.more-popover-content .btn-xs{font-size:12px;margin:0px 0 5px;border-color:#FFF;color:#FFF;border: 0 none;background: transparent;color: #FFF;border: 1px solid #FFF;}

#user-draft-chooser .popover{max-width:400px;width:400px;top: 5px !important;}
#user-draft-chooser .popover.right > .arrow{top:50px;}
#user-draft-chooser .modal-dialog{width:464px;}

#fileuploadinfo_WxMsgCoverimg {position: absolute;right: 0;top: 0;}
#fileuploadinfo_WxMsgCoverimg img {max-width: 200px;}
#edui_fixedlayer ~ div iframe {display: none;opacity:0;}
.modal-body div iframe {display: inline-block !important;opacity: 1 !important;width: 100%;}

#btn-show-drafts{display:none;}
.jGrowl.bottom-right{bottom:36px;}
.jGrowl .jGrowl-notification, .jGrowl .jGrowl-closer{margin:5px;padding: 15px 20px;min-width: 200px;position: relative;}
.jGrowl .jGrowl-notification .jGrowl-close {float:none;	position: absolute;right: 10px;top: 5px;}
</style>
<script>
document.domain="135editor.com";
var BASEURL = "http://www.135editor.com";
var current_editor;
var current_active_135item = null;
var current_media_id = null;
var current_media_idx = null;
var domain_host = 'www.135editor.com}';
//window.UEDITOR_HOME_URL = 'http://static.135editor.com/js/ueditor/';

//var window.UEDITOR_HOME_URL = "http://www.135editor.com/js/ueditor/";
</script>
</head>
<body style="overflow-y:auto;overflow-x:auto;background-size: cover !important;" oncontextmenu="return false;">
<div id="full-page" class="bg" style="max-width: 1135px;margin: 0 auto;padding:0 5px;">
<div id="nav-header">
		<div class="clearfix" style="text-align:center;background: rgba(0, 0, 0, 0.25);">
      <ul id="login-menus"  class="hidden  pull-right nav  editor-nav">
      		<li><a href="/shortmessages/mine" style="padding:10px 8px;" target="_blank" data-toggle="tooltip" data-container="body" data-placement="bottom" title="站内消息中心"><i class="fa fa-bell"></i><span  class="user-unread-msgnum">0</span></a></li>
			
			<li class="dropdown">
				 <a href="#" class="dropdown-toggle" style="display: inline-block;padding-left:8px;" data-toggle="dropdown"><span id="login-user-name" title=""></span><b class="caret"></b></a>				 
				 <ul class="dropdown-menu" style="right: 0px;left: auto;">
				 	<li><a href="/users/permission" target="_blank"><i class="fa fa-lock"></i> 我的权限</a></li>
                    
				 	<li><a href="/wxes/mine" target="_blank"><i class="fa fa-wechat"></i> 授权公众号</a></li>
                    <li><a href="/orders/mine" target="_blank"><i class="fa fa-shopping-cart"></i> 我的订单</a></li>
                    <!--     					<li class="activate link">
							<a href="/users/activate" target="_blank"><i class="fa fa-envelope"></i> Activate email</a>					</li>
					 
					<li><a href="/orders/edit_consignee" target="_blank"><i class="fa fa-map-marker"></i> 我的地址</a></li>
                      -->   
                     <li><a href="/users/score" target="_blank"><i class="fa fa-leaf"></i> 我的积分</a></li>
                      <li><a href="/users/invite" target="_blank"><i class="fa fa-user"></i> 邀请朋友</a></li>
					
                    <li><a href="/users/logout" title="退出登录"><i class="fa fa-sign-out"></i> 退出登录</a></li> 
				</ul>
			</li>
	</ul>
	<ul id="login-links" class="fr nav  editor-nav">
							<li>
				<a href="/users/login" onclick="return checkLogin({query:&#039;state=postmsg&#039;});">登录</a>				</li>
						<li>
			<a href="/users/register" target="_blank">注册</a>			</li>
      </ul>
      
      
<ul class="fr nav editor-nav category-nav">
<li class="active"><a href="/beautify_editor.html" id="link-127" data-id="127" ref="beautify_editor" class=" ui-menu-first " target="_blank">首页</a></li>
<li class="dropdown"><a href="#" id="link-123" data-id="123" ref="135editor" target="" class="  dropdown-toggle" data-toggle="dropdown">素材库<span class="caret"></span></a>
<ul class="dropdown-menu">
<li><a href="/style-center?cate_id=1" id="link-124" data-id="124" ref="style-center" class=" ui-menu-first" target="_blank">样式中心</a></li>
<li><a href="/template-center?cate_id=3" id="link-125" data-id="125" ref="template-center" target="_blank">模板中心</a></li>
<li><a href="/editor-pictures?cate_id&gt;%3d=50" id="link-128" data-id="128" ref="editor-pictures" target="_blank">图片素材</a></li>
<li><a href="/color-plans.html" id="link-158" data-id="158" ref="color-plans" class=" ui-menu-last" target="_blank">配色方案</a></li></ul>
</li>
<li class="dropdown"><a href="#" id="link-145" data-id="145" ref="#" target="" class="  dropdown-toggle" data-toggle="dropdown">付费服务<span class="caret"></span></a>
<ul class="dropdown-menu">
<li><a href="http://www.135plat.com/charge-service" id="link-164" data-id="164" ref="plat" class=" ui-menu-first" target="_blank">付费会员</a></li>
<li><a href="http://www.135plat.com/open_editor.html" id="link-171" data-id="171" ref="qiyechajian" class=" ui-menu-last" target="_blank">企业插件</a></li></ul>
</li>
<li class="dropdown"><a href="#" id="link-154" data-id="154" ref="help-center" target="" class="  dropdown-toggle" data-toggle="dropdown">帮助中心<span class="caret"></span></a>
<ul class="dropdown-menu">
<li><a href="/books/chapter/1/20" id="link-130" data-id="130" ref="editor-helps" class=" ui-menu-first" target="_blank">使用教程</a></li>
<li><a href="/use-principle.html" id="link-152" data-id="152" ref="use-principle" target="_blank">使用原则</a></li>
<li><a href="/tuiguang.html" id="link-168" data-id="168" ref="tuiguang" class=" ui-menu-last" target="_blank">合作推广</a></li></ul>
</li>
<li class="dropdown"><a href="#" id="link-147" data-id="147" ref="thirdplat" class=" ui-menu-last  dropdown-toggle" target="" data-toggle="dropdown">135平台<span class="caret"></span></a>
<ul class="dropdown-menu">
<li><a href="http://www.wx135.com" id="link-148" data-id="148" ref="wx135" class=" ui-menu-first" target="_blank">公众号大全</a></li>
<li><a href="/autoqa.html" id="link-149" data-id="149" ref="autoqa" target="_blank">每日一题</a></li>
<li><a href="/score_task.html" id="link-142" data-id="142" ref="score_task" class=" ui-menu-last" target="_blank">积分任务</a></li></ul>
</li></ul>
	
	</div>
</div><!-- end nav-header -->

    <div class="box p-r clearfix" style="margin:0 auto;"><!--box start-->
      
      <div class="w0 p-r clearfix">
      	<!-- <div class="p-a" style="width:80px;left:-80px;">
      		<a href="#editor-template" class="filter btn-block btn btn-primary" onclick="return brushOff();" role="tab" data-toggle="tab"  data-filter="all" >样式</a>
          	<a class="filter btn-block btn btn-warning" data-filter=".brush" onclick="return brushOn();" role="tab" data-toggle="tab" href="#editor-template">样式刷</a>
      	</div> -->
      	<div id="style-operate-area" style="display:inline-block;position:relative;float:left;margin-top: -40px;">
	        <div class="w1 fl" style="background:RGBA(0,0,0,0.3);height:900px;width:90px;overflow: hidden;text-align:center;">
	          <a href="/"><img src="http://image1.135editor.com/files/201412/4d10fae23551a6be4a8ef6d3.png" style="height:50px;max-width:90px;padding:5px 10px" title="135编辑器"></a>
	          <ul class="n1-1" id="left-operate-menu" style="height: auto;margin-bottom: 30px;">
	          		<li class="active"><a href="#editor-template" class="filter active" data-filter="all" role="tab" data-toggle="tab"> 样式</a></li>
	          		<li><a href="#parse-rule-lists" data-refresh="always" data-url="/html_parsers/lists #html-parsers-list" role="tab" data-toggle="tab">一键排版</a></li>
					
	          		<li id="tab-tpl-trigger"><a href="#editor-tpls" role="tab" data-toggle="tab">模板</a></li>
	          		<li><a href="#image-list" onclick="$('#editor-image-navtab  a:first').trigger('click').tab('show');" role="tab" data-toggle="tab">图片素材</a></li>
	            	
	          		<li id="tab-wxmsg-trigger" ><a href="#editor-my-msgs" role="tab" data-toggle="tab"> 我的文章</a></li>
	          		
	            	<li><a href="#editor-others" role="tab" data-toggle="tab">加点料</a></li>
	          </ul>
	          <a href="http://www.135editor.com/tuiguang.html" title="查看合作推广规则" target="_blank"><span style="color:#aaa;font-size:12px;margin:2px 0px;border-bottom: 1px solid rgba(255,255,255,0.06);display: block;padding-left: 5px;padding-bottom: 5px;"><small><strong>合作推广</strong></small></span></a>
	          <ul class="n1-1"  style="height: auto;" >
	            	<!-- <li><a title="免费制作H5" href="http://www.135editor.com/advertises/click/6" target="_blank" data-toggle="tooltip" data-container="body" data-placement="right" >兔展H5</a></li> -->
	            	
	            	<li><a title="轻巧智能的公众号服务平台" href="http://www.135editor.com/advertises/click/7" target="_blank" data-toggle="tooltip" data-container="body" data-placement="right" style="position:relative;">水滴微信<i style="position:absolute;color:red;top:-12px;font-size:18px;right:2px;" class="icon135 icon-jian"></i></a></li>
	            	<li><a title="咫尺微页，免费H5页面制作工具" href="http://www.135editor.com/advertises/click/9" target="_blank" data-toggle="tooltip" data-container="body" data-placement="right" >微页H5</a></li>
	            	<li><a title="凡科互动，免费制作公众号吸粉游戏" href="http://www.135editor.com/advertises/click/10" target="_blank" data-toggle="tooltip" data-container="body" data-placement="right" style="position:relative;" >微信吸粉<i style="position:absolute;color:red;top:-12px;font-size:18px;right:2px;" class="icon135 icon-jian"></i></a></li>
	            	<li><a title="极点互娱，免费微信游戏助力公众号拉新涨粉！" href="http://www.135editor.com/advertises/click/11" target="_blank" data-toggle="tooltip" data-container="body"  style="position:relative;font-size:12px;"  data-placement="right" >微信游戏涨粉</a></li>
	            	<li><a title="有娱游戏，国内最大的微信游戏平台，涨粉保障，无效退款。" href="http://www.135editor.com/advertises/click/12" target="_blank" data-toggle="tooltip" data-container="body"  style="position:relative;"  data-placement="right" >微信游戏<i style="position:absolute;color:red;top:-12px;font-size:18px;right:2px;" class="icon135 icon-jian"></i></a></li>
	            	<li><a title="免费的微信应用号开发工具。" href="http://www.135editor.com/advertises/click/13" target="_blank" data-toggle="tooltip" data-container="body"  style="position:relative;font-size:12px;"  data-placement="right" >微信应用开发</a></li>
	            	
	            	<!-- <li><a>H5游戏</a></li> -->
	          </ul>
	        </div>
	        <div class="w2 fl">
	        	<div style="line-height:30px;margin: 0 0px;">
		          	<div style="height:40px;padding:5px;color: #FFF;">
		          		<input type="text" placeholder="输入关键字搜索样式" style="height:30px;width:240px;color: #FFF;background-color: transparent; border: 0 none; padding:0 10px;" id="txtStyleSearch"> 
		          		<span style="cursor:pointer;float:right;margin-right:20px;" onclick="reloadStyleOperate();" data-toggle="tooltip" data-container="body" data-placement="bottom" title="刷新样式"><i class="fa fa-refresh"></i></span>
		          	</div>
		          	<div id="styleSearchResult" style="position:absolute;display:none;top:40px;left:80px;width:384px;z-index: 100;border: 5px solid rgba(154, 188, 56, 0.3);background:#FFF;">
		          		<span title="关闭" class="btn" style="float:right;font-size: 24px;color: #999;font-weight: bold;text-shadow: 0 1px 0 #ffffff;" onclick="$('#styleSearchResult').hide();"> × </span>
		          		<h3 style="border-bottom:2px solid #CCC;margin:0;padding:15px 10px"> 搜索结果 </h3>
		          		<div id="styleSearchResultList" style="height:500px;width:100%;padding:10px;overflow-y:auto;">
		          			<img src="http://static.135editor.com/img/ajax/circle_ball.gif">
		          		</div>
		          	</div>
		          	<div id="moreColorSwatch" style="position:absolute;display:none;top:40px;left:80px;width:384px;z-index: 100;border: 5px solid rgba(154, 188, 56, 0.3);background:#FFF;">
		          		<span title="关闭" class="btn" style="float:right;font-size: 24px;color: #999;font-weight: bold;text-shadow: 0 1px 0 #ffffff;" onclick="$('#moreColorSwatch').hide();"> × </span>
		          		<h3 style="border-bottom:2px solid #CCC;margin:0;padding:15px 10px"> 更多配色方案 </h3>
		          		<div id="moreColorSwatchList" style="height:500px;width:100%;padding:10px;overflow-y:auto;"></div>
		          	</div>
	          </div>
	          
	          
	          <div id="insert-style-list" class="item tab-content" style="height:860px;">
	          	
	          	<div id="editor-template" class="tab-pane active">	
	          		<div style="background-color:rgba(245,245,245,0.9);height:86px; text-align:center;">
	          			<div style="height:58px;">
	          				<div style="position: absolute;right: 0;">
								<a class="filter" title="推广：易速推，微信公众号每天增加数百个真实粉丝，so easy！" style="padding:0px;margin-top:8px;float:right;" data-placement="right" data-toggle="tooltip" target="_blank" href="http://www.135editor.com/advertises/click/8"> <img style="width:60px;" src="http://image1.135editor.com/cache/remote/aHR0cHM6Ly9tbWJpei5xbG9nby5jbi9tbWJpei95cVZBcW9adkRpYkZUaWFVdHk5cGQzNHEybzlSbzJrS0dqMURjd2lhZXV1amlhUEV0aWJUWlJ1SmtHaWJvTjNnUU93YkVvNk9TaWIyOWljMkZKVnduOVBNREZ6NGJRLzA/d3hfZm10PWpwZWc="></a>
							</div>
		          		<ul class="nav nav-tabs nav-toolbars" id="style-categories" style="margin-right: 60px;" >
							<li class="dropdown">
								<a class="filter" data-filter=".tagtpl-107" role="tab" data-toggle="tab" href="#"> <i class="icon135 icon-biaoti"></i><br/> 标题 </a>
								<ul class="dropdown-menu">
		<li><a href="#editor-template" class="filter" data-filter=".tagtpl-229" >编号标题</a></li>
		<li><a href="#editor-template" class="filter" data-filter=".tagtpl-237" >框线标题</a></li>
		<li><a href="#editor-template" class="filter" data-filter=".tagtpl-233" >底色标题</a></li>
		<li><a href="#editor-template" class="filter" data-filter=".tagtpl-232" >图片标题</a></li>
								</ul>
							</li>
							
							<li class="dropdown">
								<a class="filter" data-filter=".tagtpl-109" role="tab" data-toggle="tab" href="#"> <i class="icon135 icon-neirong"></i><br/> 正文 </a>
								<ul class="dropdown-menu">
		<li><a href="#editor-template" class="filter" data-filter=".tagtpl-226">边框内容</a></li>
		<li><a href="#editor-template" class="filter" data-filter=".tagtpl-228">底色内容</a></li>
		<li><a href="#editor-template" class="filter" data-filter=".tagtpl-230">序号/轴线</a></li>
		<li><a href="#editor-template" class="filter" data-filter=".tagtpl-231">单页</a></li>
		<li><a href="#editor-template" class="filter" data-filter=".tagtpl-235">竖排</a></li>
								</ul>
							</li>
							<li class="dropdown">
								<a class="filter" data-filter=".tagtpl-222,.cate-50,.cate-51,.cate-52,.cate-53,.cate-54,.cate-55,.cate-56" role="tab" data-toggle="tab" href="#"> <i class="icon135 icon-tupian"></i><br/>图片 </a>
								<ul class="dropdown-menu">
		<li><a href="#editor-template" class="filter" data-filter=".tagtpl-222">图片样式</a></li>
		<li><a href="#editor-template" class="filter" data-filter=".cate-53">分割线</a></li>
		<li><a href="#editor-template" class="filter" data-filter=".cate-56">引导图</a></li>
		<li><a href="#editor-template" class="filter" data-filter=".cate-51">背景图</a></li>
		<li><a href="#editor-template" class="filter" data-filter=".cate-50,.cate-52,.cate-54,.cate-55">其它</a></li>
								</ul>
							</li>
							<li class="dropdown">
								<a class="filter" data-filter=".tagtpl-151,.tagtpl-111" role="tab" data-toggle="tab" href="#"> <i class="icon135 icon-tuwen"></i><br/>图文 </a>
								<ul class="dropdown-menu">
		<li><a href="#editor-template" class="filter" data-filter=".tagtpl-223">上下图文</a></li>
		<li><a href="#editor-template" class="filter" data-filter=".tagtpl-224">左右图文</a></li>
		<li><a href="#editor-template" class="filter" data-filter=".tagtpl-225">背景/信纸</a></li>
		<li><a href="#editor-template" class="filter" data-filter=".tagtpl-234">音频/视频</a></li>
		<li><a href="#editor-template" class="filter" data-filter=".tagtpl-236">对话</a></li>
								</ul>
							</li>
							<li>
								<a class="filter" data-filter=".tagtpl-227" role="tab" data-toggle="tab" href="#"> <i class="icon135 icon-layout"></i><br/>布局 </a>
							</li>
							
						</ul>
						
						</div>
						<div id="style-sorts" style="text-align:right;height:26px;padding:5px 10px;z-index:1;background-color:rgba(235,235,235,0.8);">
		          					<small>排序：<span class="sort active" style="cursor:pointer;" data-sort="time:desc" > <i class="fa fa-clock-o"></i> 收藏时间 </span> |
		          					   <span class="sort" style="cursor:pointer;" data-sort="click:desc" > <i class="fa fa-thumbs-o-up"></i> 使用次数 </span>  </small>    					
		          		</div>
		          	</div>
		          	<div id="editor-template-scroll" style="height:770px;overflow-y: auto;overflow-x: hidden;">
					</div><!-- end with editor-template-scroll 样式列表 -->
					</div>	
					<div id="image-list" class="tab-pane"  style="padding:0 10px;">
						<div style="padding:10px 0;">
					  		<!-- <button onclick="edit_image();" class="btn btn-primary">美图上传</button>  -->
							<button onclick="meitu_upload();" class="btn btn-primary btn-xs">美图上传</button>					  		 
					  		<button onclick="pingtu_upload();" class="btn btn-primary btn-xs">简易拼图</button>
					  	</div>
					  	
							<ul id="editor-image-navtab" class="nav nav-tabs" style="border:0 none;text-align:center;">
							  <li class="ignore col-xs-3"  style="padding:0 0;"><a style="padding:5px 5px;" data-url="/uploadfiles/mine?inajax=1 #my-file-list" data-refresh="always" href="#upload-image-list-li" role="tab" data-toggle="tab">我的上传</a></li>
							  <!-- <li class="ignore col-xs-3  active"  style="padding:0 0;"><a style="padding:5px 5px;" data-url="/editor_styles/favimages?inajax=1" href="#favor-image-li" role="tab" data-toggle="tab">收藏图片</a></li> -->
							  <li class="ignore col-xs-3"  style="padding:0 0;"><a style="padding:5px 5px;" data-url="/editor_styles/imglist?inajax=1&cate_id=53 #system-img-list" href="#split-image-list-li" role="tab" data-toggle="tab">分割线</a></li>
							  <li class="ignore col-xs-3"  style="padding:0 0;"><a style="padding:5px 5px;" data-url="/editor_styles/imglist?inajax=1&cate_id=56 #system-img-list" href="#guide-image-list-li" role="tab" data-toggle="tab">引导图</a></li>
							</ul>
							<div class="tab-content"  style="padding:10px 0;overflow-x:hidden;" id="editor-image-list">
								<div id="favor-image-li" class="tab-pane active clearfix" style="position: relative;"></div>
								<div id="split-image-list-li" class="tab-pane  clearfix" style="padding: 0 10px 10px;position: relative;"></div>
								<div id="guide-image-list-li" class="tab-pane  clearfix" style="padding: 0 10px 10px;position: relative;"></div>
								<div id="upload-image-list-li" class="tab-pane  clearfix" style="padding: 0 10px 10px;position: relative;"></div>
							</div>
					</div>
					
					<div class="tab-pane" id="editor-tpls" style="padding: 10px 10px;position:relative;">
					    	<ul id="editor-tpls-navtab" class="nav nav-tabs" style="border:0 none;">
							  <li class="ignore col-xs-4" id="personal-tpl-list-li"><a href="#personal-tpl-list-1" data-refresh="always" data-url="/user_styles/myStyles" role="tab" data-toggle="tab">个人样式</a></li>
							  <li class="ignore col-xs-4" id="favorite-tpl-list-li"><a href="#favorite-tpl-list-1" data-refresh="always" data-url="/editor_styles/favorTemplates" role="tab" data-toggle="tab">收藏模板</a></li>
							  <li class="ignore  col-xs-4">
							    <a href="#recommend-tpl-list-1" data-url="/editor_styles/systemTemplates"  role="tab" data-toggle="tab">系统模板</a>
							  </li>						  
							</ul>
							<div class="tab-content"  style="padding:0px;overflow-x:hidden;" id="tpl-tab-content">
								<div id="personal-tpl-list-1" class="tab-pane"></div>
								<div id="favorite-tpl-list-1" class="tab-pane"></div>
								<div id="recommend-tpl-list-1" class="tab-pane"></div>
							</div>					
					  </div>
					  <div class="tab-pane" style="padding:10px;" id="editor-others">
					  		<button id="btn-choose-auto-qa" class="btn btn-primary">每日一题</button>
					  		
					  </div>
					  <div class="tab-pane" style="padding:10px;" id="parse-rule-lists"></div>
					  
					  
					  <div id="editor-my-msgs" class="tab-pane" style="padding: 10px 10px;position: relative;">
					  	
					  		
					  	<ul class="nav nav-tabs" style="border:0 none;">
							  <li class="ignore col-xs-4 active" onclick="return $('#tab-wxmsg-trigger').trigger('click');" ><a href="#personal-article-list" role="tab" data-toggle="tab"><i class="fa fa-list"></i> 135文章</a></li>
							  <li class="ignore col-xs-4"><a href="#wechat-article-list" data-url="/wx_msgs/wechat?pagesize=5 #wechat-msg-mine-list"  data-refresh="always" role="tab" data-toggle="tab"><i class="fa fa-wechat"></i> 微信文章</a></li>
							  <li class="ignore col-xs-4"><a href="#article-trash-list" style="color:red;" data-url="/wx_msgs/mine?deleted=1 #wxmsg-mine-list" data-refresh="always" role="tab" data-toggle="tab"><i class="fa fa-trash"></i> 回收站</a></li>
						</ul>
							<div class="tab-content"  style="padding:0px;overflow-x:hidden;" id="my-article-list">
								<div id="personal-article-list" class="tab-pane active">
									<div class="m0" style="padding:10px 0 5px; background: transparent; z-index: 1;">
			          					<small>
			          						<p style="clear:none;">您的公众号<a href="http://www.135plat.com/weixin/pauth" target="_blank">授权给135</a>后，可将文章同步保存到微信文章素材库</p>							
										</small>
			          				</div>
									<div id="editor-msg-list">
									</div>
								</div>
								<div id="wechat-article-list" class="tab-pane"></div>
								<div id="article-trash-list" class="tab-pane"></div>
							</div>	
								
					  </div>	
	          </div>
	        </div>
        </div>
        <div class="w3 clearfix" style="margin-left:474px;position: relative;">
          <div class="editor1 fl" style="position: absolute;height:58px;"></div>
          <div class="editor2 p-r fl" style="height:800px;"><!--editor2 start-->
            <!-- <textarea class="editorBox" name="" id="" cols="30" rows="10"></textarea>-->
            <form action="" class="form-horizontal editorBox" style="background-color:transparent;position: relative;height: 100%;" role="form" target="_blank" id="WxMsgViewForm" method="post" accept-charset="utf-8">
		         <div id="image-preview"></div>
		            <script id="WxMsgContent" type="text/plain"></script>
		            <div style="background: #f1f1f1;padding: 0 10px;position: absolute;bottom: 0px;border-top:1px solid #ddd;width: 100%;">
		            	<ul style="margin:0 0;padding:0 0;line-height:30px;" >
							<li class="dropdown dropup">
								<a class="dropdown-toggle" data-toggle="dropdown" href="#">使用签名 <b class="caret"></b></a>
								<ul class="dropdown-menu" id="signature-list">
								
									<li><a href="#" style="font-size: 12px;" id="no-signature" ><small>不使用签名</small></a></li>
									<li><a href="/signatures/mine" style="font-size: 12px;" target="_blank" ><small>管理签名</small></a></li>
								</ul>
							</li>
						</ul>
		            </div>
		            <input type="hidden" name="template_id" id="template_id" />
				<input type="hidden" name="template_name"  id="template_name"/>
				<input type="hidden" name="msg_id" />
		            <div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
				  <div class="modal-dialog">
				    <div class="modal-content">
				      <div class="modal-header">
				        <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">关闭</span></button>
				        <h4 class="modal-title">保存自定义样式</h4>
				      </div>
				      <div class="modal-body">
				      	<input type="hidden" name="cate_id" value="1">
				        <p><input type="text" placeholder="请输入自定义样式名称" name="template_name" id="dialog-template-name" class="form-control"></p>
				        <!-- <p><label><input type="checkbox" name="push_tpl_center" value="1">发布到模板中心(不勾选时存为私人模板)</label> <a href="/audit-rules.html" target="_blank">审核规则</a> </p> -->
				        <!-- <p><label id="auto_cover_tpl" class="hidden"><input type="checkbox" name="auto_cover_tpl" value="1">覆盖原有模板</label></p> -->
				        <br/>
				        				        <p>免费用户可保存3个自定义样式</p>
				        <p>如需保存更多自定义样式， <a target="_blank" href="http://www.135plat.com/charge-service.html">请升级成为付费会员。</a></p>
							
				      </div>
				      <div class="modal-footer">
				        <button type="button" class="btn btn-default" data-dismiss="modal">关闭</button>
				        <button type="button" id="dialog-save-template" class="btn btn-primary">保存</button>
				      </div>
				    </div><!-- /.modal-content -->
				  </div><!-- /.modal-dialog -->
				</div><!-- /.modal -->
			
            <div class="editorslide">
              <ul>
				               
              	<li><a href="javascript:;" id="copy-editor-html" class="btn btn-warning btn-xs" tabindex="1"  title="复制内容用于微信，若用于外网请点更多中的复制到外网，复制失败请查看使用帮助"><i  class="fa fa-clipboard"></i>复制</a></li>
                <li><button type="button" id="save-as-template" tabindex="2"  class="btn btn-warning btn-xs" data-toggle="tooltip" data-container="body" data-placement="right"  title="保存内容"><i class="fa fa-save"></i>保存</button></li>
				<li><button type="button"  id="btn-new-msg" class="btn btn-default btn-xs"  data-toggle="tooltip" data-html="true" data-container="body" data-placement="right" title="清空内容<br/>创建新文档"><i class="fa fa-trash"></i>清空</button></li>
              	
              	<li><a href="javascript:;" id="preview-editor" class="btn btn-default btn-xs" data-toggle="tooltip" data-html="true" data-container="body" data-placement="right" title="预览实际效果<br/>以手机为准"><i class="fa fa-search"></i>预览</a></li>
                
                <li><a href="javascript:;" id="html-more-popover" data-html="true"  data-container="#WxMsgViewForm" 
	       			data-toggle="popover" data-placement="left"  data-content="<div class='more-popover-content'><a title='复制内容用于微信之外的网站，将转换微信图片地址' class='btn btn-default btn-xs' id='copy-outer-html'> <i  class='fa fa-clipboard'></i> 外网复制 </a> <button data-placement='top' data-toggle='tooltip' title='转为图片格式，用于发微博、避免内容被直接复制修改等' class='btn btn-default btn-xs' id='html-to-image'> <i  class='fa fa-image'></i> 长图(宽480px)  </button><button data-placement='top' data-toggle='tooltip' title='转为图片格式，用于发微博、避免内容被直接复制修改等' class='btn btn-default btn-xs' id='html-to-image-640'> <i  class='fa fa-image'></i> 长图(宽640px)  </button><button id='btn-show-drafts' type='button' onclick='loadUserDrafts();' class='btn btn-default btn-xs'  data-toggle='tooltip' data-html='true' data-container='body' data-placement='top' title='云端草稿<br/>每5分钟保存一次草稿到135云端服务器'><i class='fa fa-file-text-o'></i> 云端草稿</button></div>"  class="btn btn-default btn-xs" ><i class="fa fa-ellipsis-h" ></i> 更多</a></li>
                
                                

              </ul>
            </div>
            </form>
          </div><!--editor2 end-->
        </div>
      </div>
      
    
      <!-- <div class="change">
      	  <div id="params-setting" class="text-right"> 
			<small><a class="pull-right" style="margin:0 15px;" href="http://www.wx135.com/beautify_editor_ck.html" target="_blank">回老版本</a></small>
	  </div>
      </div>
      <footer class="fl w100 center">
        <div class="links"><a href="#">前沿资讯</a>  |  <a href="#">135微信导航</a></div> 
        
      </footer>-->
    </div><!--box end-->
    

<div class="panel panel-primary" id="qrcode-pannel" style="position:fixed;display:none;z-index:10001;right:2px;bottom:0px;">
  <div class="panel-heading"> <span class="pull-right" onclick="$('#qrcode-pannel').toggle();" style="cursor:pointer;">&times;</span>135编辑器公众号</div>
  <div class="panel-body" style="padding:0 0;">
    <img style="width:180px;" data-src="http://image1.135editor.com/cache/remote/aHR0cHM6Ly9tbWJpei5xbG9nby5jbi9tbWJpei95cVZBcW9adkRpYkhVWUwxVzRqVnRLczJjdWo4bGljT2liUFhpYmhGb2tKRUFDc2g5MVppY1FkMkN5RnBNa3dqWDBTMnpKTHFpYXFPZ3REUkNpYkVQSTlkcTZpYzJBLzA=">
  </div>
</div>

<div  id="more-popover">
	
</div>

<section id="color-plan" style="width:115px;">
	<div class="panel panel-primary" style="border:0 none;background: transparent;">
	
	<ul class="nav nav-tabs" role="tablist" id="right-fix-tab">
	  <li role="presentation"><a data-toggle="#color-choosen" href="#color-choosen" aria-controls="home">配色方案</a></li>
	</ul>
	
	<div class="tab-content" style="padding: 5px 8px !important;padding:0;background:rgba(58,51,50,0.9);">
		<div id="features" role="tabpanel" class="tab-pane" style="text-align: left;padding-left:5px;">
			<small class="more-popover-content" style="font-size:12px;">
					<button class="btn btn-default btn-xs btn-block" id="set-image-radius"> 图片圆形  </button>
					 <button class="btn btn-default btn-xs btn-block" id="set-image-border"> 图片边框 </button>
					 
						<button class="btn btn-default btn-xs btn-block" id="flat-strip-radius"> 去圆角</button>
						<button class="btn btn-default btn-xs btn-block" id="flat-add-radius"> 加圆角</button>
						<button class="btn btn-default btn-xs btn-block" id="flat-strip-border"> 去边框</button>
						<!--  <button class="btn btn-default btn-xs" id="flat-add-border"> 加边框</button>  -->
						<button class="btn btn-default btn-xs btn-block" id="flat-strip-shadow"> 去阴影 </button>
						<button class="btn btn-default btn-xs btn-block" id="flat-add-shadow"> 加阴影 </button>
						
						<button class="btn btn-default btn-xs btn-block" id="135-random-color"> 
						随机换色
						</button>
						
			</small>
		</div>
			<div role="tabpanel" style="width:98px;margin:auto;" class="tab-pane active"  id="color-choosen">
			  	 <div style="margin:5px 0px;color:#FFF;line-height:32px;text-align: center;position:relative;" >
		        	<input id="custom-color-text" class="colorPicker form-control" style="font-size:12px;color:#FFF;padding:4px 8px 4px 25px;height:24px;line-height:16px" id="custom-color" value="#EF7060" />
		        	<i id="btn-favor-color" title="点击新增颜色，最多新增20种" data-toggle="tooltip" data-container="body" data-placement="left"  style="position:absolute;left:5px;color:#FFF;cursor:pointer;top:5px;" class="fa fa-plus-circle"></i>
		        </div>
		        
		        <div style="margin:0 0;color:#dad9d8;line-height:18px;text-align: center;">
		        <label style="cursor:pointer;margin-bottom:0px;font-size: 12px;">
		        	<input style="float:left;" type="checkbox" id="replace-color-all" value="1">&nbsp;全文换色
		        </label>
		        </div>
		        
			 	<ul id="favor-colors" class="clearfix" style="list-style:none;padding:0 0px 0px;margin:0 0;">
			 				 	</ul>
			 	<hr style="margin:2px 0px;border-color:#999;"/>
			    <ul class="clearfix" title="<strong>提示：</strong><br><span style='color:#FF8124'>①</span> 勾选全文换色，对整个编辑器的内容进行换色；<br><span style='color:#FF8124'>②</span> 编辑区域里点击选中样式后，对样式单独换色；<br><span style='color:#FF8124'>③</span> 没有勾选全文换色，也没有选中样式时，对左侧样式列表换色" data-html="true" data-toggle="tooltip" data-container="body" data-placement="left"  style="list-style:none;padding:0 0px;margin:0 0;">
		            <li class="color-swatch" style="background-color: #ac1d10"></li>
		            <li class="color-swatch" style="background-color: #d82821;"></li>
		            <li class="color-swatch default-color" style="background-color: #ef7060;"></li>
		            <li class="color-swatch" style="background-color: #fde2d8;"></li>
		            
		            <li class="color-swatch" style="background-color: #d32a63;"></li>
		            <li class="color-swatch" style="background-color: #eb6794;"></li>
		            <li class="color-swatch" style="background-color: #f5bdd1;"></li>            
		            <li class="color-swatch" style="background-color: #ffebf0;"></li>
		            
		            
		            
		            <li class="color-swatch" style="clear:left;background-color: #e2561b;"></li>
		            <li class="color-swatch" style="background-color: #ff8124;"></li>
		            <li class="color-swatch" style="background-color: #fcb42b;"></li>
		            <li class="color-swatch" style="background-color: #feecaf;"></li>
		            
		            <li class="color-swatch" style="clear:left;background-color: #0c8918;"></li>
		            <li class="color-swatch" style="background-color: #80b135;"></li>
		            <li class="color-swatch" style="background-color:#c2c92a;"></li>
		            <li class="color-swatch" style="background-color:#e5f3d0;"></li>
		            
		            <!-- <li class="color-swatch" style="clear:left;background-color: #1f877a;"></li>
		            <li class="color-swatch" style="background-color: #27abc1;"></li>
		            <li class="color-swatch" style="background-color: #5acfe1;"></li>
		            <li class="color-swatch" style="background-color: #b6f2ea;"></li> -->
		            
		            <li class="color-swatch" style="clear:left;background-color:#374aae;"></li>
		            <li class="color-swatch" style="background-color:#1e9be8;"></li>
		            <li class="color-swatch" style="background-color:#59c3f9;"></li>
		            <li class="color-swatch" style="background-color:#b6e4fd;"></li>
		
		            <!-- <li class="color-swatch" style="clear:left;background-color:#5b39b4;"></li>
		            <li class="color-swatch" style="background-color: #4c6ff3;"></li>
		            <li class="color-swatch" style="background-color:#91a8fc;"></li>
		            <li class="color-swatch" style="background-color:#d0dafe;"></li> -->
		            
		            <!-- 紫色 -->
		            <li class="color-swatch" style="clear:left;background-color:#8d4bbb;"></li>
		            <li class="color-swatch" style="background-color: rgb(166, 91, 203);"></li>
		            <li class="color-swatch" style="background-color:#cca4e3;"></li>
		            <li class="color-swatch" style="background-color: rgb(190, 119, 99);"></li>
		            
		            <!-- <li class="color-swatch" data-color="#efefef" style="clear:left;background-color:#3c2822;"></li>
		            <li class="color-swatch" style="background-color:#6b4d40;"></li>
		            <li class="color-swatch" style="background-color:#9f887f;"></li>
		            <li class="color-swatch" style="background-color:#d7ccc8;"></li> -->
		            
		        	<li class="color-swatch" style="background-color: #212122;"></li>
		        	<li class="color-swatch" style="background-color: #757576;"></li>
		        	<li class="color-swatch" style="background-color: #c6c6c7"></li>
		        	<li class="color-swatch" style="background-color: #f5f5f4"></li>
		        	
		        </ul>
		        <a href="javascript:showMoreColorSwatch();" title="点击“更多”后<br>在左侧列表区域<br>选择配色方案"  data-html="true" data-toggle="tooltip" data-container="body" data-placement="bottom" class="btn btn-warning btn-xs btn-block" style="display:block;text-align:center;color:white;"> <i class="fa fa-angle-double-down"></i> 更多配色</a>
		     </div>
     
     </div>
     <ul class="nav nav-tabs" role="tablist" id="right-fix-tab">
	  <li role="presentation"><a href="#features" data-toggle="#features" aria-controls="features">特色功能</a></li>
	</ul>
	</div>        
</section>
<div class="modal fade" id="preview-msg" tabindex="-1" role="dialog"  aria-hidden="true">
	<div class="modal-dialog"  style="width:400px;margin-top:20px;">
    <div class="modal-content">
      <div class="modal-header" style="border:0 none;padding:10px 15px;">
      	<button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">关闭</span></button>
        <h4 class="modal-title">135编辑器图文效果预览</h4>
      </div>
     <div class="modal-body" style="overflow: hidden;padding: 0;margin: 10px;">
     		<section data-id="85568" class="135editor" style="padding: 2px;">
			    <section style="margin:0;  box-sizing: border-box; padding: 0px; border: 0px; ">
			        <section style="margin: 0px; width: 100%; height:auto !important;box-sizing: border-box;border-top-right-radius: 1em;border-top-left-radius: 1em;border-left: 10px solid rgb(33,33,34);border-right: 10px solid rgb(33,33,34);border-top: 45px solid rgb(33,33,34);padding-bottom: 10px;" data-width="100%">
			            <section style="margin: 0px; border-radius: 6px; ">
			                <section class="135editor" style="border: 0px none; padding: 0px 5px;background-color: rgba(192,192,192,0.3);">
			                    <section style="margin: 0px;text-align:right;padding: 2px 0px;width: 100%;" data-width="100%">
			                        <section style="margin: 0px 6px;display: inline-block;vertical-align: top;">
			                            <section style="width: 20px;height: 20px;border-radius: 0 60px 0 0;-moz-border-radius: 0 60px 0 0;-webkit-border-radius: 0 60px 0 0;border-style: double;border-width: 12px 12px 0 0;border-color: rgb(33,33,34);display: inline-block;-webkit-transform: rotate(-45deg);transform: rotate(-45deg);" data-width="20px"></section>
			                            <section style="width: 6px;height: 6px;border-radius: 8px;-moz-border-radius: 8px;-webkit-border-radius: 8px;background: rgb(33,33,34);margin-top: -6px;margin-left: 7px;" data-width="6px"></section>
			                        </section>
			                        <section style="margin: 0px 4px; padding: 0px; display:inline-block;">
			                            <section style="width: 4px;height: 4px;background: rgb(33,33,34);display: inline-block;margin-right: 1px;" data-width="4px"></section>
			                            <section style="width: 4px;height: 7px;background: rgb(33,33,34);display: inline-block;margin-right: 1px" data-width="4px"></section>
			                            <section style="width: 4px;height: 12px;background: rgb(33,33,34);display: inline-block;margin-right: 1px;" data-width="4px"></section>
			                            <section style="width: 4px;height: 18px;background: rgb(33,33,34);display: inline-block;margin-right: 1px;" data-width="4px"></section>
			                            <section style="width: 4px;height: 24px;background: rgb(33,33,34);display: inline-block;" data-width="4px"></section>
			                        </section>
			                        <section style="margin: 0px 4px;display: inline-block;">
			                            <section style="width: 25px;height: 15px;margin-top: 2px;border: 3px solid rgb(33,33,34);display: inline-block;border-radius: 2px;" data-width="25px">
			                                <section style="height: 10px;width: 10px;background: rgb(33,33,34);" data-width="10px"></section>
			                            </section>
			                            <section style="height: 8px;width: 2px;background: rgb(33,33,34);display: inline-block;margin-bottom: 4px;margin-left: 0px;" data-width="2px"></section>
			                        </section>
			                        <section style="margin: 0px 4px;display:inline-block;">
			                            <span style="font-size:14px">01:35</span>
			                        </section>
			                    </section>
			                </section>
			                <section class="135brush" id="preview-msg-content"  data-style="text-align: center;" style="padding: 10px 10px;overflow-x:hidden;overflow-y:auto;min-height:300px;max-height:500px;">
			                    
			                </section>
			            </section>
			        </section>
			        <section style="width:100%;  margin-top: -0.5em; border-bottom-left-radius: 0.6em; border-bottom-right-radius: 0.6em; box-sizing: border-box; text-align: center; background-color: rgb(33,33,34);padding: 20px;" data-width="100%">
			            <section data-bcless="spin" data-bclessp="180" style="width: 25px;height: 25px;border-radius:50%;border:1px solid rgb(255,0,0);display:inline-block;" data-width="25px"></section>
			        </section>
			    </section>
			    <section style="display: block; width: 0; height: 0; clear: both;"></section>
			</section>

     </div>
     
    </div>
    </div>
</div>

<div class="panel panel-primary" id="tpl-brush-board" style="position: absolute;display:none;width:400px; z-index: 10001;left: 30px; top: 60px;">
  <div class="panel-heading"> <span class="pull-right" onclick="$('#tpl-brush-board').toggle();" style="cursor:pointer;">×</span>模板秒刷</div>
  <div class="panel-body" id="tpl-brush-board-content" style="padding: 10px 20px;overflow-y:auto;">
    
  </div>
</div>


<div class="modal fade" id="meitu-beautify" tabindex="-1" role="dialog"  aria-hidden="true">
	<div class="modal-dialog"  style="width:720px;margin-top:20px;">
    <div class="modal-content">
      <div class="modal-header" style="border:0 none">
      	<button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">关闭</span></button>
        <h4 class="modal-title">编辑图片</h4>
      </div>
     <div class="modal-body" style="overflow: hidden;padding: 0;margin: 10px;">
     	<div id="MeituContent">正在加载美图秀秀编辑器...</div>
     </div>
     </div>
     </div>
</div>

<div class="modal fade" id="meitu-pingtu" tabindex="-1" role="dialog"  aria-hidden="true">
	<div class="modal-dialog"  style="width:720px;margin-top:20px;">
    <div class="modal-content">
      <div class="modal-header" style="border:0 none">
      	<button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">关闭</span></button>
        <h4 class="modal-title">简易拼图上传</h4>
      </div>
     <div class="modal-body" style="overflow: hidden;padding: 0;margin: 10px;">
     	<div id="MeituPingTuContent">正在加载美图秀秀编辑器...</div>
     </div>
     </div>
     </div>
</div>

<div class="modal fade" id="meitu-full" tabindex="-1" role="dialog"  aria-hidden="true">
	<div class="modal-dialog"  style="width:960px;margin-top:20px;">
    <div class="modal-content">
      <div class="modal-header" style="border:0 none">
      	<button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">关闭</span></button>
        <h4 class="modal-title">美图编辑上传</h4>
      </div>
     <div class="modal-body" style="overflow: hidden;padding: 0;margin: 10px;">
     	<div class="alert alert-warning">
     		<button type="button" class="close" data-dismiss="alert" aria-label="Close">
			  <span aria-hidden="true">&times;</span>
			</button>
     		打开大图片美化时，特效处理会很耗时，可能会造成浏览器卡死。请选择压缩图片！</div>
     	<div id="MeituFullContent">正在加载美图秀秀编辑器...</div>
     </div>
     </div>
     </div>
</div>

<div class="modal fade" id="redirect-vip" tabindex="-1" role="dialog"  aria-hidden="true">
	<div class="modal-dialog"  style="width:600px;margin-top:120px;">
    <div class="modal-content">
	      <div class="modal-header" style="border:0 none">
	      	<button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">关闭</span></button>
	        <h4 class="modal-title">跳转到付费VIP专属通道</h4>
	      </div>
	     <div class="modal-body" style="overflow: hidden;padding: 0;margin: 15px;">
	     	<p><strong>你好，亲爱的付费会员</strong></p>
			<p><br/></p>
	     	<p>VIP通道使用专门为付费用户搭建的独立服务器，不受拥挤的免费通道的影响，更快速更高效。（提示：编辑区域中的内容已为您自动保存到云端草稿箱）</p>
	     	<p><br/></p>
	     	<div class="text-center"> <a href="http://vip.135editor.com" onclick="window.onbeforeunload=null;" target="_self" class="btn btn-primary">进入VIP通道</a>&nbsp;&nbsp;&nbsp;<a href="#" data-dismiss="modal" class="btn btn-default">取消</a></div>
	     </div>
     </div>
     </div>
</div>

<div class="modal fade" id="paragraph-setting" tabindex="-1" role="dialog"  aria-hidden="true">
	<div class="modal-dialog"  style="width:600px;margin-top:20px;">
    <div class="modal-content">
      <div class="modal-header" style="border:0 none">
      	<button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">关闭</span></button>
        <h4 class="modal-title">段落设置</h4>
      </div>
     <div class="modal-body" style="overflow: hidden;padding: 0;margin: 10px;">
     	<form class="form-horizontal">
     	<div>
     		<div class="col-xs-6">
     			<div class="form-group">
					<label class="col-sm-5 control-label">行高</label>
					<div class="col-sm-7 controls">
						<input class="form-control" value="1.5em" id="paragraph-lineHeight" type="text">
					</div>
				</div>
				
				<div class="form-group">
					<label class="col-sm-5 control-label">字体</label>
					<div class="col-sm-7 controls">
						<select  class="form-control" id="paragraph-fontFamily">
						<option value="微软雅黑">微软雅黑</option>
							<option value="宋体">宋体</option>
							<option value="楷体">楷体</option>
							<option value="黑体">黑体</option>
							<option value="隶书,SimLi">隶书</option>
							<option value="arial">arial</option>
							<option value="sans-serif">sans-serif</option>
						</select>
					</div>
				</div>
				 <div class="form-group">
					<label class="col-sm-5 control-label">字号</label>
					<div class="col-sm-7 controls">
						<input class="form-control" placeholder="字号" value="14px" id="paragraph-fontSize" type="text">
					</div>
				</div>
     		</div>
     		<div class="col-xs-6">
     			<div class="form-group">
					<label class="col-sm-5 control-label">首行缩进</label>
					<div class="col-sm-7 controls">
						<input class="form-control" id="paragraph-textIndent" value="0em" type="text">
					</div>
				</div>
     			<div class="form-group">
					<label class="col-sm-5 control-label">段前距</label>
					<div class="col-sm-7 controls">
						<input class="form-control" id="paragraph-paddingTop" value="5px" type="text">
					</div>
				</div>
				<div class="form-group">
					<label class="col-sm-5 control-label">段后距</label>
					<div class="col-sm-7 controls">
						<input class="form-control" id="paragraph-paddingBottom" value="5px" type="text">
					</div>
				</div>
     		</div>
     	</div>
     		
			
     	</form>
     </div>
     <div class="modal-footer text-right">
     	<button type="button" onclick="applyParagraph('active');" class="btn btn-primary" data-dismiss="modal">应用到本样式</button>
     	<button type="button" onclick="applyParagraph('all');" class="btn btn-warning" data-dismiss="modal">应用到全文</button>
     	<button type="button" class="btn btn-default" data-dismiss="modal">取消</button>
     </div>
    </div>
    </div>
</div>

</div> <!-- end full-page -->


<div id="feedsModal" class="panel panel-primary" style="position:fixed;z-index:10001;width:300px;margin-bottom: 0px;border:0 none;right:2px;bottom:0px;" >
  <div class="panel-body" style="padding:5px 5px;">
      	<button type="button" class="close float-right" style="position: absolute;right: 10px;opacity: 0.8;" onclick="$('#feedsModal').hide();"><span style="font-size: 12px;">关闭</span></button>
      	<div>
      	<section class="135editor" data-id="84261" style="border: 0px none; padding: 0px;" data-color="rgb(194, 201, 42)" data-custom="rgb(194, 201, 42)"><section class="layout" style="border: 0px; margin: 5px auto; box-sizing: border-box; padding: 0px; width: 97%;" data-width="97%"><section style="height: 25px; box-sizing: border-box; color: inherit;"><section style="height: 100%; width: 50px; float: left; border-top-width: 2px; border-top-style: solid; border-color: rgb(194, 201, 42); border-left-width: 2px; border-left-style: solid; box-sizing: border-box; color: inherit;" data-width="50px"></section><section style="display: inline-block; color: rgb(194, 201, 42); clear: both; box-sizing: border-box; border-color: rgb(194, 201, 42);"></section></section><section class="135brush" data-style="color: rgb(51, 51, 51); font-size: 1em; line-height: 1.75em; word-break: break-all; word-wrap: break-word; text-align: justify;" style="margin: -0.8em 0.3em; padding: 0.8em; box-sizing: border-box;"><p style="font-size: 1em; line-height: 1.75em; word-break: break-all; word-wrap: break-word; text-align: justify;"><span style="color:#ff0000">图片不能上传为缓存问题，如果更新不起作用的，可以访问&nbsp;<a href="http://end1.135editor.com/">http://end1.135editor.com/</a>&nbsp;,<span style="color: #FF0000; text-shadow: #C3D69B 2px 2px 10px;"><strong>清除缓存时请注意选择全部时间。</strong></span></span></p><p style="color: rgb(51, 51, 51); font-size: 1em; line-height: 1.75em; word-break: break-all; word-wrap: break-word; text-align: justify;"><span style="color: #FF0000; font-size: 1em; line-height: 1.75em;"><br/></span></p><p style="color: rgb(51, 51, 51); font-size: 1em; line-height: 1.75em; word-break: break-all; word-wrap: break-word; text-align: justify;"><span style="color: #FF0000; font-size: 1em; line-height: 1.75em;"><span style="text-shadow: #FAC08F 2px 2px 10px;">付费会员欢迎进入</span><a href="http://vip.135editor.com/open_editor.html" target="_blank" style="text-shadow: rgb(250, 192, 143) 2px 2px 10px;"><span style="text-shadow: #FAC08F 2px 2px 10px;">VIP通道</span></a></span></p><p style="color: rgb(51, 51, 51); font-size: 1em; line-height: 1.75em; word-break: break-all; word-wrap: break-word; text-align: justify;"><span style="color: #FF0000; font-size: 1em; line-height: 1.75em;">135数据结构升级已完成，如果发现个人文章、收藏、上传图片数据有异常，请通过QQ群与管理员联系。以往历史版本数据可上&nbsp;</span><a href="http://test.135editor.com/" _src="http://test.135editor.com/" style="font-size: 1em; line-height: 1.75em;">http://test.135editor.com/</a><span style="color: #FF0000; font-size: 1em; line-height: 1.75em;">&nbsp;查看&nbsp;</span><br/></p><p style="color: rgb(51, 51, 51); font-size: 1em; line-height: 1.75em; word-break: break-all; word-wrap: break-word; text-align: justify;"><span style="color: #FF0000; font-size: 1em; line-height: 1.75em;"><br/></span></p><p style="color: rgb(51, 51, 51); font-size: 1em; line-height: 1.75em; word-break: break-all; word-wrap: break-word; text-align: justify;"><span style="font-size: 1em; line-height: 1.75em;">公司业务系统也可以拥有135编辑器，</span><a href="http://www.135plat.com/open_editor.html" target="_blank" style="font-size: 1em;">企业插件版</a><br/></p><p style="color: rgb(51, 51, 51); font-size: 1em; line-height: 1.75em; word-break: break-all; word-wrap: break-word; text-align: justify;"><br/></p><p style="color: rgb(51, 51, 51); font-size: 1em; line-height: 1.75em; word-break: break-all; word-wrap: break-word; text-align: justify;"><span style="color: #FF0000;">推广：</span><span style="text-decoration: underline; color: #FF0000;"><a href="http://www.135editor.com/oauth2/authorize?client_id=RabbitPre&response_type=code&state=rabbipre&redirect_url=http://www.rabbitpre.com/user/thirddologin?type=otf" target="_blank" style="text-decoration: underline; color: rgb(255, 0, 0);">点击进入兔展H5制作入口</a></span></p></section><section style="height: 25px; box-sizing: border-box; color: inherit;"><section style="height: 100%; width: 50px; float: right; border-bottom-width: 2px; border-bottom-style: solid; border-color: rgb(194, 201, 42); border-right-width: 2px; border-right-style: solid; box-sizing: border-box; color: inherit;" data-width="50px"></section></section></section><section style="display: block; width: 0; height: 0; clear: both;" data-width="0px"></section></section> 
      	<p style="text-align:right;font-size:10px;color:#666;">60秒后自动关闭</p>
      	</div>
  </div>
</div> 
<script>setTimeout(function(){$("#feedsModal").fadeOut("slow");},60000);</script>
<script type="text/javascript" src="/js/ueditor/ueditor.config.js"></script>	<script src="http://static.135editor.com/js/ueditor/ueditor.all.min.js?v=63"></script>
<script src="http://static.135editor.com/cache/47e10bdb78-v63.js" type="text/javascript"></script><script>

function keep_session(){
	var url = BASEURL + '/wxes/keep_session';
	ajaxActionHtml(url,null,function(html){ });
}

rs_callbacks.loginSuccess = function(request){
	if(request.success){
		publishController.close_dialog();
		//publishController.remove();
		$('#login_errorinfo').hide();
		if(sso.form){
			$(sso.form).trigger("submit");
			sso.form=null;
		}
		if(sso.callback){
			sso.callback.apply(sso.callback,sso.callback_args);
		}
		
		//$('#tab-wxmsg-trigger').show();
		if(request.userinfo.roles>1) {
			$('#btn-show-drafts').css('display','block');
			autoSave();
			current_editor.setPaidUser(true);
			//if(domain_host != 'vip.135editor.com') {				
			//	autoSavedraft(function(){
			//		publishController.open_html_dialog('redirect-vip');
			//	});				
			//}
 		}
		else{
			keep_session();
			setInterval( keep_session, 1200 * 1000); //session expired 1440s. keep session
		}
		
		reloadStyleOperate();
		
		loadjs('/signatures/jsvar');
		
		ajaxAction('/editor_styles/getFavorColor',null,null,function(request){
			if(request.ret==0) {
				for(var i in request.colors) {
					$('#favor-colors').append('<li class="color-swatch" style="background-color: '+request.colors[i]+'" title="'+request.colors[i]+'"><i title="删除" class="fa fa-remove"></i></li>');
				}
			}
		});
		
		$('#login-menus').removeClass('hidden');
		$('#login-links').remove();
		$('#login-user-name').html(request.userinfo.username);
			
		if(request.userinfo && request.userinfo.session_flash){
			request.success += request.userinfo.session_flash;
		}
//		showSuccessMessage(request.success); //ajaxAction中已调用
	}
	else{
		//$('#login_errorinfo').addClass('alert alert-danger').show().html(request.error);
	};
}

function save_as_tpl(){
	publishController.close_dialog();
	$('#myModal').modal('show');
	$('#save-wx-msg-dialog').modal('hide');//$('.modal-backdrop').remove();
	
	$('#dialog-save-template').unbind('click').click(function(){
		if($('#dialog-template-name').val() == ""){
			$('#dialog-template-name').focus();
		}
		else{
			$('#template_name').val($('#dialog-template-name').val());
			var form = $('#WxMsgViewForm').get(0);
			form.action = '/user_styles/saveTemplate';
			ajaxSubmitForm(form,function(){
				$('#myModal').modal('hide');
			});
		}		
	});
}

function saveWxMsg(form){
	
	var postdata = $(form).serializeArray();
	
	// 将内容追加到提交的数据中
	postdata[postdata.length] = { name:'data[WxMsg][content]',value: getEditorHtml(true) };
	
	ajaxAction(form.action,postdata,form,function(request){
		//alert(1);
		current_edit_msg_id = request.id;
		publishController.close_dialog();
		$('#save-wx-msg-dialog').modal('hide');$('.modal-backdrop').remove();	//期间可能弹出了其它的dialog	
	});
	return false;
	
}
function saveTemplate(form){
	if(getEditorHtml() == ""){
		showErrorMessage("请先输入内容");
		return false;
	}
	
	if(!sso.check_userlogin({"callback":saveTemplate,"callback_args":arguments}))
		return false;
	
	var tid = $('#template_id').val();
	if( tid ) {
		$('#myModal').modal('show');
		$('#dialog-save-template').unbind('click').click(function(){
			if($('#dialog-template-name').val() == ""){
				$('#dialog-template-name').focus();
			}
			else{
				$('#template_name').val($('#dialog-template-name').val());
				form.action = '/user_styles/saveTemplate';
				ajaxSubmitForm(form,function(){
					$('#myModal').modal('hide');
				});
			}		
		});
		return false;
	}
	
	//
	var url;
	if(current_media_id != null && current_media_idx != null) {
		url = '/wx_msgs/save?inajax=1&rethtml=1&mid='+current_media_id +'&idx='+current_media_idx;
	}
	else if(current_edit_msg_id) {
		url = '/wx_msgs/save/'+current_edit_msg_id+'?inajax=1&rethtml=1';
	}
	else{
		url = '/wx_msgs/save?inajax=1&rethtml=1';
	}
	
	publishController.open_dialog(url,{title:'保存图文',id:'save-wx-msg-dialog','width':900,'callback':function(dialog){
		//$('#save-wx-msg').click();
		//alert(dialog.find('.modal-body').text());
		var text = dialog.find('.modal-body').text();
		
		dialog.find('#WxMsgWxId').change(function(){
			var wxid = this.value;
			ajaxAction('/wxes/setManageWx/'+wxid,null,null,function(result){
				showSuccessMessage(result.message);
				$('#wxmsg-mine-list').find('#wxmsg-mine-wxid').val(wxid);
				$('#tab-wxmsg-trigger').trigger('click');
			});
		});
		
		var regTest = new RegExp("您没有权限进行此项操作");
		
		if( regTest.test(text) ){
			
			//showErrorMessage('没有权限保存消息，只能保存三个模板.付费后可无限制保存消息');
			
			dialog.modal('hide');
			
			$('#myModal').modal('show');
			$('#dialog-save-template').unbind('click').click(function(){
				if($('#dialog-template-name').val() == ""){
					$('#dialog-template-name').focus();
				}
				else{
					$('#template_name').val($('#dialog-template-name').val());
					form.action = '/user_styles/saveTemplate';
					ajaxSubmitForm(form,function(){
						$('#myModal').modal('hide');
					});
				}		
			});
		}
	}});
	
	var $dialogid = publishController.dialogid;
	$('#'+$dialogid).on('hidden.bs.modal', function (e) {
			$('#'+$dialogid).remove();
	});

	return false;
}

function reloadStyleOperate(){

	//$('#style-operate-area').append('<div style="position:absolute; background: rgba(255,255,255,0.95);width: 100%;line-height: 65px;text-align: center" title="若自动刷新失败，请按“F5”手动刷新"><img src="http://static.135editor.com/img/ajax/circle_ball.gif"> 正在加载最新数据...</div>');

	//$('<div></div>').load('/beautify_editor #full-page',function(){
	$('#editor-template-scroll').prepend('<div style="margin:10px;color:red;"><img src="http://static.135editor.com/img/ajax/circle_ball.gif"> 正在加载样式...</div>').load('/editor_styles/styles?inajax=1',function(){

		/*var html = $(this).find('#style-operate-area').html(); //#style-operate-area
		$('#style-operate-area').html(html);

		var favor_html = $(this).find('#favor-colors').html();
		$('#favor-colors').html(favor_html);*/
		page_loaded();

		$('.editor-template-list > li').addClass('mix');
		//$('.editor-template-list').mixItUp('destroy');
		$('.editor-template-list').mixItUp({
	    	layout:{display:'block'},
	    	load:{filter: 'all','sort':'time:desc'},
	    	callbacks: {
	    		onMixEnd: function(state){
	    			$('#editor-template-scroll').scrollTop(0);
	    			return false;
	    		}
	    	}
	    });
		setTimeout(function(){
			$("#editor-template-scroll img").lazyload({
				effect: "fadeIn",
				container:'#editor-template-scroll',
				data_attribute:'src',
				threshold : 50,
				failure_limit:50
			});
		},1000);
		
		//$('.popover-trigger').popover({trigger:"hover"});
		
		$('.autonum').on('mousewheel', function(event) {
			var num = parseInt($(this).html());
			if(event.deltaY < 0) { //向下滚动
				if(num <= 1) return ;
				$(this).html( num - 1);
			}
			else{
				$(this).html( num + 1);
			}
		    return false;
		}).tooltip({'title':'上下滚动鼠标，可调整序号大小',container: 'body'});
		
		//$('#left-side-affix').width($('#left-sidebar').width());
		$('#style-categories .dropdown').hover( function(e){
	        $(this).addClass('open');
	    },function(){
	    	$(this).removeClass('open');
	    });    
		
		//$('#left-side-affix').width($('#left-sidebar').width());
		$('[data-toggle="popover"]','#insert-style-list').popover();
		
		$('#btn-help').popover();
		$('#editor-type-pop').popover({
		  trigger: 'hover'
		});
	});	
	
	
}
//document.oncontextmenu=function(e){return false;} 
//window.localStorage.loadFeeds = 'true';


function showFullColorChange(){
	$('#all-style-color-panel').show();
}

var current_draft_id = null;
var auto_save_draft_interval = null ;

function loadUserDrafts(){
	//loadLocalStorage();return;
	$.ajax({
		async:true, 
		type:'get',
		url: '/drafts/lists?model=WxMsg',
		success: function (data){
			if( data == "" ) {
				data = "暂无草稿内容";
			}
			publishController.open_html_dialog('user-draft-chooser','云端草稿箱');
			$('#user-draft-chooser').find('.modal-body').html(data);
			
			var offset = $('#style-operate-area').offset();
			$('#user-draft-chooser').find('.modal-dialog').css('margin-left',offset.left);
			
			$('#user-draft-chooser .draft-popover').popover({
				trigger:'hover',//click
				html:true
			});
		},
		dataType:"html"
	});	
}

function autoSave(){
	clearInterval(auto_save_draft_interval);
	auto_save_draft_interval = setInterval(function(){
		autoSavedraft();
	},300000); //每5分钟保存草稿
}

function use_draft(id) {
	var url = BASEURL + '/drafts/view/'+ id+'.json';
	ajaxAction(url,null,null,function(request){
		if(request.data.Draft.content ){
			setEditorHtml(request.data.Draft.content);
			publishController.close_dialog();
		}
	});
}

function autoSavedraft(callback){
	var html = getEditorHtml(true);
	var strip = $.trim(strip_tags(html,'<img>'));
	if (strip != "" ) {//包含文字或图片时才保存
		ajaxAction('/drafts/save.json',{'model':'WxMsg','id':current_draft_id,'data_id':current_edit_msg_id,'content':html},null,function(request){
			current_draft_id = request.id;
			if(typeof callback == 'function') {
				callback();
			}
		});
	}
}

function loadLocalStorage(){
	if( window.localStorage){ // 本地临时存储编辑器内容，仅在刷新时保持内容至本地
		if(typeof window.localStorage._135content != "undefined"){
			//alert(window.localStorage._135content);
			//setEditorHtml(window.localStorage._135content);
			//var html = current_editor.parseInsertPasteSetHtml(window.localStorage._135content);	
			var html = window.localStorage._135content;
			current_editor.setContent(html);
			setTimeout(function(){
				current_editor.fireEvent("catchRemoteImage");
			},5000);			
			
			var editor_document = current_editor.selection.document;
			$(editor_document).find('.135editor').each(function(){
				//$(this).removeAttr('style');
				$(this).css({'border':'0 none','padding':0});
			});
		}
		if(typeof window.localStorage._edit_msg_id != "undefined"){
			current_edit_msg_id = window.localStorage._edit_msg_id;
		}
	}
}


function loadWechatArticle(media_id, idx) {
	
	current_media_id = media_id;
	current_media_idx = idx;
	
	var url = BASEURL + '/wx_msgs/wechat_content/'+media_id+'/'+ idx;
	ajaxAction(url,null,null,function(request){
		if(request.content ){
			setEditorHtml(request.content);
		}
	});
}

function showMoreColorSwatch(){
		
		var height = $(window).height()-80-10;
		$('#moreColorSwatch').height(height);
		$('#moreColorSwatchList').height(height-70);
		
		$('#moreColorSwatch').fadeIn('slow');
		if($('#moreColorSwatchList').html() == "") {
			$('#moreColorSwatchList').html('<div style="margin:10px;"><img src="http://static.135editor.com/img/ajax/circle_ball.gif"> 正在加载配色方案...</div>').load('/colors/lists?inajax=1 #colors_list',function(data){
				inner_open('#moreColorSwatchList','#colors_list');
				// <br/>付费用户在5秒后将自动进入收藏配色方案列表
				/*if($('#favor-color-trigger').size() > 0) {
					setTimeout(function(){
						$('#favor-color-trigger').trigger('click');
					},3000);
				}*/				
			});	
		}
}

current_editor = UE.getEditor('WxMsgContent');

current_editor.ready(function(){
	
			//$('.edui-remotebutton').attr('style','display:none !important');
			loadLocalStorage();
		
	current_editor.addListener("clearDoc",function () {
		current_edit_msg_id = null;
		current_draft_id = null;
		current_media_idx = null;
		current_media_id = null;
		$('#template_id').val(''); $('#template_name').val(''); $('#dialog-template-name').val('');
    });
	
	setTimeout(function(){
			//current_editor.execCommand('drafts');
		current_editor.execCommand( 'focus' );
		
		var editor_document = current_editor.selection.document;
		
		$('.edui-editor-toolbarbox .js_tooltip').tooltip({
			'container':'body',
			title:function(){return $(this).data('tooltip');}	
		});
		$('.edui-editor-toolbarbox .edui-button-body').tooltip({'container':'body'});
		
		setInterval(function(){
            window.localStorage._135content = current_editor.getContent();
    	},60000);
		
		var onMessage = function(e){
			if(e.data.substring(0,12) == 'loginSuccess') {
				//check_login();
				ajaxAction('/users/login',null,null,'loginSuccess');
				publishController.close_dialog();
				publishController.open_msg_dialog('login-msg','登录','登录成功，正在为您加载用户信息以及收藏样式、颜色...');
			}
			else{
				current_editor.setContent(e.data);
			}
		}
	
		if (window.addEventListener) {  // all browsers except IE before version 9
		    window.addEventListener("message", onMessage, false);
		} else {
		    if (window.attachEvent) {   // IE before version 9
		        window.attachEvent("onmessage", onMessage);
		    }
		}
			
				
		function quickSave(e){
			// ctrl + s
			if( (e.ctrlKey || e.metaKey ) && e.keyCode == 83 ){
				console.log('save draft and open save dialog.');
				autoSavedraft();
				$('#save-as-template').trigger('click');
				return false; // 截取返回false就不会保存网页了
			}
		}
		// ctrl + s监听事件
		$(document).keydown(function(e){ return quickSave(e); });
		$(editor_document).keydown(function(e){ return quickSave(e); });
		
		jQuery(editor_document).on('mousewheel','.autonum', function(event) {
	       	var num = parseInt($(this).html());
			if(event.deltaY < 0) { //向下滚动
				if(num <= 1) return ;
				$(this).html( num - 1);
			}
			else{
				$(this).html( num + 1);
			}
		    return false;
		});
		
		$(window).trigger('resize');		
			
	},100);
    
});

$(function(){
	reloadStyleOperate();
	
	$(document).on('click','#wechat-article-list .wechat-edit',function(){
		loadWechatArticle($(this).data('mid'), $(this).data('idx'));
		return false;
	});
	
	$(document).on('keyup blur focus','#txtStyleSearch',function(){
		var last = $(this).data('last');
		var word = $.trim(this.value);
		if( word == "" ||  word == " " ) {
			$('#styleSearchResult').fadeOut('slow');// 关闭搜索的显示
			return false;
		}
		var search_height = $(window).height()-80-10;
		$('#styleSearchResult').height(search_height);
		$('#styleSearchResultList').height(search_height-70);
		
		if(last == word) {
			$('#styleSearchResult').fadeIn('slow');
			return false; // 未变化
		}
		else {
			$(this).data('last',word);
			$('#styleSearchResult').fadeIn('slow');
			$('#styleSearchResultList').load('/editor_styles/search?inajax=1&name='+word +' #style_search_list',function(data){
				;
			});	
		}
	});
	
	//var html = $('#insert-style-list').html();
	//$('#insert-style-list').html(parseHtml(html,"rgb(255, 129, 36)","#FFF"));
	$('#left-operate-menu li a').click(function(){
		$('#styleSearchResult').fadeOut('slow');
		$('#moreColorSwatch').fadeOut('slow');
	});
	
	$(document).on('click','#style-categories .filter,#style-sorts .sort',function(){
		$('#editor-template-scroll').scrollTop(0); //切换分类时，回到顶部
		var filter = $(this).attr('data-filter');
		$('.sub-filter-tags').find('li').hide();
		$('.sub-filter-tags').find(filter).show();
	});
	
	$(window).resize(function(){
		var win_height = $(window).height();
		$('#full-page').height(win_height);
		
		
		/*if( win_height < 800 && $(window).width() > 1300 ){
			//area_height = 800;
			$('#full-page').addClass('small-height');
			area_height += 50;
		}
		else{
			$('#full-page').removeClass('small-height');
		}*/
		
		if( $(window).width() < 1000 &&  win_height < 650 ) {
			if($('#color-choosen').hasClass('active')) {
				$('#right-fix-tab > li > a:first').trigger('click');
			}
		}
		else{
			if(!$('#color-choosen').hasClass('active')) {
				$('#color-choosen').parent('.tab-content').show();
				$('#right-fix-tab > li > a:first').trigger('click');
			}
		}
		
		
				
		$('.w1').height(win_height-40);
		
		$('#insert-style-list').height(win_height-80);	
		$('#editor-template-scroll').height(win_height-80-90); //subtract toolbar height
		
		var area_height = win_height-80;
		$('.editor2').height(area_height);
		
		//$('.w3').width($('#full-page').width() - $('#style-operate-area').width() );
		
		
		if($('#WxMsgContent').find('.show-edui-more').size() > 0 ) {
			$('.edui-editor-iframeholder').height(area_height-60-58);
		}
		else{
			$('.edui-editor-iframeholder').height(area_height-60-28);
		}
		
		if( $(window).width() < $('body').width() ) {
			$('body').scrollLeft( $('body').width() - $(window).width() );
		}
		
		$('#html-more-popover').trigger('click');
		//$('#WxMsgContent').css('width',$('.editorBox').width());
		
	}); // .trigger('resize');
	
	//setTimeout(function(){
		//$(window).trigger('resize');
	//},500);

	$('#html-more-popover').on('shown.bs.popover', function () {
		var $this = $(this);
		var client = new ZeroClipboard( $('#copy-outer-html') );
		client.on( 'ready', function(event) {
			client.on( 'copy', function(event) {
				var html = getEditorHtml(true);
		  		event.clipboardData.setData('text/html',html );
		  		event.clipboardData.setData('text/plain', html );
		  		showSuccessMessage("已成功复制到剪切板");
			});
		});
	});
	
	$('[data-toggle="popover"]','#insert-style-list').popover();	
	$('.popover-trigger').popover({trigger:"hover"});
	$('#btn-help').popover();
	$('#editor-type-pop').popover({
	  trigger: 'hover'
	});
	
	
});
</script>

<script src="http://static.135editor.com/cache/82e97d8f1b-v63.js" type="text/javascript"></script>	
<script>
ZeroClipboard.config( { swfPath: "/js/ZeroClipboard/ZeroClipboard.swf" } );
$(function(){
	

	// var $colors = jsColorPicker('.colorPicker',{
	$('.colorPicker').colorPicker({
	    customBG: '#FFF',
	    size:2,
	    mode:'hsv-h', //rgb-r
	    init: function(elm, colors) { // colors is a different instance (not connected to colorPicker)
	      elm.style.backgroundColor = elm.value;
	      elm.style.color = colors.rgbaMixCustom.luminance > 0.22 ? '#222' : '#ddd';
	    }
	    /*,displayCallback:function(colors, mode, options){
	    	setBackgroundColor($(this).val(),'#FFF', 'all');
	    }*/
	});
	$('.colorPicker').blur(function(){
		setBackgroundColor(this.value,'#FFF',true);
		this.style.backgroundColor = this.value;
		this.style.color = '#FFF';
	});
	$('.colorPicker').keyup(function(){
		if(this.value.search('#') == 0){
			if(this.value.length ==7 ) { //|| this.value.length ==4
				$(this).trigger('focus.colorPicker');
			}
		}
		else{
			//alert(this.value.search('rgb'));alert(this.value.indexOf(")"));
			if( this.value.search('rgb') == 0 && this.value.indexOf(")") >0 ) {
				$(this).trigger('focus.colorPicker');
			}
		}
	});
	
	
	$(document).on('click','#flat-strip-shadow',function(){
		var html = getDealingHtml();
		var obj = $('<div>'+html+'</div>');
		obj.find('*').css('box-shadow','');
		var newHtml = obj.html();
		setDealingHtml(newHtml);
		obj = null;
	});
	
	$(document).on('click','#flat-add-shadow',function(){
		var html = getDealingHtml();
		var obj = $('<div>'+html+'</div>');
		
		obj.find('*').each(function(){			
				if( $(this).css('background-color') == 'transparent' ||  $(this).css('background-color') == '' ){
				}
				else{
					$(this).css('box-shadow','rgba(205, 205, 205,0.9) 2px 3px 2px');
				}
		});
		obj.find('hr').each(function(){
			$(this).css('box-shadow','rgba(205, 205, 205,0.9) 1px 1px 2px');
		})
		var newHtml = obj.html();
		setDealingHtml(newHtml);
		obj = null;
	});	
	
	
	$(document).on('click','#set-image-radius',function(){
		var html = getDealingHtml();	
		var obj = $('<div>'+html+'</div>');
		obj.find('img').css('border-radius','50%'); //图片
		obj.find('.135bg').css('border-radius','50%'); //背景图片
		setDealingHtml(obj.html())
		obj = null;
	});
	$(document).on('click','#set-image-border',function(){
		var html = getDealingHtml();	
		var obj = $('<div>'+html+'</div>');
		obj.find('img').css({"background-color":"#fff","border-radius":"4px","max-width":"100%","padding":"4px","border":"1px solid #ddd"});
		setDealingHtml(obj.html())
		obj = null;
	})
	
	$(document).on('click','#flat-add-radius',function(){
		var html = getDealingHtml();	
		var obj = $('<div>'+html+'</div>');
		obj.find('*').each(function(){
			if( $(this).css('background-color') != 'transparent' &&  $(this).css('background-color') != '' ){
				$(this).css('border-radius','4px');
			}
			else{
				$(this).css('border-radius','4px');
			}
			
		});
		setDealingHtml(obj.html())
		obj = null;
	});
	
	$(document).on('click','#flat-strip-radius',function(){
		var html = getDealingHtml();	
		var obj = $('<div>'+html+'</div>');
		obj.find('*').css('border-radius','');
		setDealingHtml(obj.html())
		obj = null;
	});
	
	$(document).on('click','#flat-add-border',function(){
		var html = getDealingHtml();	
		var obj = $('<div>'+html+'</div>');
		obj.find('*').each(function(){
			if( $(this).css('background-color') != 'transparent' &&  $(this).css('background-color') != '' ){
				$(this).css('border','1px solid #efefef');
			}			
		});
		//obj.find('.135editor').css('border','1px solid #efefef');
		setDealingHtml(obj.html())
		obj = null;
	});
	$(document).on('click','#flat-strip-border',function(){
		var html = getDealingHtml();	
		var obj = $('<div>'+html+'</div>');
		
		obj.find('*').each(function(){
			//if( $(this).css('background-color') == 'transparent' ||  $(this).css('background-color') == ''  ){
			//}
			//else{
				$(this).css('border','');
				$(this).css('border-width','0');
			//}
		});
		
		setDealingHtml(obj.html())
		obj = null;
	});
	
	
	$(document).on('mouseout','#image-list .appmsg',function(){ //离开关闭预览图
		$('#image-preview').hide();
		return;
	});
	
	$(document).on('click','#checkAllUpfile',function(){ // 图片素材-我的上传全选
		if(this.checked){
			$('input[name="deleteuploadfiles[]"]:checkbox').prop('checked',true);
		}
		else{
			$('input[name="deleteuploadfiles[]"]:checkbox').prop('checked',false);
		}
	});
	$(document).on('click','#delCheckedUpfile',function(){
		var ids = [];
		$('input[name="deleteuploadfiles[]"]:checked').each(function(){
			ids[ids.length] = this.value;	
		});
		if(ids.length == 0) {
			alert('没有选中任何文件');	
		}
		else{
			ajaxAction('/uploadfiles/deletes',{'ids':ids},null,function(request){
				if(request.success){
					for(var i in ids) {
						$('#uploadfile-'+ids[i]).remove();
					}
				}
				var page = 1;
				if( $('#my-file-list .ui-page-active:first').size() > 0 ){
					page = $('#my-file-list .ui-page-active:first').html();
				}
				var tab_target = $('#editor-image-navtab  a:first');
				var old_url = tab_target.data('url');
				//data-refresh="always", 并增加页码，刷新到当前页面。
				tab_target.data('refresh','always').data('url','/uploadfiles/mine?inajax=1&page='+page+' #my-file-list').trigger('click').tab('show').data('refresh','none').data('url',old_url);
			});
		}
	});
	
	/* 预览图片素材 */
	$(document).on('mouseover','#image-list .appmsg  .cover',function(){ //悬浮预览图
		var src = strip_imgthumb_opr($(this).find('img:first').attr('src'));
		$('#image-preview').show().html('<p>图片预览</p><img src="'+src+'"/><p style="font-size:12px;color:#666;">'+src+'</p>');
		return;
	});
	/* 插入图片素材 */
	$(document).on('click','#image-list .appmsg .cover',function(event){
		var $image = $(this).find('img:first');
		var src = strip_imgthumb_opr($image.attr('src'));
		
		var range = current_editor.selection.getRange();
    	if (!range.collapsed) {
	        var img = range.getClosedNode();
	        if (img && img.tagName == 'IMG') { //选区为图片则切换图片地址
	        	img.src = src;
	        	img.setAttribute('_src',src);
	        	return;
			}
    	}
		insertHtml("<img src=\""+src+"\">"); 
		if( $image.data('id') ) {
			style_click($image.data('id'));
		}
		return;
	});
	$(document).on('click','#image-list .appmsg .deleteMsg',function(e){		
		if(confirm('确认要删除吗？删除后,若文章中使用了此图片，将无法显示')) { 
    		var id= $(this).data('id');
    		ajaxAction('/uploadfiles/delete/'+id,null,null,function(){
    			$('#uploadfile-'+id).remove();
    		});  
    	}
    	e.stopPropagation();
    	return false;
	});

	$(document).on('click','#insert-style-list .ui-portlet-list > li,#styleSearchResultList #style_search_list > ul > li',function(){
		//data-135editor=\"true\"
		//多插入一个空行，防止有时无法选择到底部了，或者两个元素中间不方便插入内容。
		
		if($(this).hasClass('ignore')){
			return false;
		}
		
		var ret = false;
		var num = parseInt($(this).find('.autonum:first').text());
		var id = $(this).data('id');
		
		
		$(this).contents().filter(function() {
			return this.nodeType === 3 && $.trim($(this).text()) == "";
		}).remove();
		$(this).find('p').each(function(){
			if($.trim($(this).html())=="&nbsp;") {
				$(this).html('<br/>');
			}
		});
		$(this).find('*').each(function(){
			if($(this).attr('data-width')) {
				return;
			}
		
			if( this.style.width && this.style.width != ""  && this.style.width.search('%')>0 ) {
				$(this).attr('data-width',this.style.width);
			}
		});
		
		var style_item = $(this).find('> .135editor:first'); //第一级的
		var rules = null;
		if( $(this).data('rules') ) {
			rules = eval('('+$(this).data('rules')+');');
		}
		
		if(style_item.size()){
			// insertHtml( $(this).html() + "<p>&nbsp;</p>"); 包含收藏夹的删除按钮等 
			/*if(strtolower(style_item.prop('tagName')) == 'img'){
				var html = style_item.prop('outerHTML');
				ret = insertHtml(html); 
			}
			else */
			if(style_item.find('> *').size() == 1 && style_item.find('> *').eq(0).hasClass('135editor') ) {
				// 只包含一个一级子元素，且为135样式。说明代码本身包含了135editor的class标记，只需要插入内部内容即可，无需再增加外围代码。
				ret = insertHtml( style_item.html(),rules );
			}
			else{
				var html = style_item.prop('outerHTML');
				ret = insertHtml( html,rules ); 
			}
		}
		else{ //最外围包装135editor容器
			ret = insertHtml("<section data-id=\""+id+"\" class=\"135editor\">" + $(this).html() + "<section style=\"display: block; width: 0; height: 0; clear: both;\"></section></section>",rules); 
		}
		
		if(ret){			
			if(typeof num != "undefined") {
				$(this).find('.autonum:first').text(num+1);
			}
			style_click($(this).data('id'));
		}
		
	});
	

	$(document).on('click','#tab-tpl-trigger',function(){ // 系统及收藏模板加载
		
		$('#editor-tpls-navtab a:first').trigger('click').tab('show');
		
	});
	$(document).on('click',function(event){
		var object = event.srcElement ? event.srcElement : event.target;		
		if(! object || object.id != 'html-more-popover' ) { //非更多操作时，隐藏更多操作的浮层
			$('#html-more-popover').popover('hide');
		}
		
		if(object && ($(object).parents('#color-plan').size() > 0 || $(object).parents('.cp-app').size() > 0 ) ) { //为调色板或者取色器时，不隐藏
			// 跳过
		}
		else{
			hideColorPlan();
		}
	});
	
	$(document).on('click','#tab-wxmsg-trigger',function(){ // 我的文章加载
		//if($('#editor-msg-list').html()=="")
		{
			var wxid = $('#wxmsg-mine-wxid').val();
			if($('#editor-msg-list').find('.preloading').size() == 0) {
				$('#editor-msg-list').prepend('<div class="preloading"><img src="http://static.135editor.com/img/ajax/circle_ball.gif"> 正在加载</div>');
			}
			else{
				$('#editor-msg-list').find('.preloading').show();
			}
			$('#editor-my-msgs > .nav-tabs').find('a:first').tab('show');
			
			$('#wechat-article-list').html('');
			/*ajaxActionHtml('/wx_msgs/mine',null,function(html){
				//$('#editor-msg-list').html(html);
				
				$('<div>'+html+'</div>').find('.col-md-4').each(function(){
					$('.article-msg').appendTo('#editor-msg-list');
				});
				
				$('#editor-msg-list').html( $('<div>'+html+'</div>').find('#wxmsg-mine-list').html() );
				page_loaded();
			});*/
			var url = '';
			var name = '';
			
			if( $('#SearchWxMsgName').size() > 0 ) {
				name = $('#SearchWxMsgName').val();
			}
			
			if( wxid != 'all' ){
				 url = '/wx_msgs/mine?manage_wxid='+wxid+'&name='+name+' #wxmsg-mine-list';
			}
			else{
				 url = '/wx_msgs/mine?msg=all&name='+name+' #wxmsg-mine-list';
			}
			
			$('#editor-msg-list').html('<div class="preloading"><img src="http://static.135editor.com/img/ajax/circle_ball.gif"> 正在加载</div>').load(url,function(){
				page_loaded();
			});
		}
	});
	
	$(document).on('change','#wxmsg-mine-wxid',function(){
		$('#tab-wxmsg-trigger').trigger('click');
	});
	
	$(document).on('click','#editor-msg-list .pagelink a',function(){
		var url = $(this).attr('href');
		$('#editor-msg-list').html('<div class="preloading"><img src="http://static.135editor.com/img/ajax/circle_ball.gif"> 正在加载</div>').load(url+' #wxmsg-mine-list',function(){
			page_loaded();		
		})
		return false;
	});

	/* 打开模板刷 */
	$(document).on('click','#tpl-tab-content .open-tpl-brush',function(){
		var tid = $(this).data('id');
		var obj = $('#template-'+tid);
		$('#tpl-brush-board-content').html($('#template-'+tid).html());
		var offset = $('#style-operate-area').offset();
		$('#tpl-brush-board').css('display','block').css('left',offset.left).css('top',offset.top);
		$('#tpl-brush-board').width($('#style-operate-area').width());
		$('#tpl-brush-board-content').height($('#style-operate-area').height()-70);

		/*** 绑定模板秒刷的事件 ***/
		$('#tpl-brush-board-content').find('.135editor').addClass('clearfix').css({
		    'border':'1px solid #ddd','padding':'10px','margin':'5px 0'
		  }).prepend('<div class="tpl-brush-helper"><a href="javascript:void(0);" data-toggle="popover" data-content="提示:未选择秒刷内容时自动插入" data-trigger="hover" data-container="#tpl-brush-board-content" class="btn btn-brush btn-xs btn-warning">秒刷此样式</a></div>');
		
		$('[data-toggle="tooltip"]','#tpl-brush-board-content').tooltip();
		$('[data-toggle="popover"]','#tpl-brush-board-content').popover();

		$('#tpl-brush-board-content').find('.btn-brush').click(function(){
		    var style_item = $(this).parents('.135editor:first').clone();
		    style_item.find('.tpl-brush-helper').remove();
		    style_item.find('.135editor').each(function(){
		    	$(this).after("<p><br/></p>");
		    	$(this).remove(); //在内嵌样式的对应位置添加空行，删除嵌套样式
		    });
		    
		    insertHtml("<section data-id=\""+style_item.data('id')+"\" class=\"135editor\">" + style_item.html() + "<section style=\"display: block; width: 0; height: 0; clear: both;\"></section></section>"); 
		  });

		/*** 绑定模板悬浮效果 ***/
		$('#tpl-brush-board-content').find('.135editor').hover(function(){
		  $(this).css({
		    'border':'1px dotted red'//,'background-color':'#fafafa'
		  });
		  $(this).find('.135editor').css('opacity',0.9);
		},function(){
			$(this).find('.135editor').css('opacity',1);
		  $(this).css({
		    'border':'1px solid #ddd'//,'background-color':'inherit'
		  })
		  //$(this).find('.tpl-brush-helper').remove();
		})

	});
	
	

	/*插入模板 */
	$(document).on('click','#tpl-tab-content .insert-tpl-content,#tpl-tab-content .editor-style-content',function(){ //选中模板后设置编辑器的内容	
		var tid = $(this).data('id');
		var obj = $('#template-'+tid);
		
		obj.contents().filter(function() {
			return this.nodeType === 3 && $.trim($(this).text()) == "";
		}).remove();
		obj.find('p').each(function(){
			if($.trim($(this).html())=="&nbsp;") {
				$(this).html('<br/>');
			}
		});
		insertHtml("<section data-id=\""+tid+"\" class=\"135editor\">" + obj.html() + "</section>");
		//setEditorHtml(obj.html());		
	});
	
	/*编辑用户样式 */
	$(document).on('click','#tpl-tab-content .user-style-toolbar .fa-edit',function(){ //选中模板后设置编辑器的内容	
		var tid = 'us'+$(this).data('id');
		var obj = $('#template-'+tid);
		
		obj.contents().filter(function() {
			return this.nodeType === 3 && $.trim($(this).text()) == "";
		}).remove();
		obj.find('p').each(function(){
			if($.trim($(this).html())=="&nbsp;") {
				$(this).html('<br/>');
			}
		});
		
		setEditorHtml(obj.html());
		
		var id = obj.data('id');
		
		$('#template_id').val(id.replace('us',''));
		$('#auto_cover_tpl').removeClass('hidden');
		$('#template_name').val(obj.data('name'));
		$('#dialog-template-name').val(obj.data('name'));
	});
	
	/*编辑用户样式 */
	$(document).on('click','#tpl-tab-content .user-style-toolbar .fa-trash',function(){ //删除用户自定义的样式
		var tid = $(this).data('id');
		var $this = $(this);
		var url = '/user_styles/delete/'+tid;
		if(confirm('是否确认删除此自定义样式')) {
			ajaxAction(url,null,null,function(request){
				$this.parents('.col-xs-12:first').remove();
			});
		};
	});
	
	
	$(document).on('click','.delete-msg',function(){
		var $this = $(this);
		var url = $(this).data('url');
		if(confirm('是否确认删除这条图文消息')) {
			ajaxAction(url,null,null,function(request){
				$this.parents('.article-msg:first').remove();
			});
		}
	});
	
	$('#btn-choose-auto-qa').click(function(){
		publishController.open_dialog('/wx_auto_qas/lists',{
			title:'插入每日一题',selector:'#WxAutoQa-list',width:900,
			callback:function($dialog){
				
				$dialog.find('.modal-body').prepend('<div class="clearfix"><a class="btn btn-primary btn-sm pull-right" href="javascript:void(0);" onclick="$(\'#btn-choose-auto-qa\').trigger(\'click\')"><i class="fa fa-refresh"></i> 换一批</a></div>');
				
				$dialog.find('.choose-auto-qa').click(function(){
					var id = $(this).data('id');
					var html = '<section class="135editor" style="border: 0px none; padding: 0px;">'
						   + '<section style="margin: 1.5em 1em 1em; padding: 0px; border: 0px rgb(239, 112, 96); border-image-source: none; max-width: 100%; box-sizing: border-box; color: rgb(62, 62, 62); line-height: 25px;word-wrap: break-word !important;">'
						      +  '<section style="max-width: 100%; box-sizing: border-box; line-height: 1.4; margin-left: -0.5em; word-wrap: break-word !important; color: inherit;">'
						         +   '<section style="max-width: 100%; box-sizing: border-box; border-color: rgb(241, 201, 196); padding: 3px 8px; border-radius: 4px; color: rgb(255, 255, 255); font-size: 1em; display: inline-block; transform: rotate(-10deg); transform-origin: 0% 100% 0px; word-wrap: break-word !important; background-color: rgb(239, 112, 96);">'
						             +   '<span class="135brush" data-brushtype="text" style="color: inherit; border-color: rgb(239, 112, 96);">每日一题</span>'
						          +  '</section>'
						       + '</section>'
						      +  '<section class="135brush autoqa" data-style="line-height:24px;color:rgb(89, 89, 89); font-size:14px" style="max-width: 100%; box-sizing: border-box; padding: 22px 16px 16px; border: 1px solid rgb(239, 112, 96); color: rgb(0, 0, 0); font-size: 14px; margin-top: -24px;">'
						        +   $('#qa-content-'+id).html();
						      +  '</section>'
						   + '</section>'
						+ '<section style="display: block; width: 0; height: 0; clear: both;"></section></section>';
					insertHtml(html);
					publishController.close_dialog();
				});
				
				
			}
		});
	});
	
	$(document).on('click','#syncToWechat',function(){
		$("ol.sync-article-list").sortable("destroy");
		
		function syncLoaded($dialog){				
			var adjustment;
			var group_name = "sync-article-group-" + parseInt(Math.random()*1000)
			$("ol.sync-article-list",$dialog).sortable({
			  group: group_name,
			  pullPlaceholder: false,
			  // animation on drop
			  onDrop: function  (item, targetContainer, _super) {
			    var clonedItem = $('<li/>').css({height: 0})
			    item.before(clonedItem)
			    clonedItem.animate({'height': item.height()})
			    
			    item.animate(clonedItem.position(), function  () {
			      clonedItem.detach()
			      _super(item)
			    })
			  },

			  // set item relative to cursor position
			  onDragStart: function ($item, container, _super) {
			    var offset = $item.offset(),
			    pointer = container.rootGroup.pointer

			    adjustment = {
			      left: pointer.left - offset.left,
			      top: pointer.top - offset.top
			    }

			    _super($item, container)
			  },
			  onDrag: function ($item, position) {
			    $item.css({
			      left: position.left - adjustment.left,
			      top: position.top - adjustment.top
			    })
			  }
			});
			$('#btn-sync-wechat',$dialog).click(function(){
				if($('#sync-selected > li',$dialog).size() < 1){
					alert("请先选择消息");return false;
				}
			
				var id = '';
				$('#sync-selected > li',$dialog).each(function(){
					id += $(this).data('id')+',';
				});
				ajaxAction('/wx_msgs/sync',{ids:id},null,function(request){
					if(request.success){
						var html = '<p class="alert alert-success">保存成功，扫描查看微信预览效果</p>';
						html += '<img src="/wx_msgs/preview_qrcode?media_id='+request.media_id+'&appid='+request.appid+'" width="200">';
						html += '<p><a href="http://www.135plat.com/wx_msgs/wechat_preview?redirect=1&media_id='+request.media_id+'&appid='+request.appid+'" target="_blank">直接浏览器访问预览</a></p>';
						setTimeout(function(){
							$dialog.modal('show');
							$dialog.find('.modal-body').addClass('text-center').html(html); 
						},500);
					}
				});
			});
			
			$('#sync-wxid-select',$dialog).change(function(){
				var wxid = this.value;
				publishController.open_dialog('/wx_msgs/syncToWechat?manage_wxid='+wxid,{
					id:'wx_msgs_syncToWechat-chosen—form',
					title:'图文同步保存到微信',selector:'#sync-wxmsg-list',width:900,
					callback:syncLoaded
				});
				$('#wxmsg-mine-list').find('#wxmsg-mine-wxid').val(wxid);
				$('#tab-wxmsg-trigger').trigger('click');
			});
		}
			
		publishController.open_dialog('/wx_msgs/syncToWechat',{
			id:'wx_msgs_syncToWechat-chosen—form',
			title:'图文同步保存到微信',selector:'#sync-wxmsg-list',width:900,
			callback:syncLoaded
		});
	});
	$(document).on('click','.modal-backdrop',function(){
		$(this).remove();
	});
	
	
	$(document).on('click','.article-msg a',function(e){
		e.stopPropagation();
		// e.preventDefault(); // 阻止冒泡但不屏蔽默认事件
	});
	
	$(document).on('click','#wxmsg-mine-list .article-msg,#wxmsg-mine-list .article-msg .opr-edit',function(){
		var id =  $(this).data('id');
		var creator =  $(this).data('creator');
		current_edit_msg_id = id;
		var url = BASEURL + '/wx_msgs/spview/'+creator+'/'+id+'.json?nolazy=1';
		ajaxAction(url,null,null,function(request){
			if(request.data ){
				if(request.data.WxMsg.content) {
					setEditorHtml(request.data.WxMsg.content);
				}
				else{
					setEditorHtml("");
				}
			}
		});

	});
	
	$('#right-fix-tab > li > a').click(function(){
		
		var t = $(this).data('toggle');
		if($(t).hasClass('active')) {
			$(t).parent('.tab-content').hide();
			$(t).removeClass('active');
		}
		else{
			$('#color-choosen').removeClass('active');$('#features').removeClass('active');
			
			$(t).parent('.tab-content').show();
			$(t).addClass('active');
		}		
	});
	
	/*$(document).on('click','.all-color-swatch',function(){
		$('.all-color-swatch').removeClass('active');
		$(this).addClass('active');
		var color = $(this).data('color'); //data-color为前景色，bgcolor为背景色，或者无背景文字的前景色
		var bgcolor = $(this).css('backgroundColor');
		
		$('#all-color-rgb-text').val(bgcolor).css('backgroundColor',bgcolor);
		if(!color)  color = '#FFF';
		
		parseObject($('.editor-template-list'),bgcolor,color);
		
	});*/

	$(document).on('click','.color-swatch',function(){
		$('.color-swatch').removeClass('active');
		$(this).addClass('active');
		var color = $(this).data('color'); //data-color为前景色，bgcolor为背景色，或者无背景文字的前景色
		var bgcolor = $(this).css('backgroundColor');		
		$('#custom-color-text').val(bgcolor).css('backgroundColor',bgcolor);		
		if(!color)  color = '#FFF';		
		setBackgroundColor(bgcolor,color, true);
		
		color_click(bgcolor);
		
		if( replace_full_color == false && ! current_editor.currentActive135Item()  ) {
			//showErrorMessage("请在内容中选择要换色的样式，<br/>或者勾选全文换色后操作");
			parseObject($('.editor-template-list'),bgcolor,color);
			// $('#editor-template-list > li').each(function(){
			// 	var obj = $(this);
			// 	parseObject(obj,bgcolor,color);
			// 	//$(this).attr('data-color',bgcolor);
			// });
		}
	});
	/*var default_color = $('.default-color').css('backgroundColor');
	$('#editor-template-list li > .135editor').each(function(){
		parseObject($(this),default_color,'#FFF');
		$(this).attr('data-color',default_color);
	});*/
	
	$(document).on('click','#135-random-color',function(){
		var html = getDealingHtml();	
		var obj = $('<div>'+html+'</div>');
		var bgcolors = ['#5BB75B','#2E8BCC','#F09609','#E51400','#7B4F9D','#E671B8','#008641','#20608E','#FFC40D'];
		
		var rd = Math.floor(Math.random() * ( bgcolors.length));
		var used = [];
		var current_bgcolor = bgcolors[rd];
		if(obj.find('.135editor').size() > 0 ) {
			var components = obj.find('.135editor').each(function(i){
				if(i%random_color_step == 0){
					do
					{
						rd = Math.floor(Math.random() * ( bgcolors.length));
					}
					while(jQuery.inArray(rd,used) != -1);
					
					used[used.length] = rd;
					if( used.length == bgcolors.length ){
						used = [];
					}				
					
					current_bgcolor = bgcolors[rd];
				}
				$(this).html(parseHtml($(this).html(),current_bgcolor,'#FFF'));
			});
		}
		else{
			$(obj).html(parseHtml($(obj).html(),current_bgcolor,'#FFF'));
		}
		
		
		setDealingHtml(obj.html())
		obj = null;
	});
	
	$(document).on('click','#html-parsers-list .appmsg',function(){
		
		var rule_id = $(this).data('id');
		var data = {html:getEditorHtml(true)};
		$('#html-parsers-options :input').each(function(){
			data[this.name] = this.value;
		});
		ajaxAction('/html_parsers/parse/'+rule_id,data,null,function(request){
			if(request.success) {
				setEditorHtml(request.html);
			}
		});
		
	});
	
	
	$(document).on('click','#signature-list #no-signature',function(){
		$('body',current_editor.document).find('.assistant.prefix').remove();
		$('body',current_editor.document).find('.assistant.suffix').remove();
		return false;
	});
	
	$(document).on('click','#signature-list .signature',function(){
		$('body',current_editor.document).find('.assistant.prefix').remove();
		$('body',current_editor.document).find('.assistant.suffix').remove();
		$('body',current_editor.document).prepend('<section class="assistant prefix">'+$(this).data('prefix')+'</section>');
		$('body',current_editor.document).append('<section class="assistant suffix">'+$(this).data('suffix')+'</section>');
		return false;
	});
	
	$(document).on('click','#btn-new-msg',function(){
		if(confirm('是否确认清空内容并新建文档，清空后内容将无法恢复，请自行保存内容')) {
			current_edit_msg_id = null;
			current_draft_id = null;
			current_media_idx = null;
			current_media_id = null;
			$('#template_id').val(''); $('#template_name').val(''); $('#dialog-template-name').val('');
			setEditorHtml("");
		}
	});
	
	$('#preview-editor').click(function(){
		$('#preview-msg-content').html(getEditorHtml(true));
		publishController.open_html_dialog('preview-msg');
	});
	
	
	$('#save-as-template').click(function(){
		//clean_135helper();
		saveTemplate(this.form);
	});
	
	
	$(document).on('click','#html-to-image',function(){
		//clean_135helper();
		this.form.action = '/downloads/htmlToImage';
		this.form.submit();
	});
	$(document).on('click','#html-to-image-640',function(){
		//clean_135helper();
		this.form.action = '/downloads/htmlToImage?width=640';
		this.form.submit();
	});
	var client = new ZeroClipboard( $('#copy-editor-html') );
	client.on( 'ready', function(event) {
		client.on( 'copy', function(event) {
			//clean_135helper();
			var html = getEditorHtml();
	  		event.clipboardData.setData('text/html',html );
	  		event.clipboardData.setData('text/plain', html );
	  		showSuccessMessage("已成功复制到剪切板");
		});
	});
	
	
	
			window.onbeforeunload = function(event){
			event = event || window.event;
			var html = current_editor.getContent();
			if(html != ""){
				if( window.localStorage){
					localStorage._135content = html;
					window.localStorage._edit_msg_id = current_edit_msg_id; 
				}
				return event.returnValue = "即将离开页面，是否确认编辑的内容已保存或者复制使用，否则内容可能丢失";   
			}
		}
	
	$('#bg-choose .chooser').click(function(){
		//$('#bg-img').attr('src',$(this).data('url'));
		$('body').css('background-image','url('+$(this).data('url')+')');
		//$.cookie('bgimg',$(this).data('url'));
	});
	
	$('#bg-choose .default').click(function(){
		$('body').css('background-image','initial');
		//$('#bg-img').removeAttr('src',"");//
		//$.cookie('bgimg',null);
	});

	
	setTimeout(function(){
		//if($.cookie('bgimg')) {
		//$('#bg-img').attr('src',$.cookie('bgimg'));
		//	$('body').css('background-image','url('+$.cookie('bgimg')+')');
		//}
		//else{
			var x= new Date();
			var week=x.getDay();
			var bi = week%5;
			$('#bg-choose div').eq(bi).trigger('click'); // 按week每天轮换背景图
		//}
	},8000);
	
	$('#replace-color-all').click(function(){
		if(this.checked){
			replace_full_color = true;
		}
		else{
			replace_full_color = false;
		}
	});	
	
	$('#btn-favor-color').click(function(){
		
		if( !sso.check_userlogin() ) {
			return false;
		}
		var colors = $('#custom-color-text').css('backgroundColor');//.val();
		var color_array = [];
		color_array[0] = colors;
		var hasfavor = false;
		
		$('#favor-colors li').each(function(){
			if($.inArray($(this).css('backgroundColor'),color_array) == -1 ) {
				colors += ';'+$(this).css('backgroundColor');
			}
			else{
				hasfavor = true;
			}
			
		});
		if( hasfavor == false ) {
			setFavorColor(colors,function(){
				$('#favor-colors').prepend('<li class="color-swatch" style="background-color:'+ $('#custom-color-text').val() +' ;"><i title="删除" class="fa fa-remove"></i></li>');
			});
		}
		else{
			alert('此颜色已收藏');
		}
		
	});
	
	
	
	$(document).on('click','#favor-colors .fa-remove',function(e){
		
		e.preventDefault();e.stopPropagation();
		
		$(this).parent().remove();
		var colors = '';
		$('#favor-colors li').each(function(){
			colors += $(this).css('backgroundColor')+';';
		});
		setFavorColor(colors);
		return false;
	});
	
	/*var bgcolors = ['#FAF9DE','#FFF2E2','#FDE6E0','#E3EDCD','#DCE2F1','#E9EBFE','#EAEAEF','#c9b3a5'];
	var bi = 0;
	setInterval(function(){
		//$('body').css('background',bgcolors[bi]);
		
		$('#bg-choose div').eq(bi).trigger('click');
		//bi++;bi = bi%bgcolors.length;
		bi++;bi = bi%5;
	},600000);*/
	
	setTimeout(function(){
		$('#editor-style-tips').remove();
	},30000);
	
	});


</script>

<script src="http://static.135editor.com/cache/0b503b51c7-v63.js" type="text/javascript"></script>
<div id="editor-footer" style="position:fixed;z-index:10000;bottom:0px;width:100%;height:36px;background:rgba(45,45,45,0.5);color:#999;line-height:36px;">
	<div style="position:relative;max-width: 1135px; margin: 0px auto;padding:0 5px;">
		<div style="float:right;top:0px;">
			<a target="_blank" href="/feed_backs/add" class="btn btn-default btn-xs">反馈意见</a>
		</div>
		<!-- <div id="ajaxestatus" style="line-height:32px;display:none;margin-top: 6px;margin-right:10px;width:100px;height:20px; background:url('http://static.135editor.com/img/pbar-ani.gif') repeat-x 0 0;float:right;margin-left:5px;"></div> -->
		
		<div class="ifo" style="margin:0 auto;">
			<p  style="font-size:12px;clear:none;color:#ccc;padding: 0;display:inline-block;">
				Powered By 提子科技(北京)有限公司. <a href="http://www.135editor.com/books/chapter/1/21" style="color:#FFF;" target="_blank">加入QQ交流群</a>
			</p>
			<!-- 
			<p  style="font-size:12px;clear:none;padding: 0;display:inline-block;margin-left:50px;color:#ccc;">
				广告：<a href="http://www.zhichiwangluo.com/zhichi/index.php?r=pc/Index/invitationTpl&site=135bianji" style="color:#ccc;" target="_blank">微场景制作平台--咫尺微页， 点此-免费制作</a>
			</p> -->
						<div class="hide"><div style="display:none;">
	<span id="cnzz_stat_icon_1258977711"></span>
	<script type="text/javascript">
setTimeout(function(){
	var cnzz_protocol = (("https:" == document.location.protocol) ? "https://" : "http://");
	var obj = document.createElement("script");
	obj.src = cnzz_protocol + "s4.cnzz.com/stat.php?id=1258977711&show=pic";
	$('#cnzz_stat_icon_1258977711').after(obj);
},2000);
</script>
</div></div>
					</div>
	</div>
</div>
<div id="bg-choose" title="点击更换编辑器背景图" data-toggle="tooltip" data-placement="right" data-container="body" style="position:fixed;bottom:28px;left:0px;z-index:10;height:auto;width:30px;border:0;padding:5px 0;background:rgba(58,51,50,0.5);">
	<div class="default" style="background:#c9b3a5;"></div>
	<div class="chooser" style="background:#584446;" data-url="http://image1.135editor.com/135editor/tpl/bg.jpg"></div>
	<div class="chooser" style="background:#ba907b;" data-url="http://image1.135editor.com/135editor/bg1.jpg"></div>
	<div class="chooser" style="background:#fcdebd;" data-url="http://image1.135editor.com/135editor/bg2.jpg"></div>
	<div class="chooser" style="background:#b0bbb7;" data-url="http://image1.135editor.com/135editor/bg3.jpg"></div>
</div>


<script type="text/javascript" src="" id="XiuxiuScript"></script> 
<script> 
function loadjs(url) {
	var sobj = document.createElement('script');
	sobj.type = "text/javascript";
	sobj.src = url;
	var headobj = document.getElementsByTagName('head')[0];
	headobj.appendChild(sobj);
}
setTimeout(function(){	
	loadjs('http://open.web.meitu.com/sources/xiuxiu.js');	
},5000);//延时5秒
</script> 

<!-- <img src="http://image.135editor.com/135editor/tpl/bg.jpg" style="position:fixed;top:0px;left:0px;z-index:-1;height:100%;width:100%;border:0;">-->
<!-- <img id="bg-img" style="position:fixed;top:0px;left:0px;z-index:-2;height:auto;width:100%;border:0;">-->
</body>
</html><!-- get from cache. -->